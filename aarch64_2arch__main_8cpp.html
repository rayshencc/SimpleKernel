<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SimpleKernel: /root/src/arch/aarch64/arch_main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SimpleKernel<span id="projectnumber">&#160;1.17.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('aarch64_2arch__main_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">arch_main.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>&gt;</code><br />
<code>#include &lt;cstring&gt;</code><br />
<code>#include &quot;<a class="el" href="arch_8h_source.html">arch.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="basic__info_8hpp_source.html">basic_info.hpp</a>&quot;</code><br />
<code>#include &quot;interrupt.h&quot;</code><br />
<code>#include &quot;<a class="el" href="kernel__elf_8hpp_source.html">kernel_elf.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="kernel__fdt_8hpp_source.html">kernel_fdt.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="per__cpu_8hpp_source.html">per_cpu.hpp</a>&quot;</code><br />
<code>#include &quot;sk_cstdio&quot;</code><br />
<code>#include &quot;<a class="el" href="sk__stdlib_8h_source.html">sk_stdlib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="virtual__memory_8hpp_source.html">virtual_memory.hpp</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for arch_main.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="aarch64_2arch__main_8cpp__incl.png" border="0" usemap="#a_2root_2src_2arch_2aarch64_2arch__main_8cpp" alt=""/></div>
<map name="a_2root_2src_2arch_2aarch64_2arch__main_8cpp" id="a_2root_2src_2arch_2aarch64_2arch__main_8cpp">
<area shape="rect" title=" " alt="" coords="1487,5,1649,45"/>
<area shape="rect" href="cpu__io_8h.html" title=" " alt="" coords="507,387,583,412"/>
<area shape="poly" title=" " alt="" coords="1487,31,1197,41,1012,51,823,66,647,85,501,110,444,125,401,142,374,160,368,169,365,178,365,254,369,277,378,298,392,317,410,334,452,361,495,380,493,385,450,366,407,338,388,321,373,301,364,279,360,254,360,178,363,166,370,156,399,137,442,120,500,105,647,80,823,60,1012,46,1197,36,1486,26"/>
<area shape="rect" title=" " alt="" coords="2116,240,2183,265"/>
<area shape="poly" title=" " alt="" coords="1650,41,1736,63,1828,91,1912,124,1993,164,2119,231,2116,236,1991,169,1910,129,1826,96,1735,68,1649,47"/>
<area shape="rect" href="arch_8h.html" title=" " alt="" coords="262,313,325,339"/>
<area shape="poly" title=" " alt="" coords="1486,31,1201,39,831,52,504,71,395,83,362,89,346,96,326,117,312,142,302,169,295,198,291,254,293,300,287,300,285,254,290,197,296,168,307,139,322,113,342,91,360,84,394,78,503,66,831,47,1201,33,1486,26"/>
<area shape="rect" href="basic__info_8hpp.html" title=" " alt="" coords="1050,167,1166,192"/>
<area shape="poly" title=" " alt="" coords="1490,48,1321,96,1227,131,1147,164,1145,159,1225,126,1319,91,1488,43"/>
<area shape="rect" title=" " alt="" coords="1493,387,1576,412"/>
<area shape="poly" title=" " alt="" coords="1589,44,1742,198,1852,312,1856,327,1851,340,1834,354,1807,366,1738,383,1660,393,1590,398,1589,393,1660,388,1737,378,1806,361,1831,350,1847,337,1851,327,1847,315,1738,202,1585,48"/>
<area shape="rect" title=" " alt="" coords="2160,93,2251,119"/>
<area shape="poly" title=" " alt="" coords="1650,32,1872,56,2142,91,2147,91,2146,97,2141,96,1871,61,1649,37"/>
<area shape="rect" href="kernel__elf_8hpp.html" title=" " alt="" coords="1819,167,1933,192"/>
<area shape="poly" title=" " alt="" coords="1651,38,1723,58,1760,73,1795,91,1833,121,1861,154,1858,157,1829,125,1792,96,1758,78,1721,63,1649,43"/>
<area shape="rect" href="kernel__fdt_8hpp.html" title=" " alt="" coords="2379,167,2493,192"/>
<area shape="poly" title=" " alt="" coords="1650,27,1741,33,1852,45,1973,64,2091,91,2121,103,2149,116,2262,146,2365,165,2364,170,2261,151,2147,121,2118,108,2090,96,1972,69,1852,50,1741,39,1649,32"/>
<area shape="rect" href="per__cpu_8hpp.html" title=" " alt="" coords="704,240,805,265"/>
<area shape="poly" title=" " alt="" coords="1487,29,1356,36,1190,57,1100,75,1010,99,922,130,839,169,801,198,772,231,768,227,797,194,836,164,920,125,1009,94,1099,70,1189,52,1356,31,1486,24"/>
<area shape="rect" href="sk__stdlib_8h.html" title=" " alt="" coords="1522,167,1614,192"/>
<area shape="poly" title=" " alt="" coords="1571,46,1571,153,1565,153,1565,46"/>
<area shape="rect" href="virtual__memory_8hpp.html" title=" " alt="" coords="1332,93,1484,119"/>
<area shape="poly" title=" " alt="" coords="1531,48,1445,90,1443,85,1529,43"/>
<area shape="rect" title=" " alt="" coords="752,460,819,485"/>
<area shape="poly" title=" " alt="" coords="584,409,739,455,738,460,583,414"/>
<area shape="rect" title=" " alt="" coords="507,460,576,485"/>
<area shape="poly" title=" " alt="" coords="547,412,545,447,540,446,542,412"/>
<area shape="rect" title=" " alt="" coords="821,533,891,559"/>
<area shape="poly" title=" " alt="" coords="558,410,595,446,620,466,647,483,687,501,730,516,807,534,806,540,728,521,685,506,644,488,617,470,591,450,554,414"/>
<area shape="rect" title=" " alt="" coords="1051,533,1117,559"/>
<area shape="poly" title=" " alt="" coords="568,410,643,446,741,483,821,503,903,519,1037,538,1036,543,902,524,820,509,739,488,641,451,566,414"/>
<area shape="rect" title=" " alt="" coords="5,533,69,559"/>
<area shape="poly" title=" " alt="" coords="507,406,310,425,204,441,162,451,130,462,109,475,89,491,57,524,53,521,85,487,106,471,128,458,160,446,203,436,309,420,507,401"/>
<area shape="rect" title=" " alt="" coords="93,533,157,559"/>
<area shape="poly" title=" " alt="" coords="508,407,305,429,206,445,172,454,154,462,143,474,136,489,129,520,124,519,131,487,139,471,150,458,170,449,205,440,304,424,507,401"/>
<area shape="rect" title=" " alt="" coords="182,533,306,559"/>
<area shape="poly" title=" " alt="" coords="508,406,310,428,215,444,182,453,166,462,161,470,161,478,169,494,187,511,209,525,206,529,183,515,165,498,155,479,156,468,162,458,180,448,213,439,309,423,507,401"/>
<area shape="rect" href="test__environment__state_8hpp.html" title=" " alt="" coords="176,460,381,485"/>
<area shape="poly" title=" " alt="" coords="508,413,336,459,334,454,506,408"/>
<area shape="poly" title=" " alt="" coords="372,483,807,536,807,541,371,488"/>
<area shape="poly" title=" " alt="" coords="382,480,1037,538,1037,543,381,486"/>
<area shape="poly" title=" " alt="" coords="241,488,83,534,82,529,239,483"/>
<area shape="poly" title=" " alt="" coords="255,488,164,530,162,525,253,483"/>
<area shape="poly" title=" " alt="" coords="275,487,258,522,253,520,271,484"/>
<area shape="rect" title=" " alt="" coords="330,533,393,559"/>
<area shape="poly" title=" " alt="" coords="294,483,339,522,336,526,290,487"/>
<area shape="poly" title=" " alt="" coords="325,334,495,381,493,386,324,339"/>
<area shape="poly" title=" " alt="" coords="307,337,355,385,381,415,400,440,420,462,452,483,481,494,520,504,617,520,807,539,807,544,616,525,519,509,479,499,449,488,417,466,396,444,377,418,351,388,303,341"/>
<area shape="poly" title=" " alt="" coords="313,336,384,385,416,414,438,439,461,462,496,483,527,491,582,499,735,516,1037,539,1037,544,735,521,581,505,526,496,494,488,457,467,434,443,412,417,381,389,310,341"/>
<area shape="rect" title=" " alt="" coords="246,387,341,412"/>
<area shape="poly" title=" " alt="" coords="296,339,296,373,291,373,291,339"/>
<area shape="poly" title=" " alt="" coords="1062,195,1013,212,963,239,942,256,925,276,913,299,909,325,909,401,906,435,896,468,872,522,867,520,891,466,900,434,904,401,904,324,908,297,920,273,938,252,960,234,1011,207,1060,190"/>
<area shape="poly" title=" " alt="" coords="1080,195,1045,214,1014,242,1003,259,997,275,992,314,990,344,994,374,1014,432,1041,483,1068,521,1063,524,1037,486,1009,434,989,375,985,344,987,313,992,274,998,257,1010,238,1042,209,1077,190"/>
<area shape="rect" href="kernel__log_8hpp.html" title=" " alt="" coords="1620,240,1737,265"/>
<area shape="poly" title=" " alt="" coords="1167,185,1607,240,1606,245,1166,191"/>
<area shape="rect" href="singleton_8hpp.html" title=" " alt="" coords="1253,313,1363,339"/>
<area shape="poly" title=" " alt="" coords="1118,191,1147,226,1187,263,1226,287,1265,306,1263,311,1223,292,1184,267,1143,229,1114,194"/>
<area shape="rect" title=" " alt="" coords="1126,313,1229,339"/>
<area shape="poly" title=" " alt="" coords="1113,191,1122,225,1137,264,1161,301,1157,304,1132,267,1117,226,1108,193"/>
<area shape="poly" title=" " alt="" coords="1738,259,1787,269,1830,285,1847,296,1857,308,1859,323,1852,340,1830,362,1800,383,1722,420,1624,452,1514,479,1402,502,1295,520,1131,542,1130,537,1294,514,1401,496,1513,474,1622,447,1720,415,1798,378,1827,358,1847,337,1854,323,1852,311,1843,300,1828,290,1785,274,1737,264"/>
<area shape="rect" title=" " alt="" coords="1045,313,1101,339"/>
<area shape="poly" title=" " alt="" coords="1620,262,1336,291,1115,316,1115,316,1114,311,1114,311,1335,285,1620,257"/>
<area shape="rect" title=" " alt="" coords="1766,313,1837,339"/>
<area shape="poly" title=" " alt="" coords="1700,263,1771,304,1768,309,1697,268"/>
<area shape="rect" title=" " alt="" coords="1618,313,1742,339"/>
<area shape="poly" title=" " alt="" coords="1682,266,1682,300,1677,300,1676,266"/>
<area shape="poly" title=" " alt="" coords="1620,268,1377,314,1376,309,1619,263"/>
<area shape="poly" title=" " alt="" coords="1665,268,1609,315,1554,377,1550,374,1605,311,1661,263"/>
<area shape="poly" title=" " alt="" coords="1620,264,1243,316,1242,311,1619,259"/>
<area shape="rect" href="spinlock_8hpp.html" title=" " alt="" coords="1388,313,1492,339"/>
<area shape="poly" title=" " alt="" coords="1641,268,1493,312,1491,307,1640,263"/>
<area shape="poly" title=" " alt="" coords="1388,340,1376,341,1149,365,926,382,597,399,597,394,925,377,1149,360,1376,336,1387,334"/>
<area shape="poly" title=" " alt="" coords="1388,339,1376,341,1233,363,1091,389,950,425,833,459,831,454,948,420,1090,384,1232,358,1376,336,1388,334"/>
<area shape="poly" title=" " alt="" coords="1410,341,900,531,898,526,1408,336"/>
<area shape="poly" title=" " alt="" coords="1457,337,1510,376,1507,380,1454,341"/>
<area shape="rect" title=" " alt="" coords="1307,387,1387,412"/>
<area shape="poly" title=" " alt="" coords="1427,341,1374,380,1371,376,1423,337"/>
<area shape="rect" title=" " alt="" coords="1411,387,1469,412"/>
<area shape="poly" title=" " alt="" coords="1443,339,1443,373,1437,373,1437,339"/>
<area shape="rect" href="expected_8hpp.html" title=" " alt="" coords="1822,387,1933,412"/>
<area shape="poly" title=" " alt="" coords="1493,333,1809,384,1808,389,1492,338"/>
<area shape="poly" title=" " alt="" coords="1871,414,1838,452,1814,472,1788,488,1731,505,1654,519,1466,537,1275,545,1131,547,1131,542,1275,540,1466,532,1653,514,1730,500,1786,483,1811,468,1834,448,1867,411"/>
<area shape="rect" title=" " alt="" coords="1856,460,1939,485"/>
<area shape="poly" title=" " alt="" coords="1883,412,1893,446,1888,448,1878,413"/>
<area shape="poly" title=" " alt="" coords="1878,192,1878,225,1884,265,1898,299,1916,329,1955,383,1970,408,1976,433,1972,460,1952,487,1936,494,1904,500,1801,511,1501,525,1039,536,905,544,905,539,1039,531,1500,519,1800,505,1903,495,1934,489,1949,483,1967,458,1971,434,1965,410,1951,386,1912,332,1893,301,1879,266,1873,226,1873,192"/>
<area shape="poly" title=" " alt="" coords="1879,192,1885,227,1893,246,1903,264,1914,274,1926,280,1951,285,1975,292,1987,299,1997,312,2021,359,2032,403,2031,424,2025,445,2014,466,1996,487,1978,499,1948,509,1860,524,1743,535,1608,542,1333,548,1131,548,1131,543,1333,543,1607,537,1742,530,1859,519,1947,504,1976,494,1993,483,2009,463,2020,443,2026,423,2027,403,2016,361,1992,315,1983,303,1973,297,1949,290,1924,285,1911,278,1899,267,1888,249,1880,228,1874,193"/>
<area shape="poly" title=" " alt="" coords="1921,189,2104,237,2102,242,1919,195"/>
<area shape="poly" title=" " alt="" coords="1845,195,1725,238,1723,233,1843,190"/>
<area shape="poly" title=" " alt="" coords="1819,192,1720,211,1609,242,1584,255,1558,268,1464,296,1377,315,1376,310,1463,291,1556,263,1581,250,1607,238,1719,206,1818,187"/>
<area shape="poly" title=" " alt="" coords="1933,190,2006,210,2036,223,2055,238,2066,262,2063,285,2051,306,2031,326,1978,360,1924,384,1921,379,1976,355,2027,322,2046,303,2058,283,2060,263,2051,242,2033,228,2004,215,1932,195"/>
<area shape="rect" title=" " alt="" coords="1913,240,1964,265"/>
<area shape="poly" title=" " alt="" coords="1888,191,1921,228,1917,231,1884,194"/>
<area shape="rect" title=" " alt="" coords="1988,240,2041,265"/>
<area shape="poly" title=" " alt="" coords="1899,190,1981,231,1979,236,1897,194"/>
<area shape="rect" title=" " alt="" coords="2207,240,2297,265"/>
<area shape="poly" title=" " alt="" coords="1934,188,2194,237,2193,242,1933,194"/>
<area shape="poly" title=" " alt="" coords="2431,193,2404,249,2393,286,2388,325,2388,401,2385,432,2378,458,2365,477,2349,491,2329,500,2305,505,2250,506,2118,491,2048,485,1978,488,1835,504,1715,515,1509,523,1303,526,1039,536,905,544,905,539,1039,531,1303,521,1509,518,1714,509,1835,499,1977,483,2048,480,2119,486,2250,501,2304,500,2327,495,2346,486,2361,473,2373,455,2380,431,2383,401,2383,325,2388,285,2399,247,2427,191"/>
<area shape="poly" title=" " alt="" coords="2439,192,2439,325,2439,401,2438,428,2435,450,2425,469,2405,488,2384,495,2344,501,2215,513,1834,530,1420,541,1131,547,1131,541,1419,536,1834,525,2215,507,2343,496,2383,490,2403,483,2421,466,2430,448,2433,427,2433,401,2433,325,2433,192"/>
<area shape="poly" title=" " alt="" coords="2379,189,1751,247,1751,242,2378,183"/>
<area shape="poly" title=" " alt="" coords="2426,194,2378,232,2345,252,2310,268,2224,288,2114,300,1989,306,1856,308,1591,309,1474,311,1377,316,1377,311,1474,305,1591,303,1856,303,1989,301,2114,294,2223,282,2308,263,2343,248,2375,228,2422,190"/>
<area shape="poly" title=" " alt="" coords="2472,190,2504,203,2532,221,2549,242,2550,254,2543,267,2526,284,2502,299,2439,325,2362,347,2274,364,2094,386,1947,398,1946,392,2094,381,2273,358,2360,342,2438,320,2499,294,2522,280,2539,264,2545,253,2544,244,2529,225,2501,208,2470,195"/>
<area shape="poly" title=" " alt="" coords="2407,195,2296,237,2294,232,2405,190"/>
<area shape="rect" title=" " alt="" coords="2689,240,2788,265"/>
<area shape="poly" title=" " alt="" coords="2485,189,2677,234,2676,239,2484,195"/>
<area shape="rect" title=" " alt="" coords="2813,240,2881,265"/>
<area shape="poly" title=" " alt="" coords="2494,186,2629,207,2800,237,2799,243,2628,212,2493,191"/>
<area shape="rect" title=" " alt="" coords="2474,240,2529,265"/>
<area shape="poly" title=" " alt="" coords="2449,191,2483,228,2480,232,2445,194"/>
<area shape="rect" title=" " alt="" coords="2605,240,2665,265"/>
<area shape="poly" title=" " alt="" coords="2469,190,2592,233,2590,238,2467,195"/>
<area shape="poly" title=" " alt="" coords="704,261,645,267,581,278,525,294,505,304,492,315,486,330,491,346,504,362,519,376,516,380,500,365,487,348,481,330,487,312,502,300,523,289,580,273,644,262,703,255"/>
<area shape="poly" title=" " alt="" coords="759,265,784,446,779,447,754,266"/>
<area shape="poly" title=" " alt="" coords="752,267,738,306,725,362,722,393,723,425,730,456,742,484,755,500,771,513,808,530,806,535,768,517,751,504,738,487,724,457,718,426,717,393,720,361,733,304,747,265"/>
<area shape="poly" title=" " alt="" coords="769,263,1062,522,1059,526,766,267"/>
<area shape="poly" title=" " alt="" coords="806,263,1032,313,1031,318,805,268"/>
<area shape="poly" title=" " alt="" coords="806,257,993,278,1239,310,1239,316,992,283,805,262"/>
<area shape="rect" title=" " alt="" coords="501,313,576,339"/>
<area shape="poly" title=" " alt="" coords="721,268,587,311,586,306,719,263"/>
<area shape="rect" title=" " alt="" coords="601,313,666,339"/>
<area shape="poly" title=" " alt="" coords="737,268,666,309,663,304,734,263"/>
<area shape="rect" title=" " alt="" coords="1471,240,1545,265"/>
<area shape="poly" title=" " alt="" coords="1560,194,1529,231,1524,228,1556,191"/>
<area shape="poly" title=" " alt="" coords="1332,111,1232,115,1108,125,973,142,838,169,778,182,724,190,631,205,590,217,552,238,516,269,480,315,475,331,482,347,496,363,514,377,511,381,493,367,478,350,470,331,475,312,512,266,549,234,588,213,630,199,724,184,777,177,837,164,972,137,1108,120,1232,110,1331,106"/>
<area shape="poly" title=" " alt="" coords="1332,113,1268,119,1193,129,1115,145,1040,169,976,196,952,213,927,242,906,276,889,313,876,352,868,392,859,465,858,520,852,520,854,464,862,391,871,351,884,311,901,273,923,238,949,210,973,191,1038,164,1114,140,1192,124,1267,114,1331,108"/>
<area shape="poly" title=" " alt="" coords="1406,120,1389,156,1376,176,1359,194,1314,223,1270,237,1226,243,1184,245,1144,248,1105,257,1069,278,1036,315,1030,330,1030,352,1040,409,1058,470,1077,520,1072,522,1053,472,1035,411,1024,353,1025,329,1031,312,1066,274,1103,252,1143,243,1184,240,1226,238,1269,232,1312,218,1356,190,1372,173,1385,153,1402,118"/>
<area shape="poly" title=" " alt="" coords="1484,106,1578,110,1694,120,1821,137,1946,164,1976,176,2004,190,2108,232,2106,237,2002,194,1973,180,1945,169,1820,142,1694,125,1578,115,1484,111"/>
<area shape="poly" title=" " alt="" coords="1360,121,1170,166,1169,161,1359,116"/>
<area shape="poly" title=" " alt="" coords="1421,117,1459,152,1512,190,1567,215,1621,234,1619,239,1565,220,1509,194,1456,156,1417,121"/>
<area shape="poly" title=" " alt="" coords="1332,115,1304,122,1277,133,1253,148,1233,168,1225,185,1223,203,1227,221,1235,239,1259,274,1286,302,1282,306,1255,277,1231,242,1222,223,1218,203,1220,184,1228,165,1249,144,1275,128,1303,117,1331,110"/>
<area shape="poly" title=" " alt="" coords="1411,118,1415,147,1423,185,1437,226,1461,264,1497,298,1539,326,1584,348,1632,365,1727,386,1809,395,1808,400,1726,391,1631,370,1582,353,1536,331,1494,302,1457,267,1433,229,1418,187,1409,148,1406,119"/>
<area shape="poly" title=" " alt="" coords="1485,107,1713,123,1853,140,1993,164,2113,197,2212,232,2210,237,2112,202,1991,169,1852,145,1713,129,1484,113"/>
<area shape="poly" title=" " alt="" coords="1435,116,1530,159,1528,163,1433,121"/>
<area shape="rect" title=" " alt="" coords="1242,167,1345,192"/>
<area shape="poly" title=" " alt="" coords="1391,121,1325,162,1322,157,1388,116"/>
</map>
</div>
</div>
<p><a href="aarch64_2arch__main_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa26c42c34bbb6c8c7cd4a8664dc7952f" id="r_aa26c42c34bbb6c8c7cd4a8664dc7952f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aarch64_2arch__main_8cpp.html#aa26c42c34bbb6c8c7cd4a8664dc7952f">ArchInit</a> (int argc, const char **argv)</td></tr>
<tr class="separator:aa26c42c34bbb6c8c7cd4a8664dc7952f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad90b12c5e1b1a5911044c7c1286289da" id="r_ad90b12c5e1b1a5911044c7c1286289da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aarch64_2arch__main_8cpp.html#ad90b12c5e1b1a5911044c7c1286289da">ArchInitSMP</a> (int, const char **)</td></tr>
<tr class="separator:ad90b12c5e1b1a5911044c7c1286289da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94c31dc3a1de17229bc6863fff8eddd7" id="r_a94c31dc3a1de17229bc6863fff8eddd7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aarch64_2arch__main_8cpp.html#a94c31dc3a1de17229bc6863fff8eddd7">WakeUpOtherCores</a> ()</td></tr>
<tr class="separator:a94c31dc3a1de17229bc6863fff8eddd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13c92ba83f807779913f45bc9ac404b0" id="r_a13c92ba83f807779913f45bc9ac404b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aarch64_2arch__main_8cpp.html#a13c92ba83f807779913f45bc9ac404b0">InitTaskContext</a> (<a class="el" href="structcpu__io_1_1CalleeSavedContext.html">cpu_io::CalleeSavedContext</a> *task_context, void(*<a class="el" href="acpi_8h.html#a9f4b9757ed06b7cffea1bd7b35f6c093">entry</a>)(void *), void *arg, uint64_t stack_top)</td></tr>
<tr class="separator:a13c92ba83f807779913f45bc9ac404b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68bd5f23f249b2c277d460dc2e2ee47a" id="r_a68bd5f23f249b2c277d460dc2e2ee47a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="aarch64_2arch__main_8cpp.html#a68bd5f23f249b2c277d460dc2e2ee47a">InitTaskContext</a> (<a class="el" href="structcpu__io_1_1CalleeSavedContext.html">cpu_io::CalleeSavedContext</a> *task_context, <a class="el" href="structcpu__io_1_1TrapContext.html">cpu_io::TrapContext</a> *trap_context_ptr, uint64_t stack_top)</td></tr>
<tr class="separator:a68bd5f23f249b2c277d460dc2e2ee47a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa26c42c34bbb6c8c7cd4a8664dc7952f" name="aa26c42c34bbb6c8c7cd4a8664dc7952f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa26c42c34bbb6c8c7cd4a8664dc7952f">&#9670;&#160;</a></span>ArchInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ArchInit </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>体系结构相关初始化 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>在不同体系结构有不同含义，同 _start </td></tr>
    <tr><td class="paramname">argv</td><td>在不同体系结构有不同含义，同 _start </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="aarch64_2arch__main_8cpp_source.html#l00047">47</a> of file <a class="el" href="aarch64_2arch__main_8cpp_source.html">arch_main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   47</span>                                           {</div>
<div class="line"><span class="lineno">   48</span>  <a class="code hl_function" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton&lt;KernelFdt&gt;::GetInstance</a>() =</div>
<div class="line"><span class="lineno">   49</span>      <a class="code hl_class" href="classKernelFdt.html">KernelFdt</a>(<a class="code hl_define" href="sk__libc__test_8cpp.html#acbc25345a39784031ea891c317ab6f4e">strtoull</a>(argv[2], <span class="keyword">nullptr</span>, 16));</div>
<div class="line"><span class="lineno">   50</span> </div>
<div class="line"><span class="lineno">   51</span>  <a class="code hl_function" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton&lt;BasicInfo&gt;::GetInstance</a>() = <a class="code hl_struct" href="structBasicInfo.html">BasicInfo</a>(argc, argv);</div>
<div class="line"><span class="lineno">   52</span> </div>
<div class="line"><span class="lineno">   53</span>  <span class="comment">// 解析内核 elf 信息</span></div>
<div class="line"><span class="lineno">   54</span>  <a class="code hl_function" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton&lt;KernelElf&gt;::GetInstance</a>() =</div>
<div class="line"><span class="lineno">   55</span>      <a class="code hl_class" href="classKernelElf.html">KernelElf</a>(<a class="code hl_class" href="classSingleton.html">Singleton&lt;BasicInfo&gt;::GetInstance</a>().elf_addr);</div>
<div class="line"><span class="lineno">   56</span> </div>
<div class="line"><span class="lineno">   57</span>  sk_std::cout &lt;&lt; Singleton&lt;BasicInfo&gt;::GetInstance();</div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span>  <a class="code hl_function" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton&lt;KernelFdt&gt;::GetInstance</a>().CheckPSCI().or_else(</div>
<div class="line"><span class="lineno">   60</span>      [](<a class="code hl_struct" href="structError.html">Error</a> err) -&gt; <a class="code hl_typedef" href="expected_8hpp.html#a87330dc74eb67e824914b8d343050757">Expected&lt;void&gt;</a> {</div>
<div class="line"><span class="lineno">   61</span>        <a class="code hl_struct" href="structklog_1_1Err.html">klog::Err</a>(<span class="stringliteral">&quot;CheckPSCI failed: %s\n&quot;</span>, err.<a class="code hl_function" href="structError.html#aa63ee10532d668f25a5147d7dc753749">message</a>());</div>
<div class="line"><span class="lineno">   62</span>        <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno">   63</span>      });</div>
<div class="line"><span class="lineno">   64</span> </div>
<div class="line"><span class="lineno">   65</span>  <a class="code hl_struct" href="structklog_1_1Info.html">klog::Info</a>(<span class="stringliteral">&quot;Hello aarch64 ArchInit\n&quot;</span>);</div>
<div class="line"><span class="lineno">   66</span>}</div>
<div class="ttc" id="aclassKernelElf_html"><div class="ttname"><a href="classKernelElf.html">KernelElf</a></div><div class="ttdef"><b>Definition</b> <a href="kernel__elf_8hpp_source.html#l00023">kernel_elf.hpp:23</a></div></div>
<div class="ttc" id="aclassKernelFdt_html"><div class="ttname"><a href="classKernelFdt.html">KernelFdt</a></div><div class="ttdef"><b>Definition</b> <a href="kernel__fdt_8hpp_source.html#l00034">kernel_fdt.hpp:34</a></div></div>
<div class="ttc" id="aclassSingleton_html"><div class="ttname"><a href="classSingleton.html">Singleton</a></div><div class="ttdef"><b>Definition</b> <a href="singleton_8hpp_source.html#l00010">singleton.hpp:10</a></div></div>
<div class="ttc" id="aclassSingleton_html_a68856b49e098eadba37b60366db33ebd"><div class="ttname"><a href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton::GetInstance</a></div><div class="ttdeci">static auto GetInstance() -&gt; T &amp;</div><div class="ttdef"><b>Definition</b> <a href="singleton_8hpp_source.html#l00023">singleton.hpp:23</a></div></div>
<div class="ttc" id="aexpected_8hpp_html_a87330dc74eb67e824914b8d343050757"><div class="ttname"><a href="expected_8hpp.html#a87330dc74eb67e824914b8d343050757">Expected</a></div><div class="ttdeci">std::expected&lt; T, Error &gt; Expected</div><div class="ttdoc">std::expected 别名模板</div><div class="ttdef"><b>Definition</b> <a href="expected_8hpp_source.html#l00162">expected.hpp:162</a></div></div>
<div class="ttc" id="ask__libc__test_8cpp_html_acbc25345a39784031ea891c317ab6f4e"><div class="ttname"><a href="sk__libc__test_8cpp.html#acbc25345a39784031ea891c317ab6f4e">strtoull</a></div><div class="ttdeci">#define strtoull</div><div class="ttdef"><b>Definition</b> <a href="sk__libc__test_8cpp_source.html#l00018">sk_libc_test.cpp:18</a></div></div>
<div class="ttc" id="astructBasicInfo_html"><div class="ttname"><a href="structBasicInfo.html">BasicInfo</a></div><div class="ttdef"><b>Definition</b> <a href="basic__info_8hpp_source.html#l00026">basic_info.hpp:26</a></div></div>
<div class="ttc" id="astructError_html"><div class="ttname"><a href="structError.html">Error</a></div><div class="ttdef"><b>Definition</b> <a href="expected_8hpp_source.html#l00150">expected.hpp:150</a></div></div>
<div class="ttc" id="astructError_html_aa63ee10532d668f25a5147d7dc753749"><div class="ttname"><a href="structError.html#aa63ee10532d668f25a5147d7dc753749">Error::message</a></div><div class="ttdeci">constexpr auto message() const -&gt; const char *</div><div class="ttdef"><b>Definition</b> <a href="expected_8hpp_source.html#l00155">expected.hpp:155</a></div></div>
<div class="ttc" id="astructklog_1_1Err_html"><div class="ttname"><a href="structklog_1_1Err.html">klog::Err</a></div><div class="ttdef"><b>Definition</b> <a href="kernel__log_8hpp_source.html#l00188">kernel_log.hpp:188</a></div></div>
<div class="ttc" id="astructklog_1_1Info_html"><div class="ttname"><a href="structklog_1_1Info.html">klog::Info</a></div><div class="ttdef"><b>Definition</b> <a href="kernel__log_8hpp_source.html#l00168">kernel_log.hpp:168</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="aarch64_2arch__main_8cpp_aa26c42c34bbb6c8c7cd4a8664dc7952f_cgraph.png" border="0" usemap="#aaarch64_2arch__main_8cpp_aa26c42c34bbb6c8c7cd4a8664dc7952f_cgraph" alt=""/></div>
<map name="aaarch64_2arch__main_8cpp_aa26c42c34bbb6c8c7cd4a8664dc7952f_cgraph" id="aaarch64_2arch__main_8cpp_aa26c42c34bbb6c8c7cd4a8664dc7952f_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,77,56"/>
<area shape="rect" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd" title=" " alt="" coords="125,5,295,31"/>
<area shape="poly" title=" " alt="" coords="77,35,112,30,112,35,78,41"/>
<area shape="rect" href="structError.html#aa63ee10532d668f25a5147d7dc753749" title=" " alt="" coords="150,55,270,80"/>
<area shape="poly" title=" " alt="" coords="78,46,137,54,136,60,77,51"/>
<area shape="rect" href="expected_8hpp.html#a707ff37b9c7f7c83cf7f984840fa7a16" title="获取错误码对应的错误信息" alt="" coords="343,55,477,80"/>
<area shape="poly" title=" " alt="" coords="270,65,329,65,329,70,270,70"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="aarch64_2arch__main_8cpp_aa26c42c34bbb6c8c7cd4a8664dc7952f_icgraph.png" border="0" usemap="#aaarch64_2arch__main_8cpp_aa26c42c34bbb6c8c7cd4a8664dc7952f_icgraph" alt=""/></div>
<map name="aaarch64_2arch__main_8cpp_aa26c42c34bbb6c8c7cd4a8664dc7952f_icgraph" id="aaarch64_2arch__main_8cpp_aa26c42c34bbb6c8c7cd4a8664dc7952f_icgraph">
<area shape="rect" title=" " alt="" coords="108,5,180,31"/>
<area shape="rect" href="tests_2system__test_2main_8cpp.html#ab85c3edfd2aada0e059dccf8d002924d" title="内核入口" alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
<a id="ad90b12c5e1b1a5911044c7c1286289da" name="ad90b12c5e1b1a5911044c7c1286289da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad90b12c5e1b1a5911044c7c1286289da">&#9670;&#160;</a></span>ArchInitSMP()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ArchInitSMP </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="aarch64_2arch__main_8cpp_source.html#l00068">68</a> of file <a class="el" href="aarch64_2arch__main_8cpp_source.html">arch_main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   68</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a68bd5f23f249b2c277d460dc2e2ee47a" name="a68bd5f23f249b2c277d460dc2e2ee47a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68bd5f23f249b2c277d460dc2e2ee47a">&#9670;&#160;</a></span>InitTaskContext() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InitTaskContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcpu__io_1_1CalleeSavedContext.html">cpu_io::CalleeSavedContext</a> *&#160;</td>
          <td class="paramname"><em>task_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcpu__io_1_1TrapContext.html">cpu_io::TrapContext</a> *&#160;</td>
          <td class="paramname"><em>trap_context_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>stack_top</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>初始化用户线程的任务上下文（重载2） </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task_context</td><td>指向任务上下文的指针 </td></tr>
    <tr><td class="paramname">trap_context_ptr</td><td>指向 Trap 上下文的指针 </td></tr>
    <tr><td class="paramname">stack_top</td><td>内核栈顶地址 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="aarch64_2arch__main_8cpp_source.html#l00091">91</a> of file <a class="el" href="aarch64_2arch__main_8cpp_source.html">arch_main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   93</span>                                         {</div>
<div class="line"><span class="lineno">   94</span>  <span class="comment">// 清零上下文</span></div>
<div class="line"><span class="lineno">   95</span>  std::memset(task_context, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structcpu__io_1_1CalleeSavedContext.html">cpu_io::CalleeSavedContext</a>));</div>
<div class="line"><span class="lineno">   96</span> </div>
<div class="line"><span class="lineno">   97</span>  task_context-&gt;<a class="code hl_function" href="structcpu__io_1_1CalleeSavedContext.html#a4dc21308ff38303ff2484b49c84daa2d">ReturnAddress</a>() =</div>
<div class="line"><span class="lineno">   98</span>      <span class="keyword">reinterpret_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="arch_8h.html#a7241001f2323bd5690c3ee10606fb8c4">kernel_thread_entry</a>);</div>
<div class="line"><span class="lineno">   99</span>  task_context-&gt;<a class="code hl_function" href="structcpu__io_1_1CalleeSavedContext.html#a057438d663910d4cb7abcbb5615397ab">EntryFunction</a>() = <span class="keyword">reinterpret_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="arch_8h.html#acdf04695210228502c6042c9f530faf1">trap_return</a>);</div>
<div class="line"><span class="lineno">  100</span>  task_context-&gt;<a class="code hl_function" href="structcpu__io_1_1CalleeSavedContext.html#a1ae45175010d9b66ef6db82b668baa1d">EntryArgument</a>() = <span class="keyword">reinterpret_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(trap_context_ptr);</div>
<div class="line"><span class="lineno">  101</span>  task_context-&gt;<a class="code hl_function" href="structcpu__io_1_1CalleeSavedContext.html#a90361985987010520dd23face113731f">StackPointer</a>() = stack_top;</div>
<div class="line"><span class="lineno">  102</span>}</div>
<div class="ttc" id="aarch_8h_html_a7241001f2323bd5690c3ee10606fb8c4"><div class="ttname"><a href="arch_8h.html#a7241001f2323bd5690c3ee10606fb8c4">kernel_thread_entry</a></div><div class="ttdeci">void kernel_thread_entry()</div><div class="ttdef"><b>Definition</b> <a href="arch_8cpp_source.html#l00044">arch.cpp:44</a></div></div>
<div class="ttc" id="aarch_8h_html_acdf04695210228502c6042c9f530faf1"><div class="ttname"><a href="arch_8h.html#acdf04695210228502c6042c9f530faf1">trap_return</a></div><div class="ttdeci">void trap_return(void *)</div><div class="ttdef"><b>Definition</b> <a href="arch_8cpp_source.html#l00045">arch.cpp:45</a></div></div>
<div class="ttc" id="astructcpu__io_1_1CalleeSavedContext_html"><div class="ttname"><a href="structcpu__io_1_1CalleeSavedContext.html">cpu_io::CalleeSavedContext</a></div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00194">cpu_io.h:194</a></div></div>
<div class="ttc" id="astructcpu__io_1_1CalleeSavedContext_html_a057438d663910d4cb7abcbb5615397ab"><div class="ttname"><a href="structcpu__io_1_1CalleeSavedContext.html#a057438d663910d4cb7abcbb5615397ab">cpu_io::CalleeSavedContext::EntryFunction</a></div><div class="ttdeci">__always_inline uint64_t &amp; EntryFunction()</div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00203">cpu_io.h:203</a></div></div>
<div class="ttc" id="astructcpu__io_1_1CalleeSavedContext_html_a1ae45175010d9b66ef6db82b668baa1d"><div class="ttname"><a href="structcpu__io_1_1CalleeSavedContext.html#a1ae45175010d9b66ef6db82b668baa1d">cpu_io::CalleeSavedContext::EntryArgument</a></div><div class="ttdeci">__always_inline uint64_t &amp; EntryArgument()</div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00204">cpu_io.h:204</a></div></div>
<div class="ttc" id="astructcpu__io_1_1CalleeSavedContext_html_a4dc21308ff38303ff2484b49c84daa2d"><div class="ttname"><a href="structcpu__io_1_1CalleeSavedContext.html#a4dc21308ff38303ff2484b49c84daa2d">cpu_io::CalleeSavedContext::ReturnAddress</a></div><div class="ttdeci">__always_inline uint64_t &amp; ReturnAddress()</div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00202">cpu_io.h:202</a></div></div>
<div class="ttc" id="astructcpu__io_1_1CalleeSavedContext_html_a90361985987010520dd23face113731f"><div class="ttname"><a href="structcpu__io_1_1CalleeSavedContext.html#a90361985987010520dd23face113731f">cpu_io::CalleeSavedContext::StackPointer</a></div><div class="ttdeci">__always_inline uint64_t &amp; StackPointer()</div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00205">cpu_io.h:205</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="aarch64_2arch__main_8cpp_a68bd5f23f249b2c277d460dc2e2ee47a_cgraph.png" border="0" usemap="#aaarch64_2arch__main_8cpp_a68bd5f23f249b2c277d460dc2e2ee47a_cgraph" alt=""/></div>
<map name="aaarch64_2arch__main_8cpp_a68bd5f23f249b2c277d460dc2e2ee47a_cgraph" id="aaarch64_2arch__main_8cpp_a68bd5f23f249b2c277d460dc2e2ee47a_cgraph">
<area shape="rect" title=" " alt="" coords="5,163,128,189"/>
<area shape="rect" href="structcpu__io_1_1CalleeSavedContext.html#a1ae45175010d9b66ef6db82b668baa1d" title=" " alt="" coords="176,5,380,45"/>
<area shape="poly" title=" " alt="" coords="74,162,113,110,142,81,175,55,185,49,188,53,177,60,145,85,117,114,78,165"/>
<area shape="rect" href="structcpu__io_1_1CalleeSavedContext.html#a057438d663910d4cb7abcbb5615397ab" title=" " alt="" coords="176,69,380,109"/>
<area shape="poly" title=" " alt="" coords="89,161,175,119,195,111,197,116,177,124,92,166"/>
<area shape="rect" href="arch_8cpp.html#a7241001f2323bd5690c3ee10606fb8c4" title=" " alt="" coords="202,134,354,159"/>
<area shape="poly" title=" " alt="" coords="128,165,188,156,189,162,129,170"/>
<area shape="rect" href="structcpu__io_1_1CalleeSavedContext.html#a4dc21308ff38303ff2484b49c84daa2d" title=" " alt="" coords="176,184,380,224"/>
<area shape="poly" title=" " alt="" coords="129,181,163,186,162,191,128,187"/>
<area shape="rect" href="structcpu__io_1_1CalleeSavedContext.html#a90361985987010520dd23face113731f" title=" " alt="" coords="176,248,380,288"/>
<area shape="poly" title=" " alt="" coords="89,186,129,210,177,234,195,241,193,246,175,238,127,214,87,191"/>
<area shape="rect" href="arch_8cpp.html#acdf04695210228502c6042c9f530faf1" title=" " alt="" coords="231,313,325,338"/>
<area shape="poly" title=" " alt="" coords="78,187,116,241,144,272,177,298,218,314,216,319,175,302,141,276,112,245,73,190"/>
</map>
</div>

</div>
</div>
<a id="a13c92ba83f807779913f45bc9ac404b0" name="a13c92ba83f807779913f45bc9ac404b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13c92ba83f807779913f45bc9ac404b0">&#9670;&#160;</a></span>InitTaskContext() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InitTaskContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcpu__io_1_1CalleeSavedContext.html">cpu_io::CalleeSavedContext</a> *&#160;</td>
          <td class="paramname"><em>task_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *)&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>stack_top</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>初始化内核线程的任务上下文（重载1） </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task_context</td><td>指向任务上下文的指针 </td></tr>
    <tr><td class="paramname">entry</td><td>线程入口函数 </td></tr>
    <tr><td class="paramname">arg</td><td>传递给线程的参数 </td></tr>
    <tr><td class="paramname">stack_top</td><td>内核栈顶地址 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="aarch64_2arch__main_8cpp_source.html#l00079">79</a> of file <a class="el" href="aarch64_2arch__main_8cpp_source.html">arch_main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   80</span>                                                                          {</div>
<div class="line"><span class="lineno">   81</span>  <span class="comment">// 清零上下文</span></div>
<div class="line"><span class="lineno">   82</span>  std::memset(task_context, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structcpu__io_1_1CalleeSavedContext.html">cpu_io::CalleeSavedContext</a>));</div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span>  task_context-&gt;<a class="code hl_function" href="structcpu__io_1_1CalleeSavedContext.html#a4dc21308ff38303ff2484b49c84daa2d">ReturnAddress</a>() =</div>
<div class="line"><span class="lineno">   85</span>      <span class="keyword">reinterpret_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="arch_8h.html#a7241001f2323bd5690c3ee10606fb8c4">kernel_thread_entry</a>);</div>
<div class="line"><span class="lineno">   86</span>  task_context-&gt;<a class="code hl_function" href="structcpu__io_1_1CalleeSavedContext.html#a057438d663910d4cb7abcbb5615397ab">EntryFunction</a>() = <span class="keyword">reinterpret_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="acpi_8h.html#a9f4b9757ed06b7cffea1bd7b35f6c093">entry</a>);</div>
<div class="line"><span class="lineno">   87</span>  task_context-&gt;<a class="code hl_function" href="structcpu__io_1_1CalleeSavedContext.html#a1ae45175010d9b66ef6db82b668baa1d">EntryArgument</a>() = <span class="keyword">reinterpret_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(arg);</div>
<div class="line"><span class="lineno">   88</span>  task_context-&gt;<a class="code hl_function" href="structcpu__io_1_1CalleeSavedContext.html#a90361985987010520dd23face113731f">StackPointer</a>() = stack_top;</div>
<div class="line"><span class="lineno">   89</span>}</div>
<div class="ttc" id="aacpi_8h_html_a9f4b9757ed06b7cffea1bd7b35f6c093"><div class="ttname"><a href="acpi_8h.html#a9f4b9757ed06b7cffea1bd7b35f6c093">entry</a></div><div class="ttdeci">uint32_t * entry</div><div class="ttdef"><b>Definition</b> <a href="acpi_8h_source.html#l00001">acpi.h:1</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="aarch64_2arch__main_8cpp_a13c92ba83f807779913f45bc9ac404b0_cgraph.png" border="0" usemap="#aaarch64_2arch__main_8cpp_a13c92ba83f807779913f45bc9ac404b0_cgraph" alt=""/></div>
<map name="aaarch64_2arch__main_8cpp_a13c92ba83f807779913f45bc9ac404b0_cgraph" id="aaarch64_2arch__main_8cpp_a13c92ba83f807779913f45bc9ac404b0_cgraph">
<area shape="rect" title=" " alt="" coords="5,134,128,159"/>
<area shape="rect" href="structcpu__io_1_1CalleeSavedContext.html#a1ae45175010d9b66ef6db82b668baa1d" title=" " alt="" coords="176,5,380,45"/>
<area shape="poly" title=" " alt="" coords="78,132,119,94,175,55,188,48,191,53,177,60,122,98,82,136"/>
<area shape="rect" href="structcpu__io_1_1CalleeSavedContext.html#a057438d663910d4cb7abcbb5615397ab" title=" " alt="" coords="176,69,380,109"/>
<area shape="poly" title=" " alt="" coords="114,131,190,110,191,116,115,137"/>
<area shape="rect" href="arch_8cpp.html#a7241001f2323bd5690c3ee10606fb8c4" title=" " alt="" coords="202,134,354,159"/>
<area shape="poly" title=" " alt="" coords="128,144,188,144,188,149,128,149"/>
<area shape="rect" href="structcpu__io_1_1CalleeSavedContext.html#a4dc21308ff38303ff2484b49c84daa2d" title=" " alt="" coords="176,184,380,224"/>
<area shape="poly" title=" " alt="" coords="115,157,191,178,190,183,114,162"/>
<area shape="rect" href="structcpu__io_1_1CalleeSavedContext.html#a90361985987010520dd23face113731f" title=" " alt="" coords="176,248,380,288"/>
<area shape="poly" title=" " alt="" coords="82,157,122,195,177,234,191,240,188,245,175,238,119,199,78,161"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="aarch64_2arch__main_8cpp_a13c92ba83f807779913f45bc9ac404b0_icgraph.png" border="0" usemap="#aaarch64_2arch__main_8cpp_a13c92ba83f807779913f45bc9ac404b0_icgraph" alt=""/></div>
<map name="aaarch64_2arch__main_8cpp_a13c92ba83f807779913f45bc9ac404b0_icgraph" id="aaarch64_2arch__main_8cpp_a13c92ba83f807779913f45bc9ac404b0_icgraph">
<area shape="rect" title=" " alt="" coords="272,13,395,38"/>
<area shape="rect" href="structTaskControlBlock.html#a6e96afd7da4feb231b605e2b7cebfc42" title="构造函数 (内核线程)" alt="" coords="5,5,224,45"/>
<area shape="poly" title=" " alt="" coords="258,28,224,28,224,23,258,23"/>
</map>
</div>

</div>
</div>
<a id="a94c31dc3a1de17229bc6863fff8eddd7" name="a94c31dc3a1de17229bc6863fff8eddd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94c31dc3a1de17229bc6863fff8eddd7">&#9670;&#160;</a></span>WakeUpOtherCores()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WakeUpOtherCores </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>唤醒其余 core </p>

<p class="definition">Definition at line <a class="el" href="aarch64_2arch__main_8cpp_source.html#l00070">70</a> of file <a class="el" href="aarch64_2arch__main_8cpp_source.html">arch_main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   70</span>                        {</div>
<div class="line"><span class="lineno">   71</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; Singleton&lt;BasicInfo&gt;::GetInstance().core_count; i++) {</div>
<div class="line"><span class="lineno">   72</span>    <span class="keyword">auto</span> ret = cpu_io::psci::CpuOn(i, <span class="keyword">reinterpret_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="basic__info_8hpp.html#a698036b5e342c2164fb7fd7249d0e801">_boot</a>), 0);</div>
<div class="line"><span class="lineno">   73</span>    <span class="keywordflow">if</span> ((ret != cpu_io::psci::SUCCESS) &amp;&amp; (ret != cpu_io::psci::ALREADY_ON)) {</div>
<div class="line"><span class="lineno">   74</span>      <a class="code hl_struct" href="structklog_1_1Warn.html">klog::Warn</a>(<span class="stringliteral">&quot;hart %d start failed: %d\n&quot;</span>, i, ret);</div>
<div class="line"><span class="lineno">   75</span>    }</div>
<div class="line"><span class="lineno">   76</span>  }</div>
<div class="line"><span class="lineno">   77</span>}</div>
<div class="ttc" id="abasic__info_8hpp_html_a698036b5e342c2164fb7fd7249d0e801"><div class="ttname"><a href="basic__info_8hpp.html#a698036b5e342c2164fb7fd7249d0e801">_boot</a></div><div class="ttdeci">void _boot()</div><div class="ttdoc">内核入口，在 boot.S 中定义</div></div>
<div class="ttc" id="astructklog_1_1Warn_html"><div class="ttname"><a href="structklog_1_1Warn.html">klog::Warn</a></div><div class="ttdef"><b>Definition</b> <a href="kernel__log_8hpp_source.html#l00178">kernel_log.hpp:178</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="aarch64_2arch__main_8cpp_a94c31dc3a1de17229bc6863fff8eddd7_cgraph.png" border="0" usemap="#aaarch64_2arch__main_8cpp_a94c31dc3a1de17229bc6863fff8eddd7_cgraph" alt=""/></div>
<map name="aaarch64_2arch__main_8cpp_a94c31dc3a1de17229bc6863fff8eddd7_cgraph" id="aaarch64_2arch__main_8cpp_a94c31dc3a1de17229bc6863fff8eddd7_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,153,31"/>
<area shape="rect" href="basic__info_8hpp.html#a698036b5e342c2164fb7fd7249d0e801" title="内核入口，在 boot.S 中定义" alt="" coords="201,5,260,31"/>
<area shape="poly" title=" " alt="" coords="154,15,188,15,188,21,154,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="aarch64_2arch__main_8cpp_a94c31dc3a1de17229bc6863fff8eddd7_icgraph.png" border="0" usemap="#aaarch64_2arch__main_8cpp_a94c31dc3a1de17229bc6863fff8eddd7_icgraph" alt=""/></div>
<map name="aaarch64_2arch__main_8cpp_a94c31dc3a1de17229bc6863fff8eddd7_icgraph" id="aaarch64_2arch__main_8cpp_a94c31dc3a1de17229bc6863fff8eddd7_icgraph">
<area shape="rect" title=" " alt="" coords="108,5,256,31"/>
<area shape="rect" href="tests_2system__test_2main_8cpp.html#ab85c3edfd2aada0e059dccf8d002924d" title="内核入口" alt="" coords="5,5,60,31"/>
<area shape="poly" title=" " alt="" coords="94,21,60,21,60,15,94,15"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_70d5e250c66d001b18da37689179cade.html">arch</a></li><li class="navelem"><a class="el" href="dir_49610b2200846401e1c49e6871f5269a.html">aarch64</a></li><li class="navelem"><a class="el" href="aarch64_2arch__main_8cpp.html">arch_main.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
