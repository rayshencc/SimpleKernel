<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SimpleKernel: Plic Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SimpleKernel<span id="projectnumber">&#160;1.17.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classPlic.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="classPlic-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Plic Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classPlic.html" title="Plic 驱动">Plic</a> 驱动  
 <a href="classPlic.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="plic_8h_source.html">plic.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for Plic:</div>
<div class="dyncontent">
<div class="center"><img src="classPlic__coll__graph.png" border="0" usemap="#aPlic_coll__map" alt="Collaboration graph"/></div>
<map name="aPlic_coll__map" id="aPlic_coll__map">
<area shape="rect" title="Plic 驱动" alt="" coords="5,5,192,851"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a2e772e7f5f0ec20bad0e5d17d5f778bb" id="r_a2e772e7f5f0ec20bad0e5d17d5f778bb"><td class="memItemLeft" align="right" valign="top">typedef uint64_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a2e772e7f5f0ec20bad0e5d17d5f778bb">InterruptFunc</a>) (uint64_t cause, uint8_t *context)</td></tr>
<tr class="memdesc:a2e772e7f5f0ec20bad0e5d17d5f778bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">中断处理函数指针  <br /></td></tr>
<tr class="separator:a2e772e7f5f0ec20bad0e5d17d5f778bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5af803e29ad50b52fbb8e51bcb4dcf36" id="r_a5af803e29ad50b52fbb8e51bcb4dcf36"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a5af803e29ad50b52fbb8e51bcb4dcf36">Plic</a> (uint64_t dev_addr, size_t ndev, size_t context_count)</td></tr>
<tr class="separator:a5af803e29ad50b52fbb8e51bcb4dcf36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06b7a84e48f2b04577c92300b7340c28" id="r_a06b7a84e48f2b04577c92300b7340c28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a06b7a84e48f2b04577c92300b7340c28">Do</a> (uint64_t cause, uint8_t *context) const</td></tr>
<tr class="memdesc:a06b7a84e48f2b04577c92300b7340c28"><td class="mdescLeft">&#160;</td><td class="mdescRight">执行中断处理  <br /></td></tr>
<tr class="separator:a06b7a84e48f2b04577c92300b7340c28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76fe5261ee151ea8684e171cb63d0967" id="r_a76fe5261ee151ea8684e171cb63d0967"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a76fe5261ee151ea8684e171cb63d0967">Which</a> () const -&gt; uint32_t</td></tr>
<tr class="memdesc:a76fe5261ee151ea8684e171cb63d0967"><td class="mdescLeft">&#160;</td><td class="mdescRight">向 <a class="el" href="classPlic.html" title="Plic 驱动">Plic</a> 询问中断  <br /></td></tr>
<tr class="separator:a76fe5261ee151ea8684e171cb63d0967"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6016013e7b9882159750769241b01e1" id="r_ae6016013e7b9882159750769241b01e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#ae6016013e7b9882159750769241b01e1">Done</a> (uint32_t source_id) const</td></tr>
<tr class="memdesc:ae6016013e7b9882159750769241b01e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">告知 <a class="el" href="classPlic.html" title="Plic 驱动">Plic</a> 已经处理了当前 IRQ  <br /></td></tr>
<tr class="separator:ae6016013e7b9882159750769241b01e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a658abe866472d73845205e14924cb8f9" id="r_a658abe866472d73845205e14924cb8f9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a658abe866472d73845205e14924cb8f9">Set</a> (uint32_t hart_id, uint32_t source_id, uint32_t priority, bool enable) const</td></tr>
<tr class="memdesc:a658abe866472d73845205e14924cb8f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">设置指定中断源的使能状态  <br /></td></tr>
<tr class="separator:a658abe866472d73845205e14924cb8f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5e4e5230ac995ccc4fea10d053c8a39" id="r_ab5e4e5230ac995ccc4fea10d053c8a39"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#ab5e4e5230ac995ccc4fea10d053c8a39">Get</a> (uint32_t hart_id, uint32_t source_id) const -&gt; std::tuple&lt; uint32_t, bool, bool &gt;</td></tr>
<tr class="memdesc:ab5e4e5230ac995ccc4fea10d053c8a39"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取指定中断源的状态信息  <br /></td></tr>
<tr class="separator:ab5e4e5230ac995ccc4fea10d053c8a39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a0b651675c7785f166d69365e3d0d1c" id="r_a2a0b651675c7785f166d69365e3d0d1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a2a0b651675c7785f166d69365e3d0d1c">RegisterInterruptFunc</a> (uint8_t cause, <a class="el" href="classPlic.html#a2e772e7f5f0ec20bad0e5d17d5f778bb">InterruptFunc</a> func)</td></tr>
<tr class="memdesc:a2a0b651675c7785f166d69365e3d0d1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">注册外部中断处理函数  <br /></td></tr>
<tr class="separator:a2a0b651675c7785f166d69365e3d0d1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7955116ac9a481fd94e6c240e01dd08c" id="r_a7955116ac9a481fd94e6c240e01dd08c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a7955116ac9a481fd94e6c240e01dd08c">Do</a> (uint64_t cause, uint8_t *context)</td></tr>
<tr class="memdesc:a7955116ac9a481fd94e6c240e01dd08c"><td class="mdescLeft">&#160;</td><td class="mdescRight">执行外部中断处理  <br /></td></tr>
<tr class="separator:a7955116ac9a481fd94e6c240e01dd08c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">默认构造/析构函数</div></td></tr>
<tr class="memitem:acc7709703869babffe62d7607b7b4659" id="r_acc7709703869babffe62d7607b7b4659"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#acc7709703869babffe62d7607b7b4659">Plic</a> ()=default</td></tr>
<tr class="separator:acc7709703869babffe62d7607b7b4659"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac35ec5dddc80f7a3562a872129791952" id="r_ac35ec5dddc80f7a3562a872129791952"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#ac35ec5dddc80f7a3562a872129791952">Plic</a> (const <a class="el" href="classPlic.html">Plic</a> &amp;plic)=default</td></tr>
<tr class="separator:ac35ec5dddc80f7a3562a872129791952"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af69f14e800c443506377cf6d2434fa61" id="r_af69f14e800c443506377cf6d2434fa61"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#af69f14e800c443506377cf6d2434fa61">Plic</a> (<a class="el" href="classPlic.html">Plic</a> &amp;&amp;plic)=default</td></tr>
<tr class="separator:af69f14e800c443506377cf6d2434fa61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b1aa05bbc3b4a7f2a6b79edd65e7fad" id="r_a7b1aa05bbc3b4a7f2a6b79edd65e7fad"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a7b1aa05bbc3b4a7f2a6b79edd65e7fad">operator=</a> (const <a class="el" href="classPlic.html">Plic</a> &amp;plic) -&gt; <a class="el" href="classPlic.html">Plic</a> &amp;=default</td></tr>
<tr class="separator:a7b1aa05bbc3b4a7f2a6b79edd65e7fad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa4afca4b63f3195f39ca1335f4f0f8a" id="r_afa4afca4b63f3195f39ca1335f4f0f8a"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#afa4afca4b63f3195f39ca1335f4f0f8a">operator=</a> (<a class="el" href="classPlic.html">Plic</a> &amp;&amp;plic) -&gt; <a class="el" href="classPlic.html">Plic</a> &amp;=default</td></tr>
<tr class="separator:afa4afca4b63f3195f39ca1335f4f0f8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae11317dc45d5b8732e93099695ccc183" id="r_ae11317dc45d5b8732e93099695ccc183"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#ae11317dc45d5b8732e93099695ccc183">~Plic</a> ()=default</td></tr>
<tr class="separator:ae11317dc45d5b8732e93099695ccc183"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:acc08cea25259c0e5b03f4403960a6120" id="r_acc08cea25259c0e5b03f4403960a6120"><td class="memItemLeft" align="right" valign="top">__always_inline auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#acc08cea25259c0e5b03f4403960a6120">GetContextId</a> (uint32_t hart_id, uint32_t mode=1) const -&gt; uint32_t</td></tr>
<tr class="memdesc:acc08cea25259c0e5b03f4403960a6120"><td class="mdescLeft">&#160;</td><td class="mdescRight">计算 context ID  <br /></td></tr>
<tr class="separator:acc08cea25259c0e5b03f4403960a6120"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2485b424660226e719cd46bfc8155cd4" id="r_a2485b424660226e719cd46bfc8155cd4"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a2485b424660226e719cd46bfc8155cd4">GetEnableBit</a> (uint32_t context_id, uint32_t source_id) const -&gt; bool</td></tr>
<tr class="memdesc:a2485b424660226e719cd46bfc8155cd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取使能位寄存器中指定中断源的状态  <br /></td></tr>
<tr class="separator:a2485b424660226e719cd46bfc8155cd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81f982b9566deb66ae68f48dd980563e" id="r_a81f982b9566deb66ae68f48dd980563e"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a81f982b9566deb66ae68f48dd980563e">SetEnableBit</a> (uint32_t context_id, uint32_t source_id, bool value) const -&gt; void</td></tr>
<tr class="memdesc:a81f982b9566deb66ae68f48dd980563e"><td class="mdescLeft">&#160;</td><td class="mdescRight">设置使能位寄存器中指定中断源的状态  <br /></td></tr>
<tr class="separator:a81f982b9566deb66ae68f48dd980563e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bae1983a5596af119d947b17b10339b" id="r_a5bae1983a5596af119d947b17b10339b"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a5bae1983a5596af119d947b17b10339b">SourcePriority</a> (uint32_t source_id) const -&gt; uint32_t &amp;</td></tr>
<tr class="memdesc:a5bae1983a5596af119d947b17b10339b"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取中断源优先级寄存器  <br /></td></tr>
<tr class="separator:a5bae1983a5596af119d947b17b10339b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77b98c43eb82c4882137d709b324f591" id="r_a77b98c43eb82c4882137d709b324f591"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a77b98c43eb82c4882137d709b324f591">GetPendingBit</a> (uint32_t source_id) const -&gt; bool</td></tr>
<tr class="memdesc:a77b98c43eb82c4882137d709b324f591"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取挂起位寄存器中指定中断源的状态  <br /></td></tr>
<tr class="separator:a77b98c43eb82c4882137d709b324f591"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0c185dd91e6f439ddd5d8e0a37dc7cd" id="r_af0c185dd91e6f439ddd5d8e0a37dc7cd"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#af0c185dd91e6f439ddd5d8e0a37dc7cd">SetPendingBit</a> (uint32_t source_id, bool value) const -&gt; void</td></tr>
<tr class="memdesc:af0c185dd91e6f439ddd5d8e0a37dc7cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">设置挂起位寄存器中指定中断源的状态  <br /></td></tr>
<tr class="separator:af0c185dd91e6f439ddd5d8e0a37dc7cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54c3cd6e3325dfe97f89bc00c304c42c" id="r_a54c3cd6e3325dfe97f89bc00c304c42c"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a54c3cd6e3325dfe97f89bc00c304c42c">PriorityThreshold</a> (uint32_t context_id) const -&gt; uint32_t &amp;</td></tr>
<tr class="memdesc:a54c3cd6e3325dfe97f89bc00c304c42c"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取优先级阈值寄存器  <br /></td></tr>
<tr class="separator:a54c3cd6e3325dfe97f89bc00c304c42c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e776017bdc409c93853e4c7331ec090" id="r_a9e776017bdc409c93853e4c7331ec090"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a9e776017bdc409c93853e4c7331ec090">ClaimComplete</a> (uint32_t context_id) const -&gt; uint32_t &amp;</td></tr>
<tr class="memdesc:a9e776017bdc409c93853e4c7331ec090"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取声明/完成寄存器  <br /></td></tr>
<tr class="separator:a9e776017bdc409c93853e4c7331ec090"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a2980f6f61cd1cabc5930eaf04f17b673" id="r_a2980f6f61cd1cabc5930eaf04f17b673"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a2980f6f61cd1cabc5930eaf04f17b673">base_addr_</a> = 0</td></tr>
<tr class="separator:a2980f6f61cd1cabc5930eaf04f17b673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fda6a41bcf14fcabf05e844ff23befd" id="r_a0fda6a41bcf14fcabf05e844ff23befd"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a0fda6a41bcf14fcabf05e844ff23befd">ndev_</a> = 0</td></tr>
<tr class="separator:a0fda6a41bcf14fcabf05e844ff23befd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b190463443994fc9604544f2b29deb2" id="r_a3b190463443994fc9604544f2b29deb2"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a3b190463443994fc9604544f2b29deb2">context_count_</a> = 0</td></tr>
<tr class="separator:a3b190463443994fc9604544f2b29deb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:ad98d4eb9d88e57332315a9300ab22460" id="r_ad98d4eb9d88e57332315a9300ab22460"><td class="memItemLeft" align="right" valign="top">static constexpr uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#ad98d4eb9d88e57332315a9300ab22460">kSourcePriorityOffset</a> = 0x000000</td></tr>
<tr class="separator:ad98d4eb9d88e57332315a9300ab22460"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cd3d0321a7ce25c6fb5506c5c04d04a" id="r_a6cd3d0321a7ce25c6fb5506c5c04d04a"><td class="memItemLeft" align="right" valign="top">static constexpr uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a6cd3d0321a7ce25c6fb5506c5c04d04a">kPendingBitsOffset</a> = 0x001000</td></tr>
<tr class="separator:a6cd3d0321a7ce25c6fb5506c5c04d04a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7ef374f7e31c78f27d2f22d02f582a0" id="r_ac7ef374f7e31c78f27d2f22d02f582a0"><td class="memItemLeft" align="right" valign="top">static constexpr uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#ac7ef374f7e31c78f27d2f22d02f582a0">kEnableBitsOffset</a> = 0x002000</td></tr>
<tr class="separator:ac7ef374f7e31c78f27d2f22d02f582a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf475340167020865a8a596a7ba0a352" id="r_aaf475340167020865a8a596a7ba0a352"><td class="memItemLeft" align="right" valign="top">static constexpr uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#aaf475340167020865a8a596a7ba0a352">kContextOffset</a> = 0x200000</td></tr>
<tr class="separator:aaf475340167020865a8a596a7ba0a352"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad93813530cd1991aa623b97dc066d68" id="r_aad93813530cd1991aa623b97dc066d68"><td class="memItemLeft" align="right" valign="top">static constexpr uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#aad93813530cd1991aa623b97dc066d68">kContextSize</a> = 0x1000</td></tr>
<tr class="separator:aad93813530cd1991aa623b97dc066d68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a930c4c57c1200c2930cd5dab1cd427bf" id="r_a930c4c57c1200c2930cd5dab1cd427bf"><td class="memItemLeft" align="right" valign="top">static constexpr uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a930c4c57c1200c2930cd5dab1cd427bf">kPriorityThresholdOffset</a> = 0x0</td></tr>
<tr class="separator:a930c4c57c1200c2930cd5dab1cd427bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5003084e862e9e37191d3a438260a2b" id="r_ab5003084e862e9e37191d3a438260a2b"><td class="memItemLeft" align="right" valign="top">static constexpr uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#ab5003084e862e9e37191d3a438260a2b">kClaimCompleteOffset</a> = 0x4</td></tr>
<tr class="separator:ab5003084e862e9e37191d3a438260a2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1472ac54f856c071efe3935a9e608eb9" id="r_a1472ac54f856c071efe3935a9e608eb9"><td class="memItemLeft" align="right" valign="top">static constexpr uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#a1472ac54f856c071efe3935a9e608eb9">kEnableSize</a> = 0x80</td></tr>
<tr class="separator:a1472ac54f856c071efe3935a9e608eb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc64780e2b481585674b00d7ad2e27c7" id="r_acc64780e2b481585674b00d7ad2e27c7"><td class="memItemLeft" align="right" valign="top">static constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#acc64780e2b481585674b00d7ad2e27c7">kInterruptMaxCount</a> = 16</td></tr>
<tr class="memdesc:acc64780e2b481585674b00d7ad2e27c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">最大外部中断数量  <br /></td></tr>
<tr class="separator:acc64780e2b481585674b00d7ad2e27c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad65a66c8c63c7d98caa484813d7b80d8" id="r_ad65a66c8c63c7d98caa484813d7b80d8"><td class="memItemLeft" align="right" valign="top">static std::array&lt; <a class="el" href="classPlic.html#a2e772e7f5f0ec20bad0e5d17d5f778bb">InterruptFunc</a>, <a class="el" href="classPlic.html#acc64780e2b481585674b00d7ad2e27c7">kInterruptMaxCount</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPlic.html#ad65a66c8c63c7d98caa484813d7b80d8">interrupt_handlers_</a></td></tr>
<tr class="memdesc:ad65a66c8c63c7d98caa484813d7b80d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">外部中断处理函数数组  <br /></td></tr>
<tr class="separator:ad65a66c8c63c7d98caa484813d7b80d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classPlic.html" title="Plic 驱动">Plic</a> 驱动 </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright The SimpleKernel Contributors </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://github.com/riscv/riscv-plic">https://github.com/riscv/riscv-plic</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="plic_8h_source.html#l00017">17</a> of file <a class="el" href="plic_8h_source.html">plic.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a2e772e7f5f0ec20bad0e5d17d5f778bb" name="a2e772e7f5f0ec20bad0e5d17d5f778bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e772e7f5f0ec20bad0e5d17d5f778bb">&#9670;&#160;</a></span>InterruptFunc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint64_t(* Plic::InterruptFunc) (uint64_t cause, uint8_t *context)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>中断处理函数指针 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cause</td><td>中断号 </td></tr>
    <tr><td class="paramname">context</td><td>中断上下文 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="plic_8h_source.html#l00024">24</a> of file <a class="el" href="plic_8h_source.html">plic.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5af803e29ad50b52fbb8e51bcb4dcf36" name="a5af803e29ad50b52fbb8e51bcb4dcf36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5af803e29ad50b52fbb8e51bcb4dcf36">&#9670;&#160;</a></span>Plic() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Plic::Plic </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>dev_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>ndev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>context_count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>构造函数 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_addr</td><td>设备地址 </td></tr>
    <tr><td class="paramname">ndev</td><td>支持的中断源数量 (riscv,ndev) </td></tr>
    <tr><td class="paramname">context_count</td><td>上下文数量 (通常为 2 * core_count) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="plic_8cpp_source.html#l00016">16</a> of file <a class="el" href="plic_8cpp_source.html">plic.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   17</span>    : <a class="code hl_variable" href="classPlic.html#a2980f6f61cd1cabc5930eaf04f17b673">base_addr_</a>(dev_addr), <a class="code hl_variable" href="classPlic.html#a0fda6a41bcf14fcabf05e844ff23befd">ndev_</a>(ndev), <a class="code hl_variable" href="classPlic.html#a3b190463443994fc9604544f2b29deb2">context_count_</a>(context_count) {</div>
<div class="line"><span class="lineno">   18</span>  <span class="comment">// 设置所有中断源的优先级为 0 (禁用)</span></div>
<div class="line"><span class="lineno">   19</span>  <a class="code hl_struct" href="structklog_1_1Info.html">klog::Info</a>(<span class="stringliteral">&quot;Setting all interrupt priorities to 0\n&quot;</span>);</div>
<div class="line"><span class="lineno">   20</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> source_id = 0; source_id &lt;= <a class="code hl_variable" href="classPlic.html#a0fda6a41bcf14fcabf05e844ff23befd">ndev_</a>; source_id++) {</div>
<div class="line"><span class="lineno">   21</span>    <a class="code hl_function" href="classPlic.html#a5bae1983a5596af119d947b17b10339b">SourcePriority</a>(source_id) = 0;</div>
<div class="line"><span class="lineno">   22</span>  }</div>
<div class="line"><span class="lineno">   23</span> </div>
<div class="line"><span class="lineno">   24</span>  <a class="code hl_struct" href="structklog_1_1Info.html">klog::Info</a>(<span class="stringliteral">&quot;Disabling all interrupts for all contexts\n&quot;</span>);</div>
<div class="line"><span class="lineno">   25</span> </div>
<div class="line"><span class="lineno">   26</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> context_id = 0; context_id &lt; <a class="code hl_variable" href="classPlic.html#a3b190463443994fc9604544f2b29deb2">context_count_</a>; context_id++) {</div>
<div class="line"><span class="lineno">   27</span>    <span class="comment">// 设置优先级阈值为 0 (允许所有优先级的中断)</span></div>
<div class="line"><span class="lineno">   28</span>    <a class="code hl_function" href="classPlic.html#a54c3cd6e3325dfe97f89bc00c304c42c">PriorityThreshold</a>(context_id) = 0;</div>
<div class="line"><span class="lineno">   29</span>    <span class="comment">// 禁用所有中断</span></div>
<div class="line"><span class="lineno">   30</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> source_id = 0; source_id &lt;= <a class="code hl_variable" href="classPlic.html#a0fda6a41bcf14fcabf05e844ff23befd">ndev_</a>; source_id++) {</div>
<div class="line"><span class="lineno">   31</span>      <a class="code hl_function" href="classPlic.html#a81f982b9566deb66ae68f48dd980563e">SetEnableBit</a>(context_id, source_id, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno">   32</span>    }</div>
<div class="line"><span class="lineno">   33</span>  }</div>
<div class="line"><span class="lineno">   34</span> </div>
<div class="line"><span class="lineno">   35</span>  <a class="code hl_struct" href="structklog_1_1Info.html">klog::Info</a>(</div>
<div class="line"><span class="lineno">   36</span>      <span class="stringliteral">&quot;PLIC initialization: all interrupts disabled, priorities set to 0\n&quot;</span>);</div>
<div class="line"><span class="lineno">   37</span>}</div>
<div class="ttc" id="aclassPlic_html_a0fda6a41bcf14fcabf05e844ff23befd"><div class="ttname"><a href="classPlic.html#a0fda6a41bcf14fcabf05e844ff23befd">Plic::ndev_</a></div><div class="ttdeci">size_t ndev_</div><div class="ttdef"><b>Definition</b> <a href="plic_8h_source.html#l00117">plic.h:117</a></div></div>
<div class="ttc" id="aclassPlic_html_a2980f6f61cd1cabc5930eaf04f17b673"><div class="ttname"><a href="classPlic.html#a2980f6f61cd1cabc5930eaf04f17b673">Plic::base_addr_</a></div><div class="ttdeci">uint64_t base_addr_</div><div class="ttdef"><b>Definition</b> <a href="plic_8h_source.html#l00116">plic.h:116</a></div></div>
<div class="ttc" id="aclassPlic_html_a3b190463443994fc9604544f2b29deb2"><div class="ttname"><a href="classPlic.html#a3b190463443994fc9604544f2b29deb2">Plic::context_count_</a></div><div class="ttdeci">size_t context_count_</div><div class="ttdef"><b>Definition</b> <a href="plic_8h_source.html#l00118">plic.h:118</a></div></div>
<div class="ttc" id="aclassPlic_html_a54c3cd6e3325dfe97f89bc00c304c42c"><div class="ttname"><a href="classPlic.html#a54c3cd6e3325dfe97f89bc00c304c42c">Plic::PriorityThreshold</a></div><div class="ttdeci">auto PriorityThreshold(uint32_t context_id) const -&gt; uint32_t &amp;</div><div class="ttdoc">获取优先级阈值寄存器</div><div class="ttdef"><b>Definition</b> <a href="plic_8cpp_source.html#l00130">plic.cpp:130</a></div></div>
<div class="ttc" id="aclassPlic_html_a5bae1983a5596af119d947b17b10339b"><div class="ttname"><a href="classPlic.html#a5bae1983a5596af119d947b17b10339b">Plic::SourcePriority</a></div><div class="ttdeci">auto SourcePriority(uint32_t source_id) const -&gt; uint32_t &amp;</div><div class="ttdoc">获取中断源优先级寄存器</div><div class="ttdef"><b>Definition</b> <a href="plic_8cpp_source.html#l00105">plic.cpp:105</a></div></div>
<div class="ttc" id="aclassPlic_html_a81f982b9566deb66ae68f48dd980563e"><div class="ttname"><a href="classPlic.html#a81f982b9566deb66ae68f48dd980563e">Plic::SetEnableBit</a></div><div class="ttdeci">auto SetEnableBit(uint32_t context_id, uint32_t source_id, bool value) const -&gt; void</div><div class="ttdoc">设置使能位寄存器中指定中断源的状态</div><div class="ttdef"><b>Definition</b> <a href="plic_8cpp_source.html#l00091">plic.cpp:91</a></div></div>
<div class="ttc" id="astructklog_1_1Info_html"><div class="ttname"><a href="structklog_1_1Info.html">klog::Info</a></div><div class="ttdef"><b>Definition</b> <a href="kernel__log_8hpp_source.html#l00168">kernel_log.hpp:168</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPlic_a5af803e29ad50b52fbb8e51bcb4dcf36_cgraph.png" border="0" usemap="#aclassPlic_a5af803e29ad50b52fbb8e51bcb4dcf36_cgraph" alt=""/></div>
<map name="aclassPlic_a5af803e29ad50b52fbb8e51bcb4dcf36_cgraph" id="aclassPlic_a5af803e29ad50b52fbb8e51bcb4dcf36_cgraph">
<area shape="rect" title=" " alt="" coords="5,55,81,80"/>
<area shape="rect" href="classPlic.html#a54c3cd6e3325dfe97f89bc00c304c42c" title="获取优先级阈值寄存器" alt="" coords="129,5,293,31"/>
<area shape="poly" title=" " alt="" coords="81,54,129,39,154,32,155,37,130,45,82,59"/>
<area shape="rect" href="classPlic.html#a81f982b9566deb66ae68f48dd980563e" title="设置使能位寄存器中指定中断源的状态" alt="" coords="143,55,279,80"/>
<area shape="poly" title=" " alt="" coords="81,65,129,65,129,70,81,70"/>
<area shape="rect" href="classPlic.html#a5bae1983a5596af119d947b17b10339b" title="获取中断源优先级寄存器" alt="" coords="139,104,283,129"/>
<area shape="poly" title=" " alt="" coords="82,76,155,97,153,103,81,81"/>
</map>
</div>

</div>
</div>
<a id="acc7709703869babffe62d7607b7b4659" name="acc7709703869babffe62d7607b7b4659"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc7709703869babffe62d7607b7b4659">&#9670;&#160;</a></span>Plic() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Plic::Plic </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac35ec5dddc80f7a3562a872129791952" name="ac35ec5dddc80f7a3562a872129791952"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac35ec5dddc80f7a3562a872129791952">&#9670;&#160;</a></span>Plic() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Plic::Plic </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classPlic.html">Plic</a> &amp;&#160;</td>
          <td class="paramname"><em>plic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af69f14e800c443506377cf6d2434fa61" name="af69f14e800c443506377cf6d2434fa61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af69f14e800c443506377cf6d2434fa61">&#9670;&#160;</a></span>Plic() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Plic::Plic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPlic.html">Plic</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>plic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae11317dc45d5b8732e93099695ccc183" name="ae11317dc45d5b8732e93099695ccc183"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae11317dc45d5b8732e93099695ccc183">&#9670;&#160;</a></span>~Plic()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Plic::~Plic </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9e776017bdc409c93853e4c7331ec090" name="a9e776017bdc409c93853e4c7331ec090"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e776017bdc409c93853e4c7331ec090">&#9670;&#160;</a></span>ClaimComplete()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto Plic::ClaimComplete </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>context_id</em></td><td>)</td>
          <td> const -&gt; uint32_t&amp;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>获取声明/完成寄存器 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context_id</td><td>context ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint32_t&amp; 寄存器引用 </dd></dl>

<p class="definition">Definition at line <a class="el" href="plic_8cpp_source.html#l00135">135</a> of file <a class="el" href="plic_8cpp_source.html">plic.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  135</span>                                                               {</div>
<div class="line"><span class="lineno">  136</span>  <span class="keywordflow">return</span> *(uint32_t*)(<a class="code hl_variable" href="classPlic.html#a2980f6f61cd1cabc5930eaf04f17b673">base_addr_</a> + <a class="code hl_variable" href="classPlic.html#aaf475340167020865a8a596a7ba0a352">kContextOffset</a> +</div>
<div class="line"><span class="lineno">  137</span>                      (context_id * <a class="code hl_variable" href="classPlic.html#aad93813530cd1991aa623b97dc066d68">kContextSize</a>) + <a class="code hl_variable" href="classPlic.html#ab5003084e862e9e37191d3a438260a2b">kClaimCompleteOffset</a>);</div>
<div class="line"><span class="lineno">  138</span>}</div>
<div class="ttc" id="aclassPlic_html_aad93813530cd1991aa623b97dc066d68"><div class="ttname"><a href="classPlic.html#aad93813530cd1991aa623b97dc066d68">Plic::kContextSize</a></div><div class="ttdeci">static constexpr uint64_t kContextSize</div><div class="ttdef"><b>Definition</b> <a href="plic_8h_source.html#l00103">plic.h:103</a></div></div>
<div class="ttc" id="aclassPlic_html_aaf475340167020865a8a596a7ba0a352"><div class="ttname"><a href="classPlic.html#aaf475340167020865a8a596a7ba0a352">Plic::kContextOffset</a></div><div class="ttdeci">static constexpr uint64_t kContextOffset</div><div class="ttdef"><b>Definition</b> <a href="plic_8h_source.html#l00100">plic.h:100</a></div></div>
<div class="ttc" id="aclassPlic_html_ab5003084e862e9e37191d3a438260a2b"><div class="ttname"><a href="classPlic.html#ab5003084e862e9e37191d3a438260a2b">Plic::kClaimCompleteOffset</a></div><div class="ttdeci">static constexpr uint64_t kClaimCompleteOffset</div><div class="ttdef"><b>Definition</b> <a href="plic_8h_source.html#l00105">plic.h:105</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPlic_a9e776017bdc409c93853e4c7331ec090_icgraph.png" border="0" usemap="#aclassPlic_a9e776017bdc409c93853e4c7331ec090_icgraph" alt=""/></div>
<map name="aclassPlic_a9e776017bdc409c93853e4c7331ec090_icgraph" id="aclassPlic_a9e776017bdc409c93853e4c7331ec090_icgraph">
<area shape="rect" title="获取声明/完成寄存器" alt="" coords="147,31,301,56"/>
<area shape="rect" href="classPlic.html#ae6016013e7b9882159750769241b01e1" title="告知 Plic 已经处理了当前 IRQ" alt="" coords="9,5,95,31"/>
<area shape="poly" title=" " alt="" coords="133,33,95,27,96,22,134,27"/>
<area shape="rect" href="classPlic.html#a76fe5261ee151ea8684e171cb63d0967" title="向 Plic 询问中断" alt="" coords="5,55,99,80"/>
<area shape="poly" title=" " alt="" coords="134,59,99,63,99,58,133,53"/>
</map>
</div>

</div>
</div>
<a id="a7955116ac9a481fd94e6c240e01dd08c" name="a7955116ac9a481fd94e6c240e01dd08c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7955116ac9a481fd94e6c240e01dd08c">&#9670;&#160;</a></span>Do() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Plic::Do </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>cause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>执行外部中断处理 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cause</td><td>外部中断号 </td></tr>
    <tr><td class="paramname">context</td><td>中断上下文 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="plic_8cpp_source.html#l00053">53</a> of file <a class="el" href="plic_8cpp_source.html">plic.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   53</span>                                              {</div>
<div class="line"><span class="lineno">   54</span>  <a class="code hl_variable" href="classPlic.html#ad65a66c8c63c7d98caa484813d7b80d8">interrupt_handlers_</a>[cause](cause, context);</div>
<div class="line"><span class="lineno">   55</span>}</div>
<div class="ttc" id="aclassPlic_html_ad65a66c8c63c7d98caa484813d7b80d8"><div class="ttname"><a href="classPlic.html#ad65a66c8c63c7d98caa484813d7b80d8">Plic::interrupt_handlers_</a></div><div class="ttdeci">static std::array&lt; InterruptFunc, kInterruptMaxCount &gt; interrupt_handlers_</div><div class="ttdoc">外部中断处理函数数组</div><div class="ttdef"><b>Definition</b> <a href="plic_8h_source.html#l00114">plic.h:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a06b7a84e48f2b04577c92300b7340c28" name="a06b7a84e48f2b04577c92300b7340c28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06b7a84e48f2b04577c92300b7340c28">&#9670;&#160;</a></span>Do() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Plic::Do </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>cause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>执行中断处理 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cause</td><td>中断或异常号 </td></tr>
    <tr><td class="paramname">context</td><td>中断上下文 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae6016013e7b9882159750769241b01e1" name="ae6016013e7b9882159750769241b01e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6016013e7b9882159750769241b01e1">&#9670;&#160;</a></span>Done()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Plic::Done </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>source_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>告知 <a class="el" href="classPlic.html" title="Plic 驱动">Plic</a> 已经处理了当前 IRQ </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source_id</td><td>中断源 ID (1-1023) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="plic_8cpp_source.html#l00044">44</a> of file <a class="el" href="plic_8cpp_source.html">plic.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   44</span>                                        {</div>
<div class="line"><span class="lineno">   45</span>  <span class="keyword">auto</span> context_id = <a class="code hl_function" href="classPlic.html#acc08cea25259c0e5b03f4403960a6120">GetContextId</a>(<a class="code hl_function" href="namespacecpu__io.html#a52b8a7263a31e6670ef4dec7922d9e72">cpu_io::GetCurrentCoreId</a>());</div>
<div class="line"><span class="lineno">   46</span>  <a class="code hl_function" href="classPlic.html#a9e776017bdc409c93853e4c7331ec090">ClaimComplete</a>(context_id) = source_id;</div>
<div class="line"><span class="lineno">   47</span>}</div>
<div class="ttc" id="aclassPlic_html_a9e776017bdc409c93853e4c7331ec090"><div class="ttname"><a href="classPlic.html#a9e776017bdc409c93853e4c7331ec090">Plic::ClaimComplete</a></div><div class="ttdeci">auto ClaimComplete(uint32_t context_id) const -&gt; uint32_t &amp;</div><div class="ttdoc">获取声明/完成寄存器</div><div class="ttdef"><b>Definition</b> <a href="plic_8cpp_source.html#l00135">plic.cpp:135</a></div></div>
<div class="ttc" id="aclassPlic_html_acc08cea25259c0e5b03f4403960a6120"><div class="ttname"><a href="classPlic.html#acc08cea25259c0e5b03f4403960a6120">Plic::GetContextId</a></div><div class="ttdeci">__always_inline auto GetContextId(uint32_t hart_id, uint32_t mode=1) const -&gt; uint32_t</div><div class="ttdoc">计算 context ID</div><div class="ttdef"><b>Definition</b> <a href="plic_8h_source.html#l00127">plic.h:127</a></div></div>
<div class="ttc" id="anamespacecpu__io_html_a52b8a7263a31e6670ef4dec7922d9e72"><div class="ttname"><a href="namespacecpu__io.html#a52b8a7263a31e6670ef4dec7922d9e72">cpu_io::GetCurrentCoreId</a></div><div class="ttdeci">auto GetCurrentCoreId() -&gt; size_t</div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00026">cpu_io.h:26</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPlic_ae6016013e7b9882159750769241b01e1_cgraph.png" border="0" usemap="#aclassPlic_ae6016013e7b9882159750769241b01e1_cgraph" alt=""/></div>
<map name="aclassPlic_ae6016013e7b9882159750769241b01e1_cgraph" id="aclassPlic_ae6016013e7b9882159750769241b01e1_cgraph">
<area shape="rect" title="告知 Plic 已经处理了当前 IRQ" alt="" coords="5,55,92,80"/>
<area shape="rect" href="classPlic.html#a9e776017bdc409c93853e4c7331ec090" title="获取声明/完成寄存器" alt="" coords="155,5,310,31"/>
<area shape="poly" title=" " alt="" coords="91,53,139,39,169,32,170,37,141,45,93,58"/>
<area shape="rect" href="classPlic.html#acc08cea25259c0e5b03f4403960a6120" title="计算 context ID" alt="" coords="163,55,302,80"/>
<area shape="poly" title=" " alt="" coords="92,65,150,65,150,70,92,70"/>
<area shape="rect" href="namespacecpu__io.html#a52b8a7263a31e6670ef4dec7922d9e72" title=" " alt="" coords="140,104,325,129"/>
<area shape="poly" title=" " alt="" coords="93,76,172,98,171,103,91,81"/>
<area shape="rect" href="classtest__env_1_1TestEnvironmentState.html#a562424679984595e70361b0dad2ef96d" title="获取当前线程的环境实例指针（供 Mock 层调用）" alt="" coords="373,97,636,137"/>
<area shape="poly" title=" " alt="" coords="326,114,359,114,359,119,326,119"/>
</map>
</div>

</div>
</div>
<a id="ab5e4e5230ac995ccc4fea10d053c8a39" name="ab5e4e5230ac995ccc4fea10d053c8a39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5e4e5230ac995ccc4fea10d053c8a39">&#9670;&#160;</a></span>Get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto Plic::Get </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>hart_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>source_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const -&gt; std::tuple&lt;uint32_t, bool, bool&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取指定中断源的状态信息 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hart_id</td><td>hart ID </td></tr>
    <tr><td class="paramname">source_id</td><td>中断源 ID (1-1023) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>&lt;优先级, 使能状态, 挂起状态&gt; </dd></dl>

<p class="definition">Definition at line <a class="el" href="plic_8cpp_source.html#l00067">67</a> of file <a class="el" href="plic_8cpp_source.html">plic.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   68</span>                                      {</div>
<div class="line"><span class="lineno">   69</span>  <span class="comment">// 获取中断优先级</span></div>
<div class="line"><span class="lineno">   70</span>  <span class="keyword">auto</span> priority = <a class="code hl_function" href="classPlic.html#a5bae1983a5596af119d947b17b10339b">SourcePriority</a>(source_id);</div>
<div class="line"><span class="lineno">   71</span> </div>
<div class="line"><span class="lineno">   72</span>  <span class="comment">// 获取中断使能状态</span></div>
<div class="line"><span class="lineno">   73</span>  uint32_t context_id = <a class="code hl_function" href="classPlic.html#acc08cea25259c0e5b03f4403960a6120">GetContextId</a>(hart_id);</div>
<div class="line"><span class="lineno">   74</span>  <span class="keyword">auto</span> enabled = <a class="code hl_function" href="classPlic.html#a2485b424660226e719cd46bfc8155cd4">GetEnableBit</a>(context_id, source_id);</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>  <span class="comment">// 获取中断挂起状态</span></div>
<div class="line"><span class="lineno">   77</span>  <span class="keyword">auto</span> pending = <a class="code hl_function" href="classPlic.html#a77b98c43eb82c4882137d709b324f591">GetPendingBit</a>(source_id);</div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span>  <span class="keywordflow">return</span> {priority, enabled, pending};</div>
<div class="line"><span class="lineno">   80</span>}</div>
<div class="ttc" id="aclassPlic_html_a2485b424660226e719cd46bfc8155cd4"><div class="ttname"><a href="classPlic.html#a2485b424660226e719cd46bfc8155cd4">Plic::GetEnableBit</a></div><div class="ttdeci">auto GetEnableBit(uint32_t context_id, uint32_t source_id) const -&gt; bool</div><div class="ttdoc">获取使能位寄存器中指定中断源的状态</div><div class="ttdef"><b>Definition</b> <a href="plic_8cpp_source.html#l00082">plic.cpp:82</a></div></div>
<div class="ttc" id="aclassPlic_html_a77b98c43eb82c4882137d709b324f591"><div class="ttname"><a href="classPlic.html#a77b98c43eb82c4882137d709b324f591">Plic::GetPendingBit</a></div><div class="ttdeci">auto GetPendingBit(uint32_t source_id) const -&gt; bool</div><div class="ttdoc">获取挂起位寄存器中指定中断源的状态</div><div class="ttdef"><b>Definition</b> <a href="plic_8cpp_source.html#l00110">plic.cpp:110</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acc08cea25259c0e5b03f4403960a6120" name="acc08cea25259c0e5b03f4403960a6120"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc08cea25259c0e5b03f4403960a6120">&#9670;&#160;</a></span>GetContextId()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">__always_inline auto Plic::GetContextId </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>hart_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>mode</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const -&gt; uint32_t </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>计算 context ID </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hart_id</td><td>hart ID </td></tr>
    <tr><td class="paramname">mode</td><td>模式 (0=M-mode, 1=S-mode) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint32_t context ID </dd></dl>
<dl class="section note"><dt>Note</dt><dd>2 个模式的 context ID 计算方式为: hart_id * 2 + mode </dd></dl>

<p class="definition">Definition at line <a class="el" href="plic_8h_source.html#l00127">127</a> of file <a class="el" href="plic_8h_source.html">plic.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  128</span>                  {</div>
<div class="line"><span class="lineno">  129</span>    <span class="keywordflow">return</span> hart_id * 2 + mode;</div>
<div class="line"><span class="lineno">  130</span>  }</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPlic_acc08cea25259c0e5b03f4403960a6120_icgraph.png" border="0" usemap="#aclassPlic_acc08cea25259c0e5b03f4403960a6120_icgraph" alt=""/></div>
<map name="aclassPlic_acc08cea25259c0e5b03f4403960a6120_icgraph" id="aclassPlic_acc08cea25259c0e5b03f4403960a6120_icgraph">
<area shape="rect" title="计算 context ID" alt="" coords="147,55,285,80"/>
<area shape="rect" href="classPlic.html#ae6016013e7b9882159750769241b01e1" title="告知 Plic 已经处理了当前 IRQ" alt="" coords="9,5,95,31"/>
<area shape="poly" title=" " alt="" coords="160,53,95,33,96,28,161,48"/>
<area shape="rect" href="classPlic.html#a658abe866472d73845205e14924cb8f9" title="设置指定中断源的使能状态" alt="" coords="15,55,89,80"/>
<area shape="poly" title=" " alt="" coords="132,70,90,70,90,65,132,65"/>
<area shape="rect" href="classPlic.html#a76fe5261ee151ea8684e171cb63d0967" title="向 Plic 询问中断" alt="" coords="5,104,99,129"/>
<area shape="poly" title=" " alt="" coords="161,87,96,106,95,101,160,81"/>
</map>
</div>

</div>
</div>
<a id="a2485b424660226e719cd46bfc8155cd4" name="a2485b424660226e719cd46bfc8155cd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2485b424660226e719cd46bfc8155cd4">&#9670;&#160;</a></span>GetEnableBit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto Plic::GetEnableBit </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>context_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>source_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const -&gt; bool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>获取使能位寄存器中指定中断源的状态 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context_id</td><td>context ID </td></tr>
    <tr><td class="paramname">source_id</td><td>中断源 ID (1-1023，0 保留) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool 对应位的状态 </dd></dl>

<p class="definition">Definition at line <a class="el" href="plic_8cpp_source.html#l00082">82</a> of file <a class="el" href="plic_8cpp_source.html">plic.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   82</span>                                                                             {</div>
<div class="line"><span class="lineno">   83</span>  uint32_t word_index = source_id / 32;</div>
<div class="line"><span class="lineno">   84</span>  uint32_t bit_index = source_id % 32;</div>
<div class="line"><span class="lineno">   85</span>  uint32_t* word_addr =</div>
<div class="line"><span class="lineno">   86</span>      (uint32_t*)(<a class="code hl_variable" href="classPlic.html#a2980f6f61cd1cabc5930eaf04f17b673">base_addr_</a> + <a class="code hl_variable" href="classPlic.html#ac7ef374f7e31c78f27d2f22d02f582a0">kEnableBitsOffset</a> + (context_id * <a class="code hl_variable" href="classPlic.html#a1472ac54f856c071efe3935a9e608eb9">kEnableSize</a>) +</div>
<div class="line"><span class="lineno">   87</span>                  (word_index * 4));</div>
<div class="line"><span class="lineno">   88</span>  <span class="keywordflow">return</span> (*word_addr &gt;&gt; bit_index) &amp; 1;</div>
<div class="line"><span class="lineno">   89</span>}</div>
<div class="ttc" id="aclassPlic_html_a1472ac54f856c071efe3935a9e608eb9"><div class="ttname"><a href="classPlic.html#a1472ac54f856c071efe3935a9e608eb9">Plic::kEnableSize</a></div><div class="ttdeci">static constexpr uint64_t kEnableSize</div><div class="ttdef"><b>Definition</b> <a href="plic_8h_source.html#l00108">plic.h:108</a></div></div>
<div class="ttc" id="aclassPlic_html_ac7ef374f7e31c78f27d2f22d02f582a0"><div class="ttname"><a href="classPlic.html#ac7ef374f7e31c78f27d2f22d02f582a0">Plic::kEnableBitsOffset</a></div><div class="ttdeci">static constexpr uint64_t kEnableBitsOffset</div><div class="ttdef"><b>Definition</b> <a href="plic_8h_source.html#l00099">plic.h:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a77b98c43eb82c4882137d709b324f591" name="a77b98c43eb82c4882137d709b324f591"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77b98c43eb82c4882137d709b324f591">&#9670;&#160;</a></span>GetPendingBit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto Plic::GetPendingBit </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>source_id</em></td><td>)</td>
          <td> const -&gt; bool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>获取挂起位寄存器中指定中断源的状态 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source_id</td><td>中断源 ID (1-1023，0 保留) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool 对应位的状态 </dd></dl>

<p class="definition">Definition at line <a class="el" href="plic_8cpp_source.html#l00110">110</a> of file <a class="el" href="plic_8cpp_source.html">plic.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  110</span>                                                         {</div>
<div class="line"><span class="lineno">  111</span>  uint32_t word_index = source_id / 32;</div>
<div class="line"><span class="lineno">  112</span>  uint32_t bit_index = source_id % 32;</div>
<div class="line"><span class="lineno">  113</span>  uint32_t* word_addr =</div>
<div class="line"><span class="lineno">  114</span>      (uint32_t*)(<a class="code hl_variable" href="classPlic.html#a2980f6f61cd1cabc5930eaf04f17b673">base_addr_</a> + <a class="code hl_variable" href="classPlic.html#a6cd3d0321a7ce25c6fb5506c5c04d04a">kPendingBitsOffset</a> + (word_index * 4));</div>
<div class="line"><span class="lineno">  115</span>  <span class="keywordflow">return</span> (*word_addr &gt;&gt; bit_index) &amp; 1;</div>
<div class="line"><span class="lineno">  116</span>}</div>
<div class="ttc" id="aclassPlic_html_a6cd3d0321a7ce25c6fb5506c5c04d04a"><div class="ttname"><a href="classPlic.html#a6cd3d0321a7ce25c6fb5506c5c04d04a">Plic::kPendingBitsOffset</a></div><div class="ttdeci">static constexpr uint64_t kPendingBitsOffset</div><div class="ttdef"><b>Definition</b> <a href="plic_8h_source.html#l00098">plic.h:98</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7b1aa05bbc3b4a7f2a6b79edd65e7fad" name="a7b1aa05bbc3b4a7f2a6b79edd65e7fad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b1aa05bbc3b4a7f2a6b79edd65e7fad">&#9670;&#160;</a></span>operator=() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto Plic::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classPlic.html">Plic</a> &amp;&#160;</td>
          <td class="paramname"><em>plic</em></td><td>)</td>
          <td> -&gt;  <a class="el" href="classPlic.html">Plic</a> &amp;=default</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="afa4afca4b63f3195f39ca1335f4f0f8a" name="afa4afca4b63f3195f39ca1335f4f0f8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa4afca4b63f3195f39ca1335f4f0f8a">&#9670;&#160;</a></span>operator=() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto Plic::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classPlic.html">Plic</a> &amp;&amp;&#160;</td>
          <td class="paramname"><em>plic</em></td><td>)</td>
          <td> -&gt;  <a class="el" href="classPlic.html">Plic</a> &amp;=default</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a54c3cd6e3325dfe97f89bc00c304c42c" name="a54c3cd6e3325dfe97f89bc00c304c42c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54c3cd6e3325dfe97f89bc00c304c42c">&#9670;&#160;</a></span>PriorityThreshold()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto Plic::PriorityThreshold </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>context_id</em></td><td>)</td>
          <td> const -&gt; uint32_t&amp;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>获取优先级阈值寄存器 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context_id</td><td>context ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint32_t&amp; 寄存器引用 </dd></dl>

<p class="definition">Definition at line <a class="el" href="plic_8cpp_source.html#l00130">130</a> of file <a class="el" href="plic_8cpp_source.html">plic.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  130</span>                                                                   {</div>
<div class="line"><span class="lineno">  131</span>  <span class="keywordflow">return</span> *(uint32_t*)(<a class="code hl_variable" href="classPlic.html#a2980f6f61cd1cabc5930eaf04f17b673">base_addr_</a> + <a class="code hl_variable" href="classPlic.html#aaf475340167020865a8a596a7ba0a352">kContextOffset</a> +</div>
<div class="line"><span class="lineno">  132</span>                      (context_id * <a class="code hl_variable" href="classPlic.html#aad93813530cd1991aa623b97dc066d68">kContextSize</a>) + <a class="code hl_variable" href="classPlic.html#a930c4c57c1200c2930cd5dab1cd427bf">kPriorityThresholdOffset</a>);</div>
<div class="line"><span class="lineno">  133</span>}</div>
<div class="ttc" id="aclassPlic_html_a930c4c57c1200c2930cd5dab1cd427bf"><div class="ttname"><a href="classPlic.html#a930c4c57c1200c2930cd5dab1cd427bf">Plic::kPriorityThresholdOffset</a></div><div class="ttdeci">static constexpr uint64_t kPriorityThresholdOffset</div><div class="ttdef"><b>Definition</b> <a href="plic_8h_source.html#l00104">plic.h:104</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPlic_a54c3cd6e3325dfe97f89bc00c304c42c_icgraph.png" border="0" usemap="#aclassPlic_a54c3cd6e3325dfe97f89bc00c304c42c_icgraph" alt=""/></div>
<map name="aclassPlic_a54c3cd6e3325dfe97f89bc00c304c42c_icgraph" id="aclassPlic_a54c3cd6e3325dfe97f89bc00c304c42c_icgraph">
<area shape="rect" title="获取优先级阈值寄存器" alt="" coords="129,5,293,31"/>
<area shape="rect" href="classPlic.html#a5af803e29ad50b52fbb8e51bcb4dcf36" title=" " alt="" coords="5,5,81,31"/>
<area shape="poly" title=" " alt="" coords="116,21,82,21,82,15,116,15"/>
</map>
</div>

</div>
</div>
<a id="a2a0b651675c7785f166d69365e3d0d1c" name="a2a0b651675c7785f166d69365e3d0d1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a0b651675c7785f166d69365e3d0d1c">&#9670;&#160;</a></span>RegisterInterruptFunc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Plic::RegisterInterruptFunc </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>cause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classPlic.html#a2e772e7f5f0ec20bad0e5d17d5f778bb">InterruptFunc</a>&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>注册外部中断处理函数 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cause</td><td>外部中断号 </td></tr>
    <tr><td class="paramname">func</td><td>外部中断处理函数 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="plic_8cpp_source.html#l00049">49</a> of file <a class="el" href="plic_8cpp_source.html">plic.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   49</span>                                                                  {</div>
<div class="line"><span class="lineno">   50</span>  <a class="code hl_variable" href="classPlic.html#ad65a66c8c63c7d98caa484813d7b80d8">interrupt_handlers_</a>[cause] = func;</div>
<div class="line"><span class="lineno">   51</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a658abe866472d73845205e14924cb8f9" name="a658abe866472d73845205e14924cb8f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a658abe866472d73845205e14924cb8f9">&#9670;&#160;</a></span>Set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Plic::Set </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>hart_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>source_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>设置指定中断源的使能状态 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hart_id</td><td>hart ID </td></tr>
    <tr><td class="paramname">source_id</td><td>中断源 ID (1-1023) </td></tr>
    <tr><td class="paramname">priority</td><td>中断优先级 (0-7, 0 表示禁用) </td></tr>
    <tr><td class="paramname">enable</td><td>是否使能该中断 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="plic_8cpp_source.html#l00057">57</a> of file <a class="el" href="plic_8cpp_source.html">plic.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   58</span>                                  {</div>
<div class="line"><span class="lineno">   59</span>  <span class="comment">// 设置中断优先级</span></div>
<div class="line"><span class="lineno">   60</span>  <a class="code hl_function" href="classPlic.html#a5bae1983a5596af119d947b17b10339b">SourcePriority</a>(source_id) = priority;</div>
<div class="line"><span class="lineno">   61</span> </div>
<div class="line"><span class="lineno">   62</span>  <span class="comment">// 设置中断使能状态</span></div>
<div class="line"><span class="lineno">   63</span>  uint32_t context_id = <a class="code hl_function" href="classPlic.html#acc08cea25259c0e5b03f4403960a6120">GetContextId</a>(hart_id);</div>
<div class="line"><span class="lineno">   64</span>  <a class="code hl_function" href="classPlic.html#a81f982b9566deb66ae68f48dd980563e">SetEnableBit</a>(context_id, source_id, enable);</div>
<div class="line"><span class="lineno">   65</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPlic_a658abe866472d73845205e14924cb8f9_cgraph.png" border="0" usemap="#aclassPlic_a658abe866472d73845205e14924cb8f9_cgraph" alt=""/></div>
<map name="aclassPlic_a658abe866472d73845205e14924cb8f9_cgraph" id="aclassPlic_a658abe866472d73845205e14924cb8f9_cgraph">
<area shape="rect" title="设置指定中断源的使能状态" alt="" coords="5,55,80,80"/>
<area shape="rect" href="classPlic.html#acc08cea25259c0e5b03f4403960a6120" title="计算 context ID" alt="" coords="131,5,269,31"/>
<area shape="poly" title=" " alt="" coords="79,53,145,32,147,37,81,58"/>
<area shape="rect" href="classPlic.html#a81f982b9566deb66ae68f48dd980563e" title="设置使能位寄存器中指定中断源的状态" alt="" coords="132,55,268,80"/>
<area shape="poly" title=" " alt="" coords="80,65,118,65,118,70,80,70"/>
<area shape="rect" href="classPlic.html#a5bae1983a5596af119d947b17b10339b" title="获取中断源优先级寄存器" alt="" coords="128,104,272,129"/>
<area shape="poly" title=" " alt="" coords="81,76,147,97,145,102,79,81"/>
</map>
</div>

</div>
</div>
<a id="a81f982b9566deb66ae68f48dd980563e" name="a81f982b9566deb66ae68f48dd980563e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81f982b9566deb66ae68f48dd980563e">&#9670;&#160;</a></span>SetEnableBit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto Plic::SetEnableBit </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>context_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>source_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const -&gt; void</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>设置使能位寄存器中指定中断源的状态 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context_id</td><td>context ID </td></tr>
    <tr><td class="paramname">source_id</td><td>中断源 ID (1-1023，0 保留) </td></tr>
    <tr><td class="paramname">value</td><td>要设置的值 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="plic_8cpp_source.html#l00091">91</a> of file <a class="el" href="plic_8cpp_source.html">plic.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   92</span>                                                  {</div>
<div class="line"><span class="lineno">   93</span>  uint32_t word_index = source_id / 32;</div>
<div class="line"><span class="lineno">   94</span>  uint32_t bit_index = source_id % 32;</div>
<div class="line"><span class="lineno">   95</span>  uint32_t* word_addr =</div>
<div class="line"><span class="lineno">   96</span>      (uint32_t*)(<a class="code hl_variable" href="classPlic.html#a2980f6f61cd1cabc5930eaf04f17b673">base_addr_</a> + <a class="code hl_variable" href="classPlic.html#ac7ef374f7e31c78f27d2f22d02f582a0">kEnableBitsOffset</a> + (context_id * <a class="code hl_variable" href="classPlic.html#a1472ac54f856c071efe3935a9e608eb9">kEnableSize</a>) +</div>
<div class="line"><span class="lineno">   97</span>                  (word_index * 4));</div>
<div class="line"><span class="lineno">   98</span>  <span class="keywordflow">if</span> (value) {</div>
<div class="line"><span class="lineno">   99</span>    *word_addr |= (1U &lt;&lt; bit_index);</div>
<div class="line"><span class="lineno">  100</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  101</span>    *word_addr &amp;= ~(1U &lt;&lt; bit_index);</div>
<div class="line"><span class="lineno">  102</span>  }</div>
<div class="line"><span class="lineno">  103</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPlic_a81f982b9566deb66ae68f48dd980563e_icgraph.png" border="0" usemap="#aclassPlic_a81f982b9566deb66ae68f48dd980563e_icgraph" alt=""/></div>
<map name="aclassPlic_a81f982b9566deb66ae68f48dd980563e_icgraph" id="aclassPlic_a81f982b9566deb66ae68f48dd980563e_icgraph">
<area shape="rect" title="设置使能位寄存器中指定中断源的状态" alt="" coords="129,31,265,56"/>
<area shape="rect" href="classPlic.html#a5af803e29ad50b52fbb8e51bcb4dcf36" title=" " alt="" coords="5,5,81,31"/>
<area shape="poly" title=" " alt="" coords="115,33,81,27,82,22,116,27"/>
<area shape="rect" href="classPlic.html#a658abe866472d73845205e14924cb8f9" title="设置指定中断源的使能状态" alt="" coords="6,55,81,80"/>
<area shape="poly" title=" " alt="" coords="116,59,81,64,80,59,115,53"/>
</map>
</div>

</div>
</div>
<a id="af0c185dd91e6f439ddd5d8e0a37dc7cd" name="af0c185dd91e6f439ddd5d8e0a37dc7cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0c185dd91e6f439ddd5d8e0a37dc7cd">&#9670;&#160;</a></span>SetPendingBit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto Plic::SetPendingBit </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>source_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const -&gt; void</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>设置挂起位寄存器中指定中断源的状态 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source_id</td><td>中断源 ID (1-1023，0 保留) </td></tr>
    <tr><td class="paramname">value</td><td>要设置的值 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="plic_8cpp_source.html#l00118">118</a> of file <a class="el" href="plic_8cpp_source.html">plic.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  118</span>                                                                     {</div>
<div class="line"><span class="lineno">  119</span>  uint32_t word_index = source_id / 32;</div>
<div class="line"><span class="lineno">  120</span>  uint32_t bit_index = source_id % 32;</div>
<div class="line"><span class="lineno">  121</span>  uint32_t* word_addr =</div>
<div class="line"><span class="lineno">  122</span>      (uint32_t*)(<a class="code hl_variable" href="classPlic.html#a2980f6f61cd1cabc5930eaf04f17b673">base_addr_</a> + <a class="code hl_variable" href="classPlic.html#a6cd3d0321a7ce25c6fb5506c5c04d04a">kPendingBitsOffset</a> + (word_index * 4));</div>
<div class="line"><span class="lineno">  123</span>  <span class="keywordflow">if</span> (value) {</div>
<div class="line"><span class="lineno">  124</span>    *word_addr |= (1U &lt;&lt; bit_index);</div>
<div class="line"><span class="lineno">  125</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  126</span>    *word_addr &amp;= ~(1U &lt;&lt; bit_index);</div>
<div class="line"><span class="lineno">  127</span>  }</div>
<div class="line"><span class="lineno">  128</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5bae1983a5596af119d947b17b10339b" name="a5bae1983a5596af119d947b17b10339b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bae1983a5596af119d947b17b10339b">&#9670;&#160;</a></span>SourcePriority()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto Plic::SourcePriority </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>source_id</em></td><td>)</td>
          <td> const -&gt; uint32_t&amp;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>获取中断源优先级寄存器 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source_id</td><td>中断源 ID (1-1023，0 保留) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint32_t&amp; 寄存器引用 </dd></dl>

<p class="definition">Definition at line <a class="el" href="plic_8cpp_source.html#l00105">105</a> of file <a class="el" href="plic_8cpp_source.html">plic.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  105</span>                                                               {</div>
<div class="line"><span class="lineno">  106</span>  <span class="keywordflow">return</span> *(uint32_t*)(<a class="code hl_variable" href="classPlic.html#a2980f6f61cd1cabc5930eaf04f17b673">base_addr_</a> + <a class="code hl_variable" href="classPlic.html#ad98d4eb9d88e57332315a9300ab22460">kSourcePriorityOffset</a> +</div>
<div class="line"><span class="lineno">  107</span>                      (source_id * <span class="keyword">sizeof</span>(uint32_t)));</div>
<div class="line"><span class="lineno">  108</span>}</div>
<div class="ttc" id="aclassPlic_html_ad98d4eb9d88e57332315a9300ab22460"><div class="ttname"><a href="classPlic.html#ad98d4eb9d88e57332315a9300ab22460">Plic::kSourcePriorityOffset</a></div><div class="ttdeci">static constexpr uint64_t kSourcePriorityOffset</div><div class="ttdef"><b>Definition</b> <a href="plic_8h_source.html#l00097">plic.h:97</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPlic_a5bae1983a5596af119d947b17b10339b_icgraph.png" border="0" usemap="#aclassPlic_a5bae1983a5596af119d947b17b10339b_icgraph" alt=""/></div>
<map name="aclassPlic_a5bae1983a5596af119d947b17b10339b_icgraph" id="aclassPlic_a5bae1983a5596af119d947b17b10339b_icgraph">
<area shape="rect" title="获取中断源优先级寄存器" alt="" coords="129,31,273,56"/>
<area shape="rect" href="classPlic.html#a5af803e29ad50b52fbb8e51bcb4dcf36" title=" " alt="" coords="5,5,81,31"/>
<area shape="poly" title=" " alt="" coords="116,32,81,27,82,21,116,27"/>
<area shape="rect" href="classPlic.html#a658abe866472d73845205e14924cb8f9" title="设置指定中断源的使能状态" alt="" coords="6,55,81,80"/>
<area shape="poly" title=" " alt="" coords="116,59,81,64,81,59,115,54"/>
</map>
</div>

</div>
</div>
<a id="a76fe5261ee151ea8684e171cb63d0967" name="a76fe5261ee151ea8684e171cb63d0967"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76fe5261ee151ea8684e171cb63d0967">&#9670;&#160;</a></span>Which()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto Plic::Which </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const -&gt; uint32_t</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>向 <a class="el" href="classPlic.html" title="Plic 驱动">Plic</a> 询问中断 </p>
<dl class="section return"><dt>Returns</dt><dd>uint32_t 中断源 ID (1-1023) </dd></dl>

<p class="definition">Definition at line <a class="el" href="plic_8cpp_source.html#l00039">39</a> of file <a class="el" href="plic_8cpp_source.html">plic.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   39</span>                                   {</div>
<div class="line"><span class="lineno">   40</span>  <span class="keyword">auto</span> context_id = <a class="code hl_function" href="classPlic.html#acc08cea25259c0e5b03f4403960a6120">GetContextId</a>(<a class="code hl_function" href="namespacecpu__io.html#a52b8a7263a31e6670ef4dec7922d9e72">cpu_io::GetCurrentCoreId</a>());</div>
<div class="line"><span class="lineno">   41</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classPlic.html#a9e776017bdc409c93853e4c7331ec090">ClaimComplete</a>(context_id);</div>
<div class="line"><span class="lineno">   42</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classPlic_a76fe5261ee151ea8684e171cb63d0967_cgraph.png" border="0" usemap="#aclassPlic_a76fe5261ee151ea8684e171cb63d0967_cgraph" alt=""/></div>
<map name="aclassPlic_a76fe5261ee151ea8684e171cb63d0967_cgraph" id="aclassPlic_a76fe5261ee151ea8684e171cb63d0967_cgraph">
<area shape="rect" title="向 Plic 询问中断" alt="" coords="5,55,99,80"/>
<area shape="rect" href="classPlic.html#a9e776017bdc409c93853e4c7331ec090" title="获取声明/完成寄存器" alt="" coords="162,5,317,31"/>
<area shape="poly" title=" " alt="" coords="98,52,146,39,175,32,177,37,147,45,100,57"/>
<area shape="rect" href="classPlic.html#acc08cea25259c0e5b03f4403960a6120" title="计算 context ID" alt="" coords="170,55,309,80"/>
<area shape="poly" title=" " alt="" coords="99,65,156,65,156,70,99,70"/>
<area shape="rect" href="namespacecpu__io.html#a52b8a7263a31e6670ef4dec7922d9e72" title=" " alt="" coords="147,104,332,129"/>
<area shape="poly" title=" " alt="" coords="100,77,178,98,177,103,98,82"/>
<area shape="rect" href="classtest__env_1_1TestEnvironmentState.html#a562424679984595e70361b0dad2ef96d" title="获取当前线程的环境实例指针（供 Mock 层调用）" alt="" coords="380,97,643,137"/>
<area shape="poly" title=" " alt="" coords="332,114,366,114,366,119,332,119"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a2980f6f61cd1cabc5930eaf04f17b673" name="a2980f6f61cd1cabc5930eaf04f17b673"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2980f6f61cd1cabc5930eaf04f17b673">&#9670;&#160;</a></span>base_addr_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t Plic::base_addr_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="plic_8h_source.html#l00116">116</a> of file <a class="el" href="plic_8h_source.html">plic.h</a>.</p>

</div>
</div>
<a id="a3b190463443994fc9604544f2b29deb2" name="a3b190463443994fc9604544f2b29deb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b190463443994fc9604544f2b29deb2">&#9670;&#160;</a></span>context_count_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Plic::context_count_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="plic_8h_source.html#l00118">118</a> of file <a class="el" href="plic_8h_source.html">plic.h</a>.</p>

</div>
</div>
<a id="ad65a66c8c63c7d98caa484813d7b80d8" name="ad65a66c8c63c7d98caa484813d7b80d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad65a66c8c63c7d98caa484813d7b80d8">&#9670;&#160;</a></span>interrupt_handlers_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::array&lt; <a class="el" href="classPlic.html#a2e772e7f5f0ec20bad0e5d17d5f778bb">Plic::InterruptFunc</a>, <a class="el" href="classPlic.html#acc64780e2b481585674b00d7ad2e27c7">Plic::kInterruptMaxCount</a> &gt; Plic::interrupt_handlers_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>外部中断处理函数数组 </p>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright The SimpleKernel Contributors </dd></dl>

<p class="definition">Definition at line <a class="el" href="plic_8h_source.html#l00114">114</a> of file <a class="el" href="plic_8h_source.html">plic.h</a>.</p>

</div>
</div>
<a id="ab5003084e862e9e37191d3a438260a2b" name="ab5003084e862e9e37191d3a438260a2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5003084e862e9e37191d3a438260a2b">&#9670;&#160;</a></span>kClaimCompleteOffset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr uint64_t Plic::kClaimCompleteOffset = 0x4</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="plic_8h_source.html#l00105">105</a> of file <a class="el" href="plic_8h_source.html">plic.h</a>.</p>

</div>
</div>
<a id="aaf475340167020865a8a596a7ba0a352" name="aaf475340167020865a8a596a7ba0a352"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf475340167020865a8a596a7ba0a352">&#9670;&#160;</a></span>kContextOffset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr uint64_t Plic::kContextOffset = 0x200000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="plic_8h_source.html#l00100">100</a> of file <a class="el" href="plic_8h_source.html">plic.h</a>.</p>

</div>
</div>
<a id="aad93813530cd1991aa623b97dc066d68" name="aad93813530cd1991aa623b97dc066d68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad93813530cd1991aa623b97dc066d68">&#9670;&#160;</a></span>kContextSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr uint64_t Plic::kContextSize = 0x1000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="plic_8h_source.html#l00103">103</a> of file <a class="el" href="plic_8h_source.html">plic.h</a>.</p>

</div>
</div>
<a id="ac7ef374f7e31c78f27d2f22d02f582a0" name="ac7ef374f7e31c78f27d2f22d02f582a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7ef374f7e31c78f27d2f22d02f582a0">&#9670;&#160;</a></span>kEnableBitsOffset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr uint64_t Plic::kEnableBitsOffset = 0x002000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="plic_8h_source.html#l00099">99</a> of file <a class="el" href="plic_8h_source.html">plic.h</a>.</p>

</div>
</div>
<a id="a1472ac54f856c071efe3935a9e608eb9" name="a1472ac54f856c071efe3935a9e608eb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1472ac54f856c071efe3935a9e608eb9">&#9670;&#160;</a></span>kEnableSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr uint64_t Plic::kEnableSize = 0x80</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="plic_8h_source.html#l00108">108</a> of file <a class="el" href="plic_8h_source.html">plic.h</a>.</p>

</div>
</div>
<a id="acc64780e2b481585674b00d7ad2e27c7" name="acc64780e2b481585674b00d7ad2e27c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc64780e2b481585674b00d7ad2e27c7">&#9670;&#160;</a></span>kInterruptMaxCount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr size_t Plic::kInterruptMaxCount = 16</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>最大外部中断数量 </p>

<p class="definition">Definition at line <a class="el" href="plic_8h_source.html#l00111">111</a> of file <a class="el" href="plic_8h_source.html">plic.h</a>.</p>

</div>
</div>
<a id="a6cd3d0321a7ce25c6fb5506c5c04d04a" name="a6cd3d0321a7ce25c6fb5506c5c04d04a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cd3d0321a7ce25c6fb5506c5c04d04a">&#9670;&#160;</a></span>kPendingBitsOffset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr uint64_t Plic::kPendingBitsOffset = 0x001000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="plic_8h_source.html#l00098">98</a> of file <a class="el" href="plic_8h_source.html">plic.h</a>.</p>

</div>
</div>
<a id="a930c4c57c1200c2930cd5dab1cd427bf" name="a930c4c57c1200c2930cd5dab1cd427bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a930c4c57c1200c2930cd5dab1cd427bf">&#9670;&#160;</a></span>kPriorityThresholdOffset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr uint64_t Plic::kPriorityThresholdOffset = 0x0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="plic_8h_source.html#l00104">104</a> of file <a class="el" href="plic_8h_source.html">plic.h</a>.</p>

</div>
</div>
<a id="ad98d4eb9d88e57332315a9300ab22460" name="ad98d4eb9d88e57332315a9300ab22460"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad98d4eb9d88e57332315a9300ab22460">&#9670;&#160;</a></span>kSourcePriorityOffset</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr uint64_t Plic::kSourcePriorityOffset = 0x000000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="plic_8h_source.html#l00097">97</a> of file <a class="el" href="plic_8h_source.html">plic.h</a>.</p>

</div>
</div>
<a id="a0fda6a41bcf14fcabf05e844ff23befd" name="a0fda6a41bcf14fcabf05e844ff23befd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fda6a41bcf14fcabf05e844ff23befd">&#9670;&#160;</a></span>ndev_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Plic::ndev_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="plic_8h_source.html#l00117">117</a> of file <a class="el" href="plic_8h_source.html">plic.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/root/src/driver/plic/include/<a class="el" href="plic_8h_source.html">plic.h</a></li>
<li>/root/src/driver/plic/<a class="el" href="plic_8cpp_source.html">plic.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classPlic.html">Plic</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
