<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SimpleKernel: test_env::TestEnvironmentState Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SimpleKernel<span id="projectnumber">&#160;1.17.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classtest__env_1_1TestEnvironmentState.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classtest__env_1_1TestEnvironmentState-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">test_env::TestEnvironmentState Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>测试环境状态  
 <a href="classtest__env_1_1TestEnvironmentState.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="test__environment__state_8hpp_source.html">test_environment_state.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for test_env::TestEnvironmentState:</div>
<div class="dyncontent">
<div class="center"><img src="classtest__env_1_1TestEnvironmentState__coll__graph.png" border="0" usemap="#atest__env_1_1TestEnvironmentState_coll__map" alt="Collaboration graph"/></div>
<map name="atest__env_1_1TestEnvironmentState_coll__map" id="atest__env_1_1TestEnvironmentState_coll__map">
<area shape="rect" title="测试环境状态" alt="" coords="5,5,243,385"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a99eb3332e59f30a6a2220fbccc9512f1" id="r_a99eb3332e59f30a6a2220fbccc9512f1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#a99eb3332e59f30a6a2220fbccc9512f1">TestEnvironmentState</a> ()=default</td></tr>
<tr class="separator:a99eb3332e59f30a6a2220fbccc9512f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7270743a78efee1ad06be2225cb79bc5" id="r_a7270743a78efee1ad06be2225cb79bc5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#a7270743a78efee1ad06be2225cb79bc5">~TestEnvironmentState</a> ()=default</td></tr>
<tr class="separator:a7270743a78efee1ad06be2225cb79bc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24b104afd0bb31323fa97b1fb4bddc94" id="r_a24b104afd0bb31323fa97b1fb4bddc94"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#a24b104afd0bb31323fa97b1fb4bddc94">TestEnvironmentState</a> (const <a class="el" href="classtest__env_1_1TestEnvironmentState.html">TestEnvironmentState</a> &amp;)=delete</td></tr>
<tr class="separator:a24b104afd0bb31323fa97b1fb4bddc94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66882ac112cc89e973a0b8dfb535a8d5" id="r_a66882ac112cc89e973a0b8dfb535a8d5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#a66882ac112cc89e973a0b8dfb535a8d5">TestEnvironmentState</a> (<a class="el" href="classtest__env_1_1TestEnvironmentState.html">TestEnvironmentState</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a66882ac112cc89e973a0b8dfb535a8d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3c3d2ead529644120bcfda6191cd51e" id="r_ad3c3d2ead529644120bcfda6191cd51e"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#ad3c3d2ead529644120bcfda6191cd51e">operator=</a> (const <a class="el" href="classtest__env_1_1TestEnvironmentState.html">TestEnvironmentState</a> &amp;) -&gt; <a class="el" href="classtest__env_1_1TestEnvironmentState.html">TestEnvironmentState</a> &amp;=delete</td></tr>
<tr class="separator:ad3c3d2ead529644120bcfda6191cd51e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad79e695bd0e4d30249a6321e0bdf426b" id="r_ad79e695bd0e4d30249a6321e0bdf426b"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#ad79e695bd0e4d30249a6321e0bdf426b">operator=</a> (<a class="el" href="classtest__env_1_1TestEnvironmentState.html">TestEnvironmentState</a> &amp;&amp;) -&gt; <a class="el" href="classtest__env_1_1TestEnvironmentState.html">TestEnvironmentState</a> &amp;=delete</td></tr>
<tr class="separator:ad79e695bd0e4d30249a6321e0bdf426b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3daed93eb011fe37c2fd3ae5824fff1b" id="r_a3daed93eb011fe37c2fd3ae5824fff1b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#a3daed93eb011fe37c2fd3ae5824fff1b">InitializeCores</a> (size_t num_cores)</td></tr>
<tr class="memdesc:a3daed93eb011fe37c2fd3ae5824fff1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">初始化指定数量的核心  <br /></td></tr>
<tr class="separator:a3daed93eb011fe37c2fd3ae5824fff1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7642e21f2ea3c6f0800ef5ef1df437b4" id="r_a7642e21f2ea3c6f0800ef5ef1df437b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#a7642e21f2ea3c6f0800ef5ef1df437b4">ResetAllCores</a> ()</td></tr>
<tr class="memdesc:a7642e21f2ea3c6f0800ef5ef1df437b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">重置所有核心状态（中断、页表、历史记录）  <br /></td></tr>
<tr class="separator:a7642e21f2ea3c6f0800ef5ef1df437b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29e17fa71ecdf165c3c931cdba0c992d" id="r_a29e17fa71ecdf165c3c931cdba0c992d"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#a29e17fa71ecdf165c3c931cdba0c992d">GetCore</a> (size_t <a class="el" href="per__cpu_8hpp.html#af349ef2aacd2314294eac3283d14e3ca">core_id</a>) -&gt; <a class="el" href="structtest__env_1_1CoreEnvironment.html">CoreEnvironment</a> &amp;</td></tr>
<tr class="memdesc:a29e17fa71ecdf165c3c931cdba0c992d"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取指定核心的环境  <br /></td></tr>
<tr class="separator:a29e17fa71ecdf165c3c931cdba0c992d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae79c26aa70c463ea8c148c2a3cfe042" id="r_aae79c26aa70c463ea8c148c2a3cfe042"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#aae79c26aa70c463ea8c148c2a3cfe042">GetCoreCount</a> () const -&gt; size_t</td></tr>
<tr class="memdesc:aae79c26aa70c463ea8c148c2a3cfe042"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取核心数量  <br /></td></tr>
<tr class="separator:aae79c26aa70c463ea8c148c2a3cfe042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a345611d0a521ef20e5c49eeffd43342d" id="r_a345611d0a521ef20e5c49eeffd43342d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#a345611d0a521ef20e5c49eeffd43342d">BindThreadToCore</a> (std::thread::id tid, size_t <a class="el" href="per__cpu_8hpp.html#af349ef2aacd2314294eac3283d14e3ca">core_id</a>)</td></tr>
<tr class="memdesc:a345611d0a521ef20e5c49eeffd43342d"><td class="mdescLeft">&#160;</td><td class="mdescRight">将指定线程绑定到核心  <br /></td></tr>
<tr class="separator:a345611d0a521ef20e5c49eeffd43342d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9b666c0bcf57cad940062c4234eef14" id="r_aa9b666c0bcf57cad940062c4234eef14"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#aa9b666c0bcf57cad940062c4234eef14">GetCoreIdForThread</a> (std::thread::id tid) -&gt; size_t</td></tr>
<tr class="memdesc:aa9b666c0bcf57cad940062c4234eef14"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取线程对应的核心 ID  <br /></td></tr>
<tr class="separator:aa9b666c0bcf57cad940062c4234eef14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa90d41aad37ffc9ccb1b496eb95e2248" id="r_aa90d41aad37ffc9ccb1b496eb95e2248"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#aa90d41aad37ffc9ccb1b496eb95e2248">GetCurrentCoreEnv</a> () -&gt; <a class="el" href="structtest__env_1_1CoreEnvironment.html">CoreEnvironment</a> &amp;</td></tr>
<tr class="memdesc:aa90d41aad37ffc9ccb1b496eb95e2248"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取当前线程的核心环境  <br /></td></tr>
<tr class="separator:aa90d41aad37ffc9ccb1b496eb95e2248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6dd8fe044da643d6669d5573c643c4f" id="r_ad6dd8fe044da643d6669d5573c643c4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#ad6dd8fe044da643d6669d5573c643c4f">RegisterTaskContext</a> (void *context_ptr, <a class="el" href="structTaskControlBlock.html">TaskControlBlock</a> *task)</td></tr>
<tr class="memdesc:ad6dd8fe044da643d6669d5573c643c4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">注册任务上下文，建立上下文指针到任务的映射  <br /></td></tr>
<tr class="separator:ad6dd8fe044da643d6669d5573c643c4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f68b1479bd27b43c5c35f8630359fbb" id="r_a0f68b1479bd27b43c5c35f8630359fbb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#a0f68b1479bd27b43c5c35f8630359fbb">UnregisterTaskContext</a> (void *context_ptr)</td></tr>
<tr class="memdesc:a0f68b1479bd27b43c5c35f8630359fbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">注销任务上下文  <br /></td></tr>
<tr class="separator:a0f68b1479bd27b43c5c35f8630359fbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26906d7b9c8f64bcd556c325f1232582" id="r_a26906d7b9c8f64bcd556c325f1232582"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#a26906d7b9c8f64bcd556c325f1232582">FindTaskByContext</a> (void *context_ptr) -&gt; <a class="el" href="structTaskControlBlock.html">TaskControlBlock</a> *</td></tr>
<tr class="memdesc:a26906d7b9c8f64bcd556c325f1232582"><td class="mdescLeft">&#160;</td><td class="mdescRight">通过上下文指针查找任务  <br /></td></tr>
<tr class="separator:a26906d7b9c8f64bcd556c325f1232582"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a78c47c99c0ea057a7a6d039ef43c88" id="r_a6a78c47c99c0ea057a7a6d039ef43c88"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#a6a78c47c99c0ea057a7a6d039ef43c88">DumpAllCoreStates</a> () const</td></tr>
<tr class="memdesc:a6a78c47c99c0ea057a7a6d039ef43c88"><td class="mdescLeft">&#160;</td><td class="mdescRight">打印所有核心的状态信息  <br /></td></tr>
<tr class="separator:a6a78c47c99c0ea057a7a6d039ef43c88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a427f09355ea5c4df766b7f03945e905a" id="r_a427f09355ea5c4df766b7f03945e905a"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#a427f09355ea5c4df766b7f03945e905a">GetAllSwitchHistory</a> () const -&gt; std::vector&lt; <a class="el" href="structtest__env_1_1CoreEnvironment_1_1SwitchEvent.html">CoreEnvironment::SwitchEvent</a> &gt;</td></tr>
<tr class="memdesc:a427f09355ea5c4df766b7f03945e905a"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取所有核心的切换历史，按时间戳排序  <br /></td></tr>
<tr class="separator:a427f09355ea5c4df766b7f03945e905a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68313ea42aac333a30a65aa0c49d73b4" id="r_a68313ea42aac333a30a65aa0c49d73b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#a68313ea42aac333a30a65aa0c49d73b4">ClearSwitchHistory</a> ()</td></tr>
<tr class="memdesc:a68313ea42aac333a30a65aa0c49d73b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">清空所有核心的切换历史  <br /></td></tr>
<tr class="separator:a68313ea42aac333a30a65aa0c49d73b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab05dc3b7eda4beb5233d58b197c70a58" id="r_ab05dc3b7eda4beb5233d58b197c70a58"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#ab05dc3b7eda4beb5233d58b197c70a58">SetCurrentThreadEnvironment</a> ()</td></tr>
<tr class="memdesc:ab05dc3b7eda4beb5233d58b197c70a58"><td class="mdescLeft">&#160;</td><td class="mdescRight">设置当前线程的环境实例指针  <br /></td></tr>
<tr class="separator:ab05dc3b7eda4beb5233d58b197c70a58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0471b738ca17c6086d4763e96bca4378" id="r_a0471b738ca17c6086d4763e96bca4378"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#a0471b738ca17c6086d4763e96bca4378">ClearCurrentThreadEnvironment</a> ()</td></tr>
<tr class="memdesc:a0471b738ca17c6086d4763e96bca4378"><td class="mdescLeft">&#160;</td><td class="mdescRight">清除当前线程的环境实例指针  <br /></td></tr>
<tr class="separator:a0471b738ca17c6086d4763e96bca4378"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a562424679984595e70361b0dad2ef96d" id="r_a562424679984595e70361b0dad2ef96d"><td class="memItemLeft" align="right" valign="top">static auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#a562424679984595e70361b0dad2ef96d">GetCurrentThreadEnvironment</a> () -&gt; <a class="el" href="classtest__env_1_1TestEnvironmentState.html">TestEnvironmentState</a> *</td></tr>
<tr class="memdesc:a562424679984595e70361b0dad2ef96d"><td class="mdescLeft">&#160;</td><td class="mdescRight">获取当前线程的环境实例指针（供 Mock 层调用）  <br /></td></tr>
<tr class="separator:a562424679984595e70361b0dad2ef96d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae7fae7ca997c20251aaf163a46c62e37" id="r_ae7fae7ca997c20251aaf163a46c62e37"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structtest__env_1_1CoreEnvironment.html">CoreEnvironment</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a></td></tr>
<tr class="separator:ae7fae7ca997c20251aaf163a46c62e37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a315f768cc39201b72402233203f7f667" id="r_a315f768cc39201b72402233203f7f667"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; std::thread::id, size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#a315f768cc39201b72402233203f7f667">thread_to_core_map_</a></td></tr>
<tr class="separator:a315f768cc39201b72402233203f7f667"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c85810045c65712fc4899039546a8ac" id="r_a8c85810045c65712fc4899039546a8ac"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; void *, <a class="el" href="structTaskControlBlock.html">TaskControlBlock</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#a8c85810045c65712fc4899039546a8ac">context_to_task_map_</a></td></tr>
<tr class="separator:a8c85810045c65712fc4899039546a8ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79befc67182762d96731924685655670" id="r_a79befc67182762d96731924685655670"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#a79befc67182762d96731924685655670">map_mutex_</a></td></tr>
<tr class="separator:a79befc67182762d96731924685655670"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6a38a15bda51a8bda9a671f465981a3" id="r_ac6a38a15bda51a8bda9a671f465981a3"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtest__env_1_1TestEnvironmentState.html#ac6a38a15bda51a8bda9a671f465981a3">next_core_id_</a> = 0</td></tr>
<tr class="separator:ac6a38a15bda51a8bda9a671f465981a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>测试环境状态 </p>
<p>设计说明：</p><ul>
<li>每个测试 Fixture 持有自己独立的 <a class="el" href="classtest__env_1_1TestEnvironmentState.html" title="测试环境状态">TestEnvironmentState</a> 实例</li>
<li>通过线程局部指针 (thread_local) 让 Mock 层能访问当前测试的环境</li>
<li>这样既保证了测试隔离，又让 Mock 层无需显式传递环境参数</li>
</ul>
<p>工作流程：</p><ol type="1">
<li>测试 Fixture 创建 <a class="el" href="classtest__env_1_1TestEnvironmentState.html" title="测试环境状态">TestEnvironmentState</a> 实例（成员变量）</li>
<li>SetUp() 中调用 <a class="el" href="classtest__env_1_1TestEnvironmentState.html#ab05dc3b7eda4beb5233d58b197c70a58" title="设置当前线程的环境实例指针">SetCurrentThreadEnvironment()</a> 设置线程局部指针</li>
<li>Mock 层通过 <a class="el" href="classtest__env_1_1TestEnvironmentState.html#a562424679984595e70361b0dad2ef96d" title="获取当前线程的环境实例指针（供 Mock 层调用）">GetCurrentThreadEnvironment()</a> 获取当前环境</li>
<li>TearDown() 中调用 <a class="el" href="classtest__env_1_1TestEnvironmentState.html#a0471b738ca17c6086d4763e96bca4378" title="清除当前线程的环境实例指针">ClearCurrentThreadEnvironment()</a> 清理</li>
</ol>
<p>示例： </p><div class="fragment"><div class="line"><span class="keyword">class </span>MyTest : <span class="keyword">public</span> ::testing::Test {</div>
<div class="line"> <span class="keyword">protected</span>:</div>
<div class="line">  <span class="keywordtype">void</span> SetUp()<span class="keyword"> override </span>{</div>
<div class="line">    env_.InitializeCores(2);</div>
<div class="line">    env_.SetCurrentThreadEnvironment();  <span class="comment">// 关键：设置线程局部指针</span></div>
<div class="line">    env_.BindThreadToCore(std::this_thread::get_id(), 0);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordtype">void</span> TearDown()<span class="keyword"> override </span>{</div>
<div class="line">    env_.ClearCurrentThreadEnvironment();  <span class="comment">// 清理</span></div>
<div class="line">  }</div>
<div class="line">  TestEnvironmentState env_;  <span class="comment">// 每个测试独立的环境</span></div>
<div class="line">};</div>
</div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="test__environment__state_8hpp_source.html#l00086">86</a> of file <a class="el" href="test__environment__state_8hpp_source.html">test_environment_state.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a99eb3332e59f30a6a2220fbccc9512f1" name="a99eb3332e59f30a6a2220fbccc9512f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99eb3332e59f30a6a2220fbccc9512f1">&#9670;&#160;</a></span>TestEnvironmentState() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">test_env::TestEnvironmentState::TestEnvironmentState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7270743a78efee1ad06be2225cb79bc5" name="a7270743a78efee1ad06be2225cb79bc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7270743a78efee1ad06be2225cb79bc5">&#9670;&#160;</a></span>~TestEnvironmentState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">test_env::TestEnvironmentState::~TestEnvironmentState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a24b104afd0bb31323fa97b1fb4bddc94" name="a24b104afd0bb31323fa97b1fb4bddc94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24b104afd0bb31323fa97b1fb4bddc94">&#9670;&#160;</a></span>TestEnvironmentState() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">test_env::TestEnvironmentState::TestEnvironmentState </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtest__env_1_1TestEnvironmentState.html">TestEnvironmentState</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a66882ac112cc89e973a0b8dfb535a8d5" name="a66882ac112cc89e973a0b8dfb535a8d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66882ac112cc89e973a0b8dfb535a8d5">&#9670;&#160;</a></span>TestEnvironmentState() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">test_env::TestEnvironmentState::TestEnvironmentState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtest__env_1_1TestEnvironmentState.html">TestEnvironmentState</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a345611d0a521ef20e5c49eeffd43342d" name="a345611d0a521ef20e5c49eeffd43342d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a345611d0a521ef20e5c49eeffd43342d">&#9670;&#160;</a></span>BindThreadToCore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_env::TestEnvironmentState::BindThreadToCore </td>
          <td>(</td>
          <td class="paramtype">std::thread::id&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>core_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>将指定线程绑定到核心 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>线程 ID </td></tr>
    <tr><td class="paramname">core_id</td><td>核心 ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>用于多核测试，每个工作线程需要绑定到不同核心 </dd></dl>

<p class="definition">Definition at line <a class="el" href="test__environment__state_8cpp_source.html#l00066">66</a> of file <a class="el" href="test__environment__state_8cpp_source.html">test_environment_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   67</span>                                                            {</div>
<div class="line"><span class="lineno">   68</span>  std::lock_guard&lt;std::mutex&gt; lock(<a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a79befc67182762d96731924685655670">map_mutex_</a>);</div>
<div class="line"><span class="lineno">   69</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="per__cpu_8hpp.html#af349ef2aacd2314294eac3283d14e3ca">core_id</a> &gt;= <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>.size()) {</div>
<div class="line"><span class="lineno">   70</span>    <span class="keywordflow">throw</span> std::out_of_range(<span class="stringliteral">&quot;Invalid core_id: &quot;</span> + std::to_string(<a class="code hl_variable" href="per__cpu_8hpp.html#af349ef2aacd2314294eac3283d14e3ca">core_id</a>));</div>
<div class="line"><span class="lineno">   71</span>  }</div>
<div class="line"><span class="lineno">   72</span>  <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a315f768cc39201b72402233203f7f667">thread_to_core_map_</a>[tid] = <a class="code hl_variable" href="per__cpu_8hpp.html#af349ef2aacd2314294eac3283d14e3ca">core_id</a>;</div>
<div class="line"><span class="lineno">   73</span>  <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>[<a class="code hl_variable" href="per__cpu_8hpp.html#af349ef2aacd2314294eac3283d14e3ca">core_id</a>].thread_id = tid;</div>
<div class="line"><span class="lineno">   74</span>}</div>
<div class="ttc" id="aclasstest__env_1_1TestEnvironmentState_html_a315f768cc39201b72402233203f7f667"><div class="ttname"><a href="classtest__env_1_1TestEnvironmentState.html#a315f768cc39201b72402233203f7f667">test_env::TestEnvironmentState::thread_to_core_map_</a></div><div class="ttdeci">std::unordered_map&lt; std::thread::id, size_t &gt; thread_to_core_map_</div><div class="ttdef"><b>Definition</b> <a href="test__environment__state_8hpp_source.html#l00208">test_environment_state.hpp:208</a></div></div>
<div class="ttc" id="aclasstest__env_1_1TestEnvironmentState_html_a79befc67182762d96731924685655670"><div class="ttname"><a href="classtest__env_1_1TestEnvironmentState.html#a79befc67182762d96731924685655670">test_env::TestEnvironmentState::map_mutex_</a></div><div class="ttdeci">std::mutex map_mutex_</div><div class="ttdef"><b>Definition</b> <a href="test__environment__state_8hpp_source.html#l00214">test_environment_state.hpp:214</a></div></div>
<div class="ttc" id="aclasstest__env_1_1TestEnvironmentState_html_ae7fae7ca997c20251aaf163a46c62e37"><div class="ttname"><a href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">test_env::TestEnvironmentState::cores_</a></div><div class="ttdeci">std::vector&lt; CoreEnvironment &gt; cores_</div><div class="ttdef"><b>Definition</b> <a href="test__environment__state_8hpp_source.html#l00205">test_environment_state.hpp:205</a></div></div>
<div class="ttc" id="aper__cpu_8hpp_html_af349ef2aacd2314294eac3283d14e3ca"><div class="ttname"><a href="per__cpu_8hpp.html#af349ef2aacd2314294eac3283d14e3ca">core_id</a></div><div class="ttdeci">size_t core_id</div><div class="ttdoc">核心 ID</div><div class="ttdef"><b>Definition</b> <a href="per__cpu_8hpp_source.html#l00001">per_cpu.hpp:1</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtest__env_1_1TestEnvironmentState_a345611d0a521ef20e5c49eeffd43342d_icgraph.png" border="0" usemap="#aclasstest__env_1_1TestEnvironmentState_a345611d0a521ef20e5c49eeffd43342d_icgraph" alt=""/></div>
<map name="aclasstest__env_1_1TestEnvironmentState_a345611d0a521ef20e5c49eeffd43342d_icgraph" id="aclasstest__env_1_1TestEnvironmentState_a345611d0a521ef20e5c49eeffd43342d_icgraph">
<area shape="rect" title="将指定线程绑定到核心" alt="" coords="457,23,652,63"/>
<area shape="rect" href="classKernelFdtTest.html#a35a89f4028950bcc95d57a0f9f3899b4" title=" " alt="" coords="242,5,399,31"/>
<area shape="poly" title=" " alt="" coords="443,34,399,29,400,24,444,29"/>
<area shape="rect" href="classTaskTestHarness.html#a9b21a4be72464267c2d3059fa165ca6d" title=" " alt="" coords="232,55,409,80"/>
<area shape="poly" title=" " alt="" coords="444,57,410,61,409,56,444,52"/>
<area shape="rect" href="classEnvironmentLayerTest.html#a32935143b073249d83b7ed2c19079271" title=" " alt="" coords="11,15,178,55"/>
<area shape="poly" title=" " alt="" coords="218,56,178,50,179,44,219,50"/>
<area shape="rect" href="classTaskSchedulingExample.html#aaaba6b045c859716abd7f0780a0c5dda" title=" " alt="" coords="5,79,184,119"/>
<area shape="poly" title=" " alt="" coords="219,84,184,89,184,84,218,79"/>
</map>
</div>

</div>
</div>
<a id="a0471b738ca17c6086d4763e96bca4378" name="a0471b738ca17c6086d4763e96bca4378"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0471b738ca17c6086d4763e96bca4378">&#9670;&#160;</a></span>ClearCurrentThreadEnvironment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_env::TestEnvironmentState::ClearCurrentThreadEnvironment </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>清除当前线程的环境实例指针 </p>
<dl class="section note"><dt>Note</dt><dd>应在 TearDown() 中调用 </dd></dl>

<p class="definition">Definition at line <a class="el" href="test__environment__state_8cpp_source.html#l00022">22</a> of file <a class="el" href="test__environment__state_8cpp_source.html">test_environment_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   22</span>                                                         {</div>
<div class="line"><span class="lineno">   23</span>  <a class="code hl_variable" href="namespacetest__env.html#a6aeda4d3d2c083d356fcfa8e43988c7e">current_thread_env</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">   24</span>}</div>
<div class="ttc" id="anamespacetest__env_html_a6aeda4d3d2c083d356fcfa8e43988c7e"><div class="ttname"><a href="namespacetest__env.html#a6aeda4d3d2c083d356fcfa8e43988c7e">test_env::current_thread_env</a></div><div class="ttdeci">thread_local TestEnvironmentState * current_thread_env</div><div class="ttdef"><b>Definition</b> <a href="test__environment__state_8cpp_source.html#l00016">test_environment_state.cpp:16</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtest__env_1_1TestEnvironmentState_a0471b738ca17c6086d4763e96bca4378_icgraph.png" border="0" usemap="#aclasstest__env_1_1TestEnvironmentState_a0471b738ca17c6086d4763e96bca4378_icgraph" alt=""/></div>
<map name="aclasstest__env_1_1TestEnvironmentState_a0471b738ca17c6086d4763e96bca4378_icgraph" id="aclasstest__env_1_1TestEnvironmentState_a0471b738ca17c6086d4763e96bca4378_icgraph">
<area shape="rect" title="清除当前线程的环境实例指针" alt="" coords="256,23,531,63"/>
<area shape="rect" href="classKernelFdtTest.html#ac4830f8e9de1b9c480a11943659acc4b" title=" " alt="" coords="15,5,198,31"/>
<area shape="poly" title=" " alt="" coords="242,33,198,29,199,23,242,27"/>
<area shape="rect" href="classTaskTestHarness.html#a2cb71293bed79eba46bd9a86291cb4bd" title=" " alt="" coords="5,55,208,80"/>
<area shape="poly" title=" " alt="" coords="242,59,208,62,208,56,242,53"/>
</map>
</div>

</div>
</div>
<a id="a68313ea42aac333a30a65aa0c49d73b4" name="a68313ea42aac333a30a65aa0c49d73b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68313ea42aac333a30a65aa0c49d73b4">&#9670;&#160;</a></span>ClearSwitchHistory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_env::TestEnvironmentState::ClearSwitchHistory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>清空所有核心的切换历史 </p>

<p class="definition">Definition at line <a class="el" href="test__environment__state_8cpp_source.html#l00162">162</a> of file <a class="el" href="test__environment__state_8cpp_source.html">test_environment_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  162</span>                                              {</div>
<div class="line"><span class="lineno">  163</span>  std::lock_guard&lt;std::mutex&gt; lock(<a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a79befc67182762d96731924685655670">map_mutex_</a>);</div>
<div class="line"><span class="lineno">  164</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; core : <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>) {</div>
<div class="line"><span class="lineno">  165</span>    core.switch_history.clear();</div>
<div class="line"><span class="lineno">  166</span>  }</div>
<div class="line"><span class="lineno">  167</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtest__env_1_1TestEnvironmentState_a68313ea42aac333a30a65aa0c49d73b4_icgraph.png" border="0" usemap="#aclasstest__env_1_1TestEnvironmentState_a68313ea42aac333a30a65aa0c49d73b4_icgraph" alt=""/></div>
<map name="aclasstest__env_1_1TestEnvironmentState_a68313ea42aac333a30a65aa0c49d73b4_icgraph" id="aclasstest__env_1_1TestEnvironmentState_a68313ea42aac333a30a65aa0c49d73b4_icgraph">
<area shape="rect" title="清空所有核心的切换历史" alt="" coords="256,5,451,45"/>
<area shape="rect" href="classTaskTestHarness.html#a2cb71293bed79eba46bd9a86291cb4bd" title=" " alt="" coords="5,13,208,38"/>
<area shape="poly" title=" " alt="" coords="243,28,208,28,208,23,243,23"/>
</map>
</div>

</div>
</div>
<a id="a6a78c47c99c0ea057a7a6d039ef43c88" name="a6a78c47c99c0ea057a7a6d039ef43c88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a78c47c99c0ea057a7a6d039ef43c88">&#9670;&#160;</a></span>DumpAllCoreStates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_env::TestEnvironmentState::DumpAllCoreStates </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>打印所有核心的状态信息 </p>

<p class="definition">Definition at line <a class="el" href="test__environment__state_8cpp_source.html#l00127">127</a> of file <a class="el" href="test__environment__state_8cpp_source.html">test_environment_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  127</span>                                                   {</div>
<div class="line"><span class="lineno">  128</span>  std::lock_guard&lt;std::mutex&gt; lock(<a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a79befc67182762d96731924685655670">map_mutex_</a>);</div>
<div class="line"><span class="lineno">  129</span>  std::cout &lt;&lt; <span class="stringliteral">&quot;\n=== Test Environment State Dump ===&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  130</span>  std::cout &lt;&lt; <span class="stringliteral">&quot;Total cores: &quot;</span> &lt;&lt; <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>.size() &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; core : <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>) {</div>
<div class="line"><span class="lineno">  133</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;\nCore &quot;</span> &lt;&lt; core.core_id &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  134</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;  Interrupt enabled: &quot;</span> &lt;&lt; core.interrupt_enabled &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  135</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;  Page directory: 0x&quot;</span> &lt;&lt; std::hex &lt;&lt; core.page_directory</div>
<div class="line"><span class="lineno">  136</span>              &lt;&lt; std::dec &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  137</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;  Paging enabled: &quot;</span> &lt;&lt; core.paging_enabled &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  138</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;  Switch history size: &quot;</span> &lt;&lt; core.switch_history.size()</div>
<div class="line"><span class="lineno">  139</span>              &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  140</span>  }</div>
<div class="line"><span class="lineno">  141</span>  std::cout &lt;&lt; <span class="stringliteral">&quot;==================================\n&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  142</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a26906d7b9c8f64bcd556c325f1232582" name="a26906d7b9c8f64bcd556c325f1232582"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26906d7b9c8f64bcd556c325f1232582">&#9670;&#160;</a></span>FindTaskByContext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto test_env::TestEnvironmentState::FindTaskByContext </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context_ptr</em></td><td>)</td>
          <td> -&gt; <a class="el" href="structTaskControlBlock.html">TaskControlBlock</a>*</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>通过上下文指针查找任务 </p>
<dl class="section return"><dt>Returns</dt><dd>任务指针，未找到返回 nullptr </dd></dl>

<p class="definition">Definition at line <a class="el" href="test__environment__state_8cpp_source.html#l00117">117</a> of file <a class="el" href="test__environment__state_8cpp_source.html">test_environment_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  118</span>                         {</div>
<div class="line"><span class="lineno">  119</span>  std::lock_guard&lt;std::mutex&gt; lock(<a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a79befc67182762d96731924685655670">map_mutex_</a>);</div>
<div class="line"><span class="lineno">  120</span>  <span class="keyword">auto</span> it = <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a8c85810045c65712fc4899039546a8ac">context_to_task_map_</a>.find(context_ptr);</div>
<div class="line"><span class="lineno">  121</span>  <span class="keywordflow">if</span> (it != <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a8c85810045c65712fc4899039546a8ac">context_to_task_map_</a>.end()) {</div>
<div class="line"><span class="lineno">  122</span>    <span class="keywordflow">return</span> it-&gt;second;</div>
<div class="line"><span class="lineno">  123</span>  }</div>
<div class="line"><span class="lineno">  124</span>  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  125</span>}</div>
<div class="ttc" id="aclasstest__env_1_1TestEnvironmentState_html_a8c85810045c65712fc4899039546a8ac"><div class="ttname"><a href="classtest__env_1_1TestEnvironmentState.html#a8c85810045c65712fc4899039546a8ac">test_env::TestEnvironmentState::context_to_task_map_</a></div><div class="ttdeci">std::unordered_map&lt; void *, TaskControlBlock * &gt; context_to_task_map_</div><div class="ttdef"><b>Definition</b> <a href="test__environment__state_8hpp_source.html#l00211">test_environment_state.hpp:211</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a427f09355ea5c4df766b7f03945e905a" name="a427f09355ea5c4df766b7f03945e905a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a427f09355ea5c4df766b7f03945e905a">&#9670;&#160;</a></span>GetAllSwitchHistory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto test_env::TestEnvironmentState::GetAllSwitchHistory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const -&gt; std::vector&lt;<a class="el" href="structtest__env_1_1CoreEnvironment_1_1SwitchEvent.html">CoreEnvironment::SwitchEvent</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取所有核心的切换历史，按时间戳排序 </p>
<dl class="section return"><dt>Returns</dt><dd>切换事件列表 </dd></dl>

<p class="definition">Definition at line <a class="el" href="test__environment__state_8cpp_source.html#l00144">144</a> of file <a class="el" href="test__environment__state_8cpp_source.html">test_environment_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  145</span>                                             {</div>
<div class="line"><span class="lineno">  146</span>  std::lock_guard&lt;std::mutex&gt; lock(<a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a79befc67182762d96731924685655670">map_mutex_</a>);</div>
<div class="line"><span class="lineno">  147</span>  std::vector&lt;CoreEnvironment::SwitchEvent&gt; all_events;</div>
<div class="line"><span class="lineno">  148</span> </div>
<div class="line"><span class="lineno">  149</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; core : <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>) {</div>
<div class="line"><span class="lineno">  150</span>    all_events.insert(all_events.end(), core.switch_history.begin(),</div>
<div class="line"><span class="lineno">  151</span>                      core.switch_history.end());</div>
<div class="line"><span class="lineno">  152</span>  }</div>
<div class="line"><span class="lineno">  153</span> </div>
<div class="line"><span class="lineno">  154</span>  <span class="comment">// 按时间戳排序</span></div>
<div class="line"><span class="lineno">  155</span>  std::sort(</div>
<div class="line"><span class="lineno">  156</span>      all_events.begin(), all_events.end(),</div>
<div class="line"><span class="lineno">  157</span>      [](<span class="keyword">const</span> <span class="keyword">auto</span>&amp; a, <span class="keyword">const</span> <span class="keyword">auto</span>&amp; b) { return a.timestamp &lt; b.timestamp; });</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>  <span class="keywordflow">return</span> all_events;</div>
<div class="line"><span class="lineno">  160</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a29e17fa71ecdf165c3c931cdba0c992d" name="a29e17fa71ecdf165c3c931cdba0c992d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29e17fa71ecdf165c3c931cdba0c992d">&#9670;&#160;</a></span>GetCore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto test_env::TestEnvironmentState::GetCore </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>core_id</em></td><td>)</td>
          <td> -&gt; <a class="el" href="structtest__env_1_1CoreEnvironment.html">CoreEnvironment</a>&amp;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取指定核心的环境 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">core_id</td><td>核心 ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>核心环境引用 </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::out_of_range</td><td>如果 core_id 无效 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="test__environment__state_8cpp_source.html#l00053">53</a> of file <a class="el" href="test__environment__state_8cpp_source.html">test_environment_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   53</span>                                                                     {</div>
<div class="line"><span class="lineno">   54</span>  std::lock_guard&lt;std::mutex&gt; lock(<a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a79befc67182762d96731924685655670">map_mutex_</a>);</div>
<div class="line"><span class="lineno">   55</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="per__cpu_8hpp.html#af349ef2aacd2314294eac3283d14e3ca">core_id</a> &gt;= <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>.size()) {</div>
<div class="line"><span class="lineno">   56</span>    <span class="keywordflow">throw</span> std::out_of_range(<span class="stringliteral">&quot;Invalid core_id: &quot;</span> + std::to_string(<a class="code hl_variable" href="per__cpu_8hpp.html#af349ef2aacd2314294eac3283d14e3ca">core_id</a>));</div>
<div class="line"><span class="lineno">   57</span>  }</div>
<div class="line"><span class="lineno">   58</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>[<a class="code hl_variable" href="per__cpu_8hpp.html#af349ef2aacd2314294eac3283d14e3ca">core_id</a>];</div>
<div class="line"><span class="lineno">   59</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aae79c26aa70c463ea8c148c2a3cfe042" name="aae79c26aa70c463ea8c148c2a3cfe042"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae79c26aa70c463ea8c148c2a3cfe042">&#9670;&#160;</a></span>GetCoreCount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto test_env::TestEnvironmentState::GetCoreCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const -&gt; size_t</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取核心数量 </p>

<p class="definition">Definition at line <a class="el" href="test__environment__state_8cpp_source.html#l00061">61</a> of file <a class="el" href="test__environment__state_8cpp_source.html">test_environment_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   61</span>                                                        {</div>
<div class="line"><span class="lineno">   62</span>  std::lock_guard&lt;std::mutex&gt; lock(<a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a79befc67182762d96731924685655670">map_mutex_</a>);</div>
<div class="line"><span class="lineno">   63</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>.size();</div>
<div class="line"><span class="lineno">   64</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa9b666c0bcf57cad940062c4234eef14" name="aa9b666c0bcf57cad940062c4234eef14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9b666c0bcf57cad940062c4234eef14">&#9670;&#160;</a></span>GetCoreIdForThread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto test_env::TestEnvironmentState::GetCoreIdForThread </td>
          <td>(</td>
          <td class="paramtype">std::thread::id&#160;</td>
          <td class="paramname"><em>tid</em></td><td>)</td>
          <td> -&gt; size_t</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取线程对应的核心 ID </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>线程 ID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>核心 ID，如果未绑定则自动分配 </dd></dl>

<p class="definition">Definition at line <a class="el" href="test__environment__state_8cpp_source.html#l00076">76</a> of file <a class="el" href="test__environment__state_8cpp_source.html">test_environment_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   76</span>                                                                       {</div>
<div class="line"><span class="lineno">   77</span>  std::lock_guard&lt;std::mutex&gt; lock(<a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a79befc67182762d96731924685655670">map_mutex_</a>);</div>
<div class="line"><span class="lineno">   78</span>  <span class="keyword">auto</span> it = <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a315f768cc39201b72402233203f7f667">thread_to_core_map_</a>.find(tid);</div>
<div class="line"><span class="lineno">   79</span>  <span class="keywordflow">if</span> (it != <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a315f768cc39201b72402233203f7f667">thread_to_core_map_</a>.end()) {</div>
<div class="line"><span class="lineno">   80</span>    <span class="keywordflow">return</span> it-&gt;second;</div>
<div class="line"><span class="lineno">   81</span>  }</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>  <span class="comment">// 自动分配一个核心 ID (兼容旧行为)</span></div>
<div class="line"><span class="lineno">   84</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ac6a38a15bda51a8bda9a671f465981a3">next_core_id_</a> &gt;= <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>.size()) {</div>
<div class="line"><span class="lineno">   85</span>    <span class="comment">// 如果核心未初始化，默认创建单核环境</span></div>
<div class="line"><span class="lineno">   86</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>.empty()) {</div>
<div class="line"><span class="lineno">   87</span>      <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>.emplace_back(0);</div>
<div class="line"><span class="lineno">   88</span>    }</div>
<div class="line"><span class="lineno">   89</span>    <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ac6a38a15bda51a8bda9a671f465981a3">next_core_id_</a> = 0;</div>
<div class="line"><span class="lineno">   90</span>  }</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>  <span class="keywordtype">size_t</span> new_id = <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ac6a38a15bda51a8bda9a671f465981a3">next_core_id_</a>;</div>
<div class="line"><span class="lineno">   93</span>  <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a315f768cc39201b72402233203f7f667">thread_to_core_map_</a>[tid] = new_id;</div>
<div class="line"><span class="lineno">   94</span>  <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>[new_id].thread_id = tid;</div>
<div class="line"><span class="lineno">   95</span>  <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ac6a38a15bda51a8bda9a671f465981a3">next_core_id_</a> = (<a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ac6a38a15bda51a8bda9a671f465981a3">next_core_id_</a> + 1) % <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>.size();</div>
<div class="line"><span class="lineno">   96</span>  <span class="keywordflow">return</span> new_id;</div>
<div class="line"><span class="lineno">   97</span>}</div>
<div class="ttc" id="aclasstest__env_1_1TestEnvironmentState_html_ac6a38a15bda51a8bda9a671f465981a3"><div class="ttname"><a href="classtest__env_1_1TestEnvironmentState.html#ac6a38a15bda51a8bda9a671f465981a3">test_env::TestEnvironmentState::next_core_id_</a></div><div class="ttdeci">size_t next_core_id_</div><div class="ttdef"><b>Definition</b> <a href="test__environment__state_8hpp_source.html#l00217">test_environment_state.hpp:217</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa90d41aad37ffc9ccb1b496eb95e2248" name="aa90d41aad37ffc9ccb1b496eb95e2248"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa90d41aad37ffc9ccb1b496eb95e2248">&#9670;&#160;</a></span>GetCurrentCoreEnv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">auto test_env::TestEnvironmentState::GetCurrentCoreEnv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> -&gt; <a class="el" href="structtest__env_1_1CoreEnvironment.html">CoreEnvironment</a>&amp;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>获取当前线程的核心环境 </p>
<dl class="section return"><dt>Returns</dt><dd>当前线程对应的核心环境引用 </dd></dl>

<p class="definition">Definition at line <a class="el" href="test__environment__state_8cpp_source.html#l00099">99</a> of file <a class="el" href="test__environment__state_8cpp_source.html">test_environment_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   99</span>                                                                 {</div>
<div class="line"><span class="lineno">  100</span>  <span class="keyword">auto</span> tid = std::this_thread::get_id();</div>
<div class="line"><span class="lineno">  101</span>  <span class="keywordtype">size_t</span> <a class="code hl_variable" href="per__cpu_8hpp.html#af349ef2aacd2314294eac3283d14e3ca">core_id</a> = <a class="code hl_function" href="classtest__env_1_1TestEnvironmentState.html#aa9b666c0bcf57cad940062c4234eef14">GetCoreIdForThread</a>(tid);</div>
<div class="line"><span class="lineno">  102</span>  std::lock_guard&lt;std::mutex&gt; lock(<a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a79befc67182762d96731924685655670">map_mutex_</a>);</div>
<div class="line"><span class="lineno">  103</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>[<a class="code hl_variable" href="per__cpu_8hpp.html#af349ef2aacd2314294eac3283d14e3ca">core_id</a>];</div>
<div class="line"><span class="lineno">  104</span>}</div>
<div class="ttc" id="aclasstest__env_1_1TestEnvironmentState_html_aa9b666c0bcf57cad940062c4234eef14"><div class="ttname"><a href="classtest__env_1_1TestEnvironmentState.html#aa9b666c0bcf57cad940062c4234eef14">test_env::TestEnvironmentState::GetCoreIdForThread</a></div><div class="ttdeci">auto GetCoreIdForThread(std::thread::id tid) -&gt; size_t</div><div class="ttdoc">获取线程对应的核心 ID</div><div class="ttdef"><b>Definition</b> <a href="test__environment__state_8cpp_source.html#l00076">test_environment_state.cpp:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a562424679984595e70361b0dad2ef96d" name="a562424679984595e70361b0dad2ef96d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a562424679984595e70361b0dad2ef96d">&#9670;&#160;</a></span>GetCurrentThreadEnvironment()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto test_env::TestEnvironmentState::GetCurrentThreadEnvironment </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> -&gt; <a class="el" href="classtest__env_1_1TestEnvironmentState.html">TestEnvironmentState</a>*</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>获取当前线程的环境实例指针（供 Mock 层调用） </p>
<dl class="section return"><dt>Returns</dt><dd>环境指针，如果未设置则返回 nullptr</dd></dl>
<p>用法：Mock 层（cpu_io.h、arch.cpp）通过这个函数获取当前测试的环境 例如：auto* env = <a class="el" href="classtest__env_1_1TestEnvironmentState.html#a562424679984595e70361b0dad2ef96d" title="获取当前线程的环境实例指针（供 Mock 层调用）">TestEnvironmentState::GetCurrentThreadEnvironment()</a>; </p>

<p class="definition">Definition at line <a class="el" href="test__environment__state_8cpp_source.html#l00026">26</a> of file <a class="el" href="test__environment__state_8cpp_source.html">test_environment_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   27</span>                             {</div>
<div class="line"><span class="lineno">   28</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacetest__env.html#a6aeda4d3d2c083d356fcfa8e43988c7e">current_thread_env</a>;</div>
<div class="line"><span class="lineno">   29</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtest__env_1_1TestEnvironmentState_a562424679984595e70361b0dad2ef96d_icgraph.png" border="0" usemap="#aclasstest__env_1_1TestEnvironmentState_a562424679984595e70361b0dad2ef96d_icgraph" alt=""/></div>
<map name="aclasstest__env_1_1TestEnvironmentState_a562424679984595e70361b0dad2ef96d_icgraph" id="aclasstest__env_1_1TestEnvironmentState_a562424679984595e70361b0dad2ef96d_icgraph">
<area shape="rect" title="获取当前线程的环境实例指针（供 Mock 层调用）" alt="" coords="1257,589,1520,629"/>
<area shape="rect" href="namespacecpu__io.html#a6c4ee629d8129247969cace77d47fecb" title=" " alt="" coords="1025,104,1202,129"/>
<area shape="poly" title=" " alt="" coords="1382,575,1370,488,1358,432,1341,372,1318,310,1289,249,1252,193,1208,144,1189,132,1191,127,1211,140,1257,190,1294,247,1323,308,1346,370,1363,431,1375,487,1387,574"/>
<area shape="rect" href="namespacecpu__io.html#afe7f925ac3cb632ed212166712288451" title=" " alt="" coords="1027,155,1199,180"/>
<area shape="poly" title=" " alt="" coords="1366,579,1120,182,1125,179,1370,576"/>
<area shape="rect" href="namespacecpu__io_1_1virtual__memory.html#a711073bec6e8a5bdc81bc4300f2da029" title=" " alt="" coords="1025,1381,1201,1421"/>
<area shape="poly" title=" " alt="" coords="1378,643,1124,1381,1119,1380,1373,641"/>
<area shape="rect" href="namespacecpu__io.html#a52b8a7263a31e6670ef4dec7922d9e72" title=" " alt="" coords="1021,835,1206,860"/>
<area shape="poly" title=" " alt="" coords="1355,640,1131,836,1128,832,1352,636"/>
<area shape="rect" href="arch_8cpp.html#ad982abdb7f3d8729656c6b5422b2e61d" title=" " alt="" coords="533,885,617,911"/>
<area shape="poly" title=" " alt="" coords="1347,583,1279,539,1188,486,1081,435,1025,414,969,398,899,378,841,363,814,361,788,365,761,377,733,397,716,421,706,457,700,501,698,550,695,647,692,688,685,720,663,771,636,818,588,887,584,883,631,815,658,768,680,719,687,687,690,646,693,549,695,500,701,456,711,419,729,393,758,372,787,360,814,356,842,357,901,373,970,393,1027,409,1083,430,1190,481,1282,534,1350,579"/>
<area shape="rect" href="namespacecpu__io.html#aaab46268534006b116de3e112c237f7f" title=" " alt="" coords="1017,55,1209,80"/>
<area shape="poly" title=" " alt="" coords="1384,575,1374,480,1364,417,1348,349,1325,280,1295,212,1256,148,1208,93,1191,82,1194,78,1211,89,1261,145,1300,209,1330,278,1353,348,1369,416,1380,479,1389,575"/>
<area shape="rect" href="namespacecpu__io_1_1virtual__memory.html#acac13e4ce3e785b0e52dfb296d2c15b7" title=" " alt="" coords="1025,1509,1201,1549"/>
<area shape="poly" title=" " alt="" coords="1388,643,1372,819,1339,1075,1316,1208,1287,1329,1252,1429,1233,1468,1211,1498,1197,1511,1194,1506,1207,1495,1228,1466,1247,1427,1282,1327,1310,1206,1334,1075,1367,819,1382,642"/>
<area shape="rect" href="namespacecpu__io_1_1virtual__memory.html#a34641ac6c78b4598532a2d089c1357b2" title=" " alt="" coords="1025,1445,1201,1485"/>
<area shape="poly" title=" " alt="" coords="1387,643,1370,808,1335,1045,1311,1167,1283,1279,1250,1371,1231,1407,1211,1434,1197,1446,1194,1442,1207,1431,1227,1404,1245,1369,1278,1277,1306,1166,1330,1044,1364,808,1382,642"/>
<area shape="rect" href="classSpinLock.html#a1552c84e7da6f0b350fd4f4ae12a1079" title="获得锁" alt="" coords="791,104,909,129"/>
<area shape="poly" title=" " alt="" coords="1011,119,910,119,910,114,1011,114"/>
<area shape="rect" href="example__environment__test_8cpp.html#ad20bee1750db7488f1c2a296c9092ec9" title="测试中断状态控制" alt="" coords="815,5,885,31"/>
<area shape="poly" title=" " alt="" coords="1032,101,1016,94,1001,81,991,68,983,56,968,44,926,29,884,22,885,17,927,24,971,40,986,52,996,65,1004,77,1019,89,1034,97"/>
<area shape="rect" href="task__scheduling__example__test_8cpp.html#a873f10b8178330509de06bc3e4347db1" title="示例：验证中断状态在任务切换时的行为" alt="" coords="815,55,885,80"/>
<area shape="poly" title=" " alt="" coords="1031,104,884,76,885,71,1032,99"/>
<area shape="poly" title=" " alt="" coords="1033,155,909,131,910,125,1034,149"/>
<area shape="poly" title=" " alt="" coords="1027,151,1016,143,1004,130,997,117,991,91,985,67,979,55,968,44,949,33,927,26,885,20,885,15,928,20,951,28,971,40,983,52,990,65,996,90,1002,115,1008,127,1019,139,1030,146"/>
<area shape="poly" title=" " alt="" coords="1035,152,1016,143,1001,130,991,117,983,105,968,94,926,78,884,71,885,66,927,73,971,89,986,101,996,114,1004,127,1019,138,1037,148"/>
<area shape="rect" href="aarch64_2interrupt__main_8cpp.html#a660e4785391d83bb3aa43f15ae53a530" title=" " alt="" coords="525,683,624,708"/>
<area shape="poly" title=" " alt="" coords="1085,190,1033,223,970,253,934,262,900,265,841,261,814,260,787,263,760,274,733,296,712,321,701,344,696,368,696,393,698,447,695,478,685,511,661,563,634,613,587,684,583,681,629,610,657,561,680,509,689,477,693,447,691,393,691,368,696,343,707,318,729,292,758,270,786,258,813,254,841,255,900,259,933,257,968,247,1030,218,1082,186"/>
<area shape="rect" href="aarch64_2interrupt__main_8cpp.html#ac31c690eba7c84c9327f9f813d4b3fea" title=" " alt="" coords="511,305,638,331"/>
<area shape="poly" title=" " alt="" coords="1043,186,970,202,849,223,797,234,732,253,660,280,602,308,599,303,658,275,730,247,796,229,848,218,969,197,1042,180"/>
<area shape="rect" href="classSpinLock.html#aef0f49fb04aa9d32bb17158788ce8cd3" title="释放锁" alt="" coords="507,231,643,256"/>
<area shape="poly" title=" " alt="" coords="1014,173,879,182,731,202,669,217,614,233,612,228,667,211,730,197,879,177,1014,168"/>
<area shape="rect" href="tests_2system__test_2main_8cpp.html#ab85c3edfd2aada0e059dccf8d002924d" title="内核入口" alt="" coords="304,733,359,759"/>
<area shape="poly" title=" " alt="" coords="512,711,360,743,359,738,511,706"/>
<area shape="rect" href="classVirtualMemory.html#a748bc7300314ff16a55f1f6b9858a41e" title=" " alt="" coords="737,1435,963,1460"/>
<area shape="poly" title=" " alt="" coords="1013,1421,923,1437,922,1432,1012,1416"/>
<area shape="rect" href="example__environment__test_8cpp.html#af2fc3993a1c7aff8ed4fc97b18be8cbf" title="测试页表操作" alt="" coords="815,1484,885,1509"/>
<area shape="poly" title=" " alt="" coords="1032,1428,1019,1435,995,1454,986,1464,970,1474,927,1489,885,1496,884,1491,925,1484,968,1469,982,1460,992,1451,1016,1430,1030,1424"/>
<area shape="poly" title=" " alt="" coords="1106,821,1091,731,1064,599,1023,447,997,369,967,295,941,245,911,199,860,131,864,128,915,196,946,243,972,293,1002,367,1028,445,1069,598,1096,731,1111,820"/>
<area shape="poly" title=" " alt="" coords="1039,865,969,872,888,871,847,866,805,857,766,843,729,823,717,812,709,801,703,776,697,752,691,740,681,729,654,713,623,704,625,699,656,708,684,725,696,737,702,750,708,775,714,798,721,809,732,818,768,838,807,852,847,861,889,866,969,867,1038,859"/>
<area shape="poly" title=" " alt="" coords="1050,866,970,879,901,892,845,904,818,907,791,904,762,896,729,879,717,868,709,856,704,830,699,804,692,793,681,783,641,761,597,746,551,737,506,733,422,735,359,743,358,738,421,730,506,728,552,732,599,741,643,756,684,779,696,790,704,803,709,829,714,854,721,865,732,874,763,891,792,899,818,901,844,899,900,886,969,874,1049,860"/>
<area shape="rect" href="classTaskManager.html#ae97ee6101a6462300666058cc4bedd05" title="添加任务" alt="" coords="489,1087,660,1112"/>
<area shape="poly" title=" " alt="" coords="1101,874,1081,909,1051,950,1014,990,971,1024,914,1046,834,1065,661,1092,660,1087,833,1060,913,1041,968,1020,1011,987,1047,946,1076,906,1097,871"/>
<area shape="rect" href="namespaceklog.html#ac339ed4f65e6f389be0ddece9c4aaa26" title=" " alt="" coords="785,1188,915,1213"/>
<area shape="poly" title=" " alt="" coords="1111,874,1098,935,1072,1015,1054,1057,1031,1099,1004,1137,971,1171,945,1187,916,1197,914,1192,943,1182,968,1167,1000,1134,1027,1096,1049,1055,1067,1013,1093,934,1106,873"/>
<area shape="rect" href="classPlic.html#ae6016013e7b9882159750769241b01e1" title="告知 Plic 已经处理了当前 IRQ" alt="" coords="807,1237,893,1263"/>
<area shape="poly" title=" " alt="" coords="1113,874,1104,945,1081,1041,1063,1091,1039,1141,1009,1187,971,1227,953,1238,934,1246,894,1253,893,1248,932,1241,951,1234,968,1223,1005,1184,1034,1138,1058,1089,1076,1039,1099,944,1108,873"/>
<area shape="rect" href="namespaceper__cpu.html#ad9745465fefcd58504031bfcfcc1c13f" title=" " alt="" coords="759,936,941,961"/>
<area shape="poly" title=" " alt="" coords="1078,869,1028,894,970,919,907,939,906,933,968,914,1025,890,1076,864"/>
<area shape="rect" href="classTaskManager.html#aa997c36c40d00f38722808ab8db70f36" title="初始化 per cpu 的调度数据，创建 idle 线程" alt="" coords="467,1136,682,1161"/>
<area shape="poly" title=" " alt="" coords="1107,874,1089,920,1061,978,1022,1035,998,1061,971,1083,929,1097,854,1112,675,1139,674,1133,853,1106,928,1092,968,1078,994,1057,1018,1032,1057,975,1084,918,1102,872"/>
<area shape="rect" href="classTaskManager.html#a4c1b1e56864ca791fe96710270acfc11" title="获取当前核心的调度数据" alt="" coords="469,1283,681,1323"/>
<area shape="poly" title=" " alt="" coords="1110,874,1095,929,1069,1000,1051,1037,1028,1073,1002,1105,971,1133,939,1152,910,1162,882,1164,854,1163,797,1161,766,1166,732,1178,691,1202,653,1230,596,1285,592,1281,649,1226,688,1197,730,1173,765,1160,797,1156,854,1158,882,1159,909,1156,937,1148,968,1129,998,1102,1024,1070,1046,1034,1064,998,1090,928,1104,873"/>
<area shape="rect" href="classGic_1_1Gicr.html#a96fdabe7194b6df5d1a465b6dcca6eab" title=" " alt="" coords="795,1287,905,1312"/>
<area shape="poly" title=" " alt="" coords="1114,874,1108,953,1100,1005,1088,1062,1070,1120,1045,1177,1013,1230,971,1276,940,1294,906,1302,905,1296,938,1289,968,1272,1008,1227,1040,1175,1065,1118,1083,1060,1095,1004,1103,952,1109,873"/>
<area shape="rect" href="classApic.html#a02c227a2528fb3a8c7b00a2dc3b516ff" title="初始化当前 CPU 的 Local APIC" alt="" coords="743,1336,957,1361"/>
<area shape="poly" title=" " alt="" coords="1115,874,1112,961,1106,1019,1094,1083,1076,1149,1051,1213,1016,1273,971,1325,953,1338,950,1334,968,1321,1012,1270,1046,1211,1071,1147,1089,1082,1100,1018,1107,961,1110,874"/>
<area shape="rect" href="classInterrupt.html#a736dd658be198f3dc94db0f876fb2499" title=" " alt="" coords="779,1385,921,1411"/>
<area shape="poly" title=" " alt="" coords="1111,874,1094,983,1065,1133,1045,1210,1023,1279,999,1336,971,1375,948,1390,922,1398,921,1393,946,1385,967,1371,994,1333,1018,1277,1040,1208,1059,1132,1089,982,1106,873"/>
<area shape="rect" href="classSpinLock.html#a1d44719e4d83977dd51f200b3a19cefc" title="检查当前 core 是否获得此锁" alt="" coords="731,307,969,332"/>
<area shape="poly" title=" " alt="" coords="1107,821,1097,742,1073,632,1055,571,1032,510,1003,451,967,397,948,377,926,360,881,335,884,330,929,355,952,373,971,394,1007,448,1037,508,1060,569,1079,631,1102,741,1113,820"/>
<area shape="rect" href="structklog_1_1detail_1_1LogBase.html#aff6da3194227678f1d1c85bb9e05efcb" title=" " alt="" coords="771,522,929,562"/>
<area shape="poly" title=" " alt="" coords="1103,822,1088,769,1061,703,1021,634,996,603,968,576,949,564,928,556,930,551,952,560,971,572,1000,600,1026,631,1065,701,1093,768,1108,820"/>
<area shape="rect" href="classklog_1_1detail_1_1Logger.html#aa72557f28dfdc2479aee0f6b562155be" title="输出格式化内容" alt="" coords="777,458,923,498"/>
<area shape="poly" title=" " alt="" coords="1106,822,1094,758,1070,675,1051,630,1029,587,1001,547,968,512,947,498,923,489,925,484,949,494,971,508,1005,543,1033,584,1056,628,1075,673,1099,757,1111,821"/>
<area shape="rect" href="classGic_1_1Gicr.html#a73bf402c370116a4f8e7773a3093f86b" title=" " alt="" coords="788,636,912,661"/>
<area shape="poly" title=" " alt="" coords="1097,823,1076,789,1047,748,1011,708,968,675,941,663,912,656,913,650,943,658,971,670,1014,704,1051,745,1080,786,1101,821"/>
<area shape="rect" href="system__test_2spinlock__test_8cpp.html#ac61fbc90ca3cf0de62dcaa7fcfed07e0" title=" " alt="" coords="796,685,904,711"/>
<area shape="poly" title=" " alt="" coords="1091,826,1039,774,1005,747,968,724,936,713,904,705,905,700,938,707,970,720,1008,742,1043,770,1095,822"/>
<area shape="rect" href="classApic.html#ade18168e69461b8ee4c8d34d91091b58" title="唤醒所有应用处理器 (AP)" alt="" coords="777,735,923,760"/>
<area shape="poly" title=" " alt="" coords="1080,830,1029,801,968,774,923,761,924,756,970,769,1031,796,1082,825"/>
<area shape="rect" href="example__environment__test_8cpp.html#a2059e986e97c7baa691137681fe57245" title="测试 CoreId 获取" alt="" coords="815,985,885,1011"/>
<area shape="poly" title=" " alt="" coords="1094,873,1042,925,1008,952,970,975,927,990,885,998,884,993,926,985,968,970,1005,948,1039,921,1091,869"/>
<area shape="rect" href="aarch64_2timer_8cpp.html#a8febf243f0581d61474fd6b56cfdb544" title=" " alt="" coords="809,784,891,809"/>
<area shape="poly" title=" " alt="" coords="1032,835,890,807,891,802,1033,829"/>
<area shape="rect" href="aarch64_2timer_8cpp.html#a85b082ebd75de9086c93c05ad124fc8c" title=" " alt="" coords="795,408,905,433"/>
<area shape="poly" title=" " alt="" coords="1108,821,1101,746,1079,645,1061,591,1037,538,1006,490,968,448,938,431,905,424,906,418,940,426,971,444,1011,487,1042,536,1066,589,1084,644,1106,746,1114,820"/>
<area shape="rect" href="classPlic.html#a76fe5261ee151ea8684e171cb63d0967" title="向 Plic 询问中断" alt="" coords="803,587,897,612"/>
<area shape="poly" title=" " alt="" coords="1101,823,1083,779,1055,725,1017,671,994,646,968,626,933,610,897,603,898,598,935,605,971,621,997,642,1021,667,1060,722,1088,777,1106,821"/>
<area shape="rect" href="classTaskManager.html#a101df6fadedb6dd4f93ee1a1e24550c2" title="克隆当前任务 (fork/clone 系统调用)" alt="" coords="255,1189,408,1215"/>
<area shape="poly" title=" " alt="" coords="482,1119,468,1126,454,1136,444,1148,435,1160,420,1172,379,1192,377,1187,417,1168,431,1156,440,1144,450,1132,465,1121,479,1114"/>
<area shape="poly" title=" " alt="" coords="753,933,729,919,711,896,704,873,698,851,681,831,656,817,620,804,528,781,359,752,359,747,529,775,621,798,658,812,684,827,703,849,709,872,716,894,732,915,756,929"/>
<area shape="poly" title=" " alt="" coords="747,965,732,975,721,986,715,998,709,1024,703,1050,696,1063,684,1076,662,1089,659,1085,681,1072,692,1060,698,1048,704,1023,710,996,717,983,729,971,745,961"/>
<area shape="rect" href="classTaskManager.html#a926010fadc0b0d1f1df608c59d4a57a0" title="获取当前任务" alt="" coords="467,1037,683,1063"/>
<area shape="poly" title=" " alt="" coords="747,968,732,975,718,985,709,997,699,1009,684,1020,637,1040,635,1035,681,1016,695,1005,704,993,714,981,729,970,744,964"/>
<area shape="rect" href="classTaskManager.html#af7525954e852c09c1dd8ba50235f1d78" title="调度函数 选择下一个任务并切换上下文" alt="" coords="244,1037,419,1063"/>
<area shape="poly" title=" " alt="" coords="771,967,398,1040,397,1035,770,961"/>
<area shape="poly" title=" " alt="" coords="747,964,732,975,718,992,711,1010,709,1048,707,1087,700,1106,684,1125,666,1138,663,1134,681,1121,695,1104,702,1086,704,1048,706,1009,713,989,729,971,744,960"/>
<area shape="poly" title=" " alt="" coords="766,936,616,908,617,903,767,931"/>
<area shape="rect" href="task__scheduling__example__test_8cpp.html#ad287521df6cc3daaa5fb96ea8afcfd38" title="示例：验证多次切换的历史记录" alt="" coords="297,787,366,812"/>
<area shape="poly" title=" " alt="" coords="766,934,729,919,714,908,705,896,696,885,681,875,620,854,532,834,366,807,367,801,533,829,621,849,684,870,699,881,709,893,718,904,732,914,768,929"/>
<area shape="rect" href="task__scheduling__example__test_8cpp.html#aff367fc7a0b493d3bba6057fce1a57eb" title="示例：验证 switch_to 记录切换历史" alt="" coords="297,885,366,911"/>
<area shape="poly" title=" " alt="" coords="745,947,612,939,466,925,366,908,367,902,467,919,612,933,745,942"/>
<area shape="poly" title=" " alt="" coords="475,1072,468,1076,457,1087,451,1098,444,1122,438,1147,420,1172,387,1192,384,1187,417,1168,433,1145,439,1120,446,1096,453,1084,465,1072,472,1067"/>
<area shape="rect" href="classTaskManager.html#a71763ebababa9aa90bad6a07c66edede" title="阻塞当前任务" alt="" coords="25,1039,177,1064"/>
<area shape="poly" title=" " alt="" coords="497,1038,418,1027,331,1022,244,1027,157,1041,156,1036,244,1022,331,1017,419,1022,497,1032"/>
<area shape="rect" href="classTaskManager.html#ae3444c55ab7b6ec348a56b596229fc0f" title="退出当前线程" alt="" coords="30,1265,171,1291"/>
<area shape="poly" title=" " alt="" coords="494,1069,468,1076,420,1099,331,1137,293,1154,245,1179,174,1226,120,1267,116,1263,171,1222,243,1174,290,1149,329,1132,418,1094,466,1072,492,1064"/>
<area shape="poly" title=" " alt="" coords="453,1053,419,1053,419,1047,453,1047"/>
<area shape="rect" href="classTaskManager.html#a86fe8ff01e353a0acb150c90e8081811" title="线程睡眠" alt="" coords="25,1088,177,1113"/>
<area shape="poly" title=" " alt="" coords="485,1067,419,1077,177,1098,177,1093,418,1071,485,1062"/>
<area shape="rect" href="classTaskManager.html#aa1041f9ed06a9d0b6b738621c30e1921" title="更新系统 tick" alt="" coords="5,989,196,1015"/>
<area shape="poly" title=" " alt="" coords="526,1035,475,1019,418,1007,303,998,196,999,196,993,303,993,419,1002,476,1014,528,1030"/>
<area shape="poly" title=" " alt="" coords="230,1053,177,1054,177,1048,230,1048"/>
<area shape="poly" title=" " alt="" coords="308,1074,246,1135,116,1267,112,1263,242,1131,305,1070"/>
<area shape="poly" title=" " alt="" coords="260,1068,160,1091,159,1085,258,1063"/>
<area shape="poly" title=" " alt="" coords="256,1037,162,1017,163,1012,257,1032"/>
<area shape="poly" title=" " alt="" coords="543,920,354,1039,351,1035,540,916"/>
<area shape="rect" href="task__scheduling__example__test_8cpp.html#ae2476f4138ea3da243c4248b722039c5" title="示例：清空切换历史" alt="" coords="297,836,366,861"/>
<area shape="poly" title=" " alt="" coords="519,890,366,858,367,853,520,884"/>
<area shape="poly" title=" " alt="" coords="518,889,465,868,450,857,441,846,431,836,417,826,392,815,366,808,367,802,393,810,420,821,435,832,445,843,454,853,468,864,520,884"/>
<area shape="poly" title=" " alt="" coords="519,901,366,901,366,895,519,895"/>
<area shape="poly" title=" " alt="" coords="455,1309,392,1307,330,1301,278,1290,257,1283,242,1273,223,1250,214,1225,213,1200,216,1175,218,1150,218,1125,211,1101,194,1077,175,1064,178,1060,198,1073,216,1098,223,1124,224,1150,221,1175,218,1200,219,1224,227,1247,246,1269,260,1278,279,1285,331,1296,392,1301,455,1303"/>
<area shape="poly" title=" " alt="" coords="550,1336,494,1388,459,1413,420,1431,371,1447,331,1453,290,1448,243,1431,218,1418,195,1401,156,1362,126,1323,107,1292,111,1290,130,1320,160,1359,199,1397,221,1413,245,1426,292,1443,331,1447,370,1441,418,1426,456,1408,491,1384,546,1332"/>
<area shape="poly" title=" " alt="" coords="543,1275,343,1065,347,1061,547,1271"/>
<area shape="poly" title=" " alt="" coords="505,1330,446,1344,378,1351,343,1351,309,1347,275,1338,242,1324,184,1236,108,1115,112,1112,188,1233,246,1320,276,1333,310,1342,344,1346,378,1346,445,1339,504,1325"/>
<area shape="poly" title=" " alt="" coords="463,1283,321,1251,268,1238,242,1228,224,1203,216,1177,215,1151,217,1126,220,1101,219,1076,211,1052,194,1028,179,1017,183,1013,198,1024,216,1049,224,1075,225,1101,222,1126,220,1152,221,1176,228,1200,246,1224,269,1233,323,1246,464,1278"/>
<area shape="rect" href="classTaskManager.html#aecc6edadfbd8fd250db72884b1e23f93" title="唤醒等待指定资源的所有任务" alt="" coords="248,1392,415,1417"/>
<area shape="poly" title=" " alt="" coords="519,1332,420,1375,369,1394,367,1389,418,1370,517,1327"/>
<area shape="poly" title=" " alt="" coords="276,1390,243,1375,171,1332,117,1293,120,1289,174,1328,245,1370,278,1385"/>
<area shape="poly" title=" " alt="" coords="789,306,621,259,623,254,791,300"/>
<area shape="rect" href="classklog_1_1detail_1_1Logger.html#a3de4bf1007d11182d4567a7470638826" title=" " alt="" coords="501,458,648,498"/>
<area shape="poly" title=" " alt="" coords="763,481,648,481,648,475,763,475"/>
<area shape="poly" title=" " alt="" coords="795,794,762,786,729,774,714,763,704,751,695,740,681,730,653,717,623,707,625,702,655,712,684,725,699,736,709,748,718,759,732,769,764,781,796,789"/>
<area shape="poly" title=" " alt="" coords="801,406,609,333,611,328,803,401"/>
<area shape="poly" title=" " alt="" coords="1032,85,910,108,909,103,1031,80"/>
<area shape="poly" title=" " alt="" coords="1031,55,884,27,885,22,1032,49"/>
<area shape="poly" title=" " alt="" coords="1003,70,885,70,885,65,1003,65"/>
<area shape="poly" title=" " alt="" coords="1011,1519,885,1503,885,1498,1012,1514"/>
<area shape="rect" href="task__scheduling__example__test_8cpp.html#ad57feef7ddcebadba347cf382681beda" title="示例：验证页表切换" alt="" coords="815,1533,885,1559"/>
<area shape="poly" title=" " alt="" coords="1012,1538,885,1546,885,1541,1011,1533"/>
<area shape="poly" title=" " alt="" coords="1012,1461,963,1457,963,1452,1012,1455"/>
<area shape="poly" title=" " alt="" coords="1012,1480,885,1495,885,1490,1011,1474"/>
<area shape="poly" title=" " alt="" coords="1036,1492,1018,1499,995,1512,970,1524,926,1537,886,1544,885,1539,925,1532,968,1520,992,1508,1016,1494,1034,1487"/>
</map>
</div>

</div>
</div>
<a id="a3daed93eb011fe37c2fd3ae5824fff1b" name="a3daed93eb011fe37c2fd3ae5824fff1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3daed93eb011fe37c2fd3ae5824fff1b">&#9670;&#160;</a></span>InitializeCores()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_env::TestEnvironmentState::InitializeCores </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_cores</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>初始化指定数量的核心 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num_cores</td><td>核心数量 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>通常在 SetUp() 中调用 </dd></dl>

<p class="definition">Definition at line <a class="el" href="test__environment__state_8cpp_source.html#l00031">31</a> of file <a class="el" href="test__environment__state_8cpp_source.html">test_environment_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   31</span>                                                           {</div>
<div class="line"><span class="lineno">   32</span>  std::lock_guard&lt;std::mutex&gt; lock(<a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a79befc67182762d96731924685655670">map_mutex_</a>);</div>
<div class="line"><span class="lineno">   33</span>  <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>.clear();</div>
<div class="line"><span class="lineno">   34</span>  <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>.reserve(num_cores);</div>
<div class="line"><span class="lineno">   35</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; num_cores; ++i) {</div>
<div class="line"><span class="lineno">   36</span>    <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>.emplace_back(i);</div>
<div class="line"><span class="lineno">   37</span>  }</div>
<div class="line"><span class="lineno">   38</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtest__env_1_1TestEnvironmentState_a3daed93eb011fe37c2fd3ae5824fff1b_icgraph.png" border="0" usemap="#aclasstest__env_1_1TestEnvironmentState_a3daed93eb011fe37c2fd3ae5824fff1b_icgraph" alt=""/></div>
<map name="aclasstest__env_1_1TestEnvironmentState_a3daed93eb011fe37c2fd3ae5824fff1b_icgraph" id="aclasstest__env_1_1TestEnvironmentState_a3daed93eb011fe37c2fd3ae5824fff1b_icgraph">
<area shape="rect" title="初始化指定数量的核心" alt="" coords="457,23,652,63"/>
<area shape="rect" href="classKernelFdtTest.html#a35a89f4028950bcc95d57a0f9f3899b4" title=" " alt="" coords="242,5,399,31"/>
<area shape="poly" title=" " alt="" coords="443,34,399,29,400,24,444,29"/>
<area shape="rect" href="classTaskTestHarness.html#a9b21a4be72464267c2d3059fa165ca6d" title=" " alt="" coords="232,55,409,80"/>
<area shape="poly" title=" " alt="" coords="444,57,410,61,409,56,444,52"/>
<area shape="rect" href="classEnvironmentLayerTest.html#a32935143b073249d83b7ed2c19079271" title=" " alt="" coords="11,15,178,55"/>
<area shape="poly" title=" " alt="" coords="218,56,178,50,179,44,219,50"/>
<area shape="rect" href="classTaskSchedulingExample.html#aaaba6b045c859716abd7f0780a0c5dda" title=" " alt="" coords="5,79,184,119"/>
<area shape="poly" title=" " alt="" coords="219,84,184,89,184,84,218,79"/>
</map>
</div>

</div>
</div>
<a id="ad3c3d2ead529644120bcfda6191cd51e" name="ad3c3d2ead529644120bcfda6191cd51e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3c3d2ead529644120bcfda6191cd51e">&#9670;&#160;</a></span>operator=() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto test_env::TestEnvironmentState::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtest__env_1_1TestEnvironmentState.html">TestEnvironmentState</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> -&gt;  <a class="el" href="classtest__env_1_1TestEnvironmentState.html">TestEnvironmentState</a> &amp;=delete</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad79e695bd0e4d30249a6321e0bdf426b" name="ad79e695bd0e4d30249a6321e0bdf426b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad79e695bd0e4d30249a6321e0bdf426b">&#9670;&#160;</a></span>operator=() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto test_env::TestEnvironmentState::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtest__env_1_1TestEnvironmentState.html">TestEnvironmentState</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> -&gt;  <a class="el" href="classtest__env_1_1TestEnvironmentState.html">TestEnvironmentState</a> &amp;=delete</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad6dd8fe044da643d6669d5573c643c4f" name="ad6dd8fe044da643d6669d5573c643c4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6dd8fe044da643d6669d5573c643c4f">&#9670;&#160;</a></span>RegisterTaskContext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_env::TestEnvironmentState::RegisterTaskContext </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTaskControlBlock.html">TaskControlBlock</a> *&#160;</td>
          <td class="paramname"><em>task</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>注册任务上下文，建立上下文指针到任务的映射 </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context_ptr</td><td>任务的上下文指针（&amp;task.task_context） </td></tr>
    <tr><td class="paramname">task</td><td>任务指针 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>switch_to 需要通过上下文指针找到对应任务 </dd></dl>

<p class="definition">Definition at line <a class="el" href="test__environment__state_8cpp_source.html#l00106">106</a> of file <a class="el" href="test__environment__state_8cpp_source.html">test_environment_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  107</span>                                                                       {</div>
<div class="line"><span class="lineno">  108</span>  std::lock_guard&lt;std::mutex&gt; lock(<a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a79befc67182762d96731924685655670">map_mutex_</a>);</div>
<div class="line"><span class="lineno">  109</span>  <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a8c85810045c65712fc4899039546a8ac">context_to_task_map_</a>[context_ptr] = task;</div>
<div class="line"><span class="lineno">  110</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7642e21f2ea3c6f0800ef5ef1df437b4" name="a7642e21f2ea3c6f0800ef5ef1df437b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7642e21f2ea3c6f0800ef5ef1df437b4">&#9670;&#160;</a></span>ResetAllCores()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_env::TestEnvironmentState::ResetAllCores </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>重置所有核心状态（中断、页表、历史记录） </p>
<dl class="section note"><dt>Note</dt><dd>不会改变核心数量，只重置状态 </dd></dl>

<p class="definition">Definition at line <a class="el" href="test__environment__state_8cpp_source.html#l00040">40</a> of file <a class="el" href="test__environment__state_8cpp_source.html">test_environment_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   40</span>                                         {</div>
<div class="line"><span class="lineno">   41</span>  std::lock_guard&lt;std::mutex&gt; lock(<a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a79befc67182762d96731924685655670">map_mutex_</a>);</div>
<div class="line"><span class="lineno">   42</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; core : <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ae7fae7ca997c20251aaf163a46c62e37">cores_</a>) {</div>
<div class="line"><span class="lineno">   43</span>    core.interrupt_enabled = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   44</span>    core.page_directory = 0;</div>
<div class="line"><span class="lineno">   45</span>    core.paging_enabled = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   46</span>    core.switch_history.clear();</div>
<div class="line"><span class="lineno">   47</span>  }</div>
<div class="line"><span class="lineno">   48</span>  <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a315f768cc39201b72402233203f7f667">thread_to_core_map_</a>.clear();</div>
<div class="line"><span class="lineno">   49</span>  <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a8c85810045c65712fc4899039546a8ac">context_to_task_map_</a>.clear();</div>
<div class="line"><span class="lineno">   50</span>  <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#ac6a38a15bda51a8bda9a671f465981a3">next_core_id_</a> = 0;</div>
<div class="line"><span class="lineno">   51</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab05dc3b7eda4beb5233d58b197c70a58" name="ab05dc3b7eda4beb5233d58b197c70a58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab05dc3b7eda4beb5233d58b197c70a58">&#9670;&#160;</a></span>SetCurrentThreadEnvironment()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_env::TestEnvironmentState::SetCurrentThreadEnvironment </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>设置当前线程的环境实例指针 </p>
<dl class="section note"><dt>Note</dt><dd>必须在 SetUp() 中调用，让 Mock 层能访问这个环境</dd></dl>
<p>原理：设置一个 thread_local 指针指向 this 效果：同一线程中，Mock 层可以通过 <a class="el" href="classtest__env_1_1TestEnvironmentState.html#a562424679984595e70361b0dad2ef96d" title="获取当前线程的环境实例指针（供 Mock 层调用）">GetCurrentThreadEnvironment()</a> 获取这个环境 </p>

<p class="definition">Definition at line <a class="el" href="test__environment__state_8cpp_source.html#l00018">18</a> of file <a class="el" href="test__environment__state_8cpp_source.html">test_environment_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   18</span>                                                       {</div>
<div class="line"><span class="lineno">   19</span>  <a class="code hl_variable" href="namespacetest__env.html#a6aeda4d3d2c083d356fcfa8e43988c7e">current_thread_env</a> = <span class="keyword">this</span>;</div>
<div class="line"><span class="lineno">   20</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classtest__env_1_1TestEnvironmentState_ab05dc3b7eda4beb5233d58b197c70a58_icgraph.png" border="0" usemap="#aclasstest__env_1_1TestEnvironmentState_ab05dc3b7eda4beb5233d58b197c70a58_icgraph" alt=""/></div>
<map name="aclasstest__env_1_1TestEnvironmentState_ab05dc3b7eda4beb5233d58b197c70a58_icgraph" id="aclasstest__env_1_1TestEnvironmentState_ab05dc3b7eda4beb5233d58b197c70a58_icgraph">
<area shape="rect" title="设置当前线程的环境实例指针" alt="" coords="457,23,719,63"/>
<area shape="rect" href="classKernelFdtTest.html#a35a89f4028950bcc95d57a0f9f3899b4" title=" " alt="" coords="242,5,399,31"/>
<area shape="poly" title=" " alt="" coords="443,32,399,28,400,23,444,27"/>
<area shape="rect" href="classTaskTestHarness.html#a9b21a4be72464267c2d3059fa165ca6d" title=" " alt="" coords="232,55,409,80"/>
<area shape="poly" title=" " alt="" coords="444,59,410,62,409,57,443,54"/>
<area shape="rect" href="classEnvironmentLayerTest.html#a32935143b073249d83b7ed2c19079271" title=" " alt="" coords="11,15,178,55"/>
<area shape="poly" title=" " alt="" coords="218,56,178,50,179,44,219,50"/>
<area shape="rect" href="classTaskSchedulingExample.html#aaaba6b045c859716abd7f0780a0c5dda" title=" " alt="" coords="5,79,184,119"/>
<area shape="poly" title=" " alt="" coords="219,84,184,89,184,84,218,79"/>
</map>
</div>

</div>
</div>
<a id="a0f68b1479bd27b43c5c35f8630359fbb" name="a0f68b1479bd27b43c5c35f8630359fbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f68b1479bd27b43c5c35f8630359fbb">&#9670;&#160;</a></span>UnregisterTaskContext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void test_env::TestEnvironmentState::UnregisterTaskContext </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>注销任务上下文 </p>

<p class="definition">Definition at line <a class="el" href="test__environment__state_8cpp_source.html#l00112">112</a> of file <a class="el" href="test__environment__state_8cpp_source.html">test_environment_state.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  112</span>                                                                  {</div>
<div class="line"><span class="lineno">  113</span>  std::lock_guard&lt;std::mutex&gt; lock(<a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a79befc67182762d96731924685655670">map_mutex_</a>);</div>
<div class="line"><span class="lineno">  114</span>  <a class="code hl_variable" href="classtest__env_1_1TestEnvironmentState.html#a8c85810045c65712fc4899039546a8ac">context_to_task_map_</a>.erase(context_ptr);</div>
<div class="line"><span class="lineno">  115</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a8c85810045c65712fc4899039546a8ac" name="a8c85810045c65712fc4899039546a8ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c85810045c65712fc4899039546a8ac">&#9670;&#160;</a></span>context_to_task_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;void*, <a class="el" href="structTaskControlBlock.html">TaskControlBlock</a>*&gt; test_env::TestEnvironmentState::context_to_task_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test__environment__state_8hpp_source.html#l00211">211</a> of file <a class="el" href="test__environment__state_8hpp_source.html">test_environment_state.hpp</a>.</p>

</div>
</div>
<a id="ae7fae7ca997c20251aaf163a46c62e37" name="ae7fae7ca997c20251aaf163a46c62e37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7fae7ca997c20251aaf163a46c62e37">&#9670;&#160;</a></span>cores_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structtest__env_1_1CoreEnvironment.html">CoreEnvironment</a>&gt; test_env::TestEnvironmentState::cores_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test__environment__state_8hpp_source.html#l00205">205</a> of file <a class="el" href="test__environment__state_8hpp_source.html">test_environment_state.hpp</a>.</p>

</div>
</div>
<a id="a79befc67182762d96731924685655670" name="a79befc67182762d96731924685655670"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79befc67182762d96731924685655670">&#9670;&#160;</a></span>map_mutex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex test_env::TestEnvironmentState::map_mutex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test__environment__state_8hpp_source.html#l00214">214</a> of file <a class="el" href="test__environment__state_8hpp_source.html">test_environment_state.hpp</a>.</p>

</div>
</div>
<a id="ac6a38a15bda51a8bda9a671f465981a3" name="ac6a38a15bda51a8bda9a671f465981a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6a38a15bda51a8bda9a671f465981a3">&#9670;&#160;</a></span>next_core_id_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t test_env::TestEnvironmentState::next_core_id_ = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test__environment__state_8hpp_source.html#l00217">217</a> of file <a class="el" href="test__environment__state_8hpp_source.html">test_environment_state.hpp</a>.</p>

</div>
</div>
<a id="a315f768cc39201b72402233203f7f667" name="a315f768cc39201b72402233203f7f667"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a315f768cc39201b72402233203f7f667">&#9670;&#160;</a></span>thread_to_core_map_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;std::thread::id, size_t&gt; test_env::TestEnvironmentState::thread_to_core_map_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="test__environment__state_8hpp_source.html#l00208">208</a> of file <a class="el" href="test__environment__state_8hpp_source.html">test_environment_state.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/root/tests/unit_test/mocks/<a class="el" href="test__environment__state_8hpp_source.html">test_environment_state.hpp</a></li>
<li>/root/tests/unit_test/mocks/<a class="el" href="test__environment__state_8cpp_source.html">test_environment_state.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacetest__env.html">test_env</a></li><li class="navelem"><a class="el" href="classtest__env_1_1TestEnvironmentState.html">TestEnvironmentState</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
