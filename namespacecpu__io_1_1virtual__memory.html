<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SimpleKernel: cpu_io::virtual_memory Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SimpleKernel<span id="projectnumber">&#160;1.17.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespacecpu__io_1_1virtual__memory.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">cpu_io::virtual_memory Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af2bed9d8a049c2d40634b15b8e3adca9" id="r_af2bed9d8a049c2d40634b15b8e3adca9"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#af2bed9d8a049c2d40634b15b8e3adca9">GetUserPagePermissions</a> (bool readable=true, bool writable=false, bool executable=false, bool global=false) -&gt; uint64_t</td></tr>
<tr class="separator:af2bed9d8a049c2d40634b15b8e3adca9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac315dfa2ba9c5d0ea4aa9a5b76c1b4f0" id="r_ac315dfa2ba9c5d0ea4aa9a5b76c1b4f0"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#ac315dfa2ba9c5d0ea4aa9a5b76c1b4f0">GetKernelPagePermissions</a> (bool readable=true, bool writable=false, bool executable=false, bool global=false) -&gt; uint64_t</td></tr>
<tr class="separator:ac315dfa2ba9c5d0ea4aa9a5b76c1b4f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34641ac6c78b4598532a2d089c1357b2" id="r_a34641ac6c78b4598532a2d089c1357b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#a34641ac6c78b4598532a2d089c1357b2">SetPageDirectory</a> (uint64_t pd)</td></tr>
<tr class="separator:a34641ac6c78b4598532a2d089c1357b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acac13e4ce3e785b0e52dfb296d2c15b7" id="r_acac13e4ce3e785b0e52dfb296d2c15b7"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#acac13e4ce3e785b0e52dfb296d2c15b7">GetPageDirectory</a> () -&gt; uint64_t</td></tr>
<tr class="separator:acac13e4ce3e785b0e52dfb296d2c15b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a711073bec6e8a5bdc81bc4300f2da029" id="r_a711073bec6e8a5bdc81bc4300f2da029"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#a711073bec6e8a5bdc81bc4300f2da029">EnablePage</a> ()</td></tr>
<tr class="separator:a711073bec6e8a5bdc81bc4300f2da029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6bfdb9103b2687ab313084d18a75e32" id="r_aa6bfdb9103b2687ab313084d18a75e32"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#aa6bfdb9103b2687ab313084d18a75e32">FlushTLBAll</a> ()</td></tr>
<tr class="separator:aa6bfdb9103b2687ab313084d18a75e32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8746d12e9902e04e68ca29991a9d76cb" id="r_a8746d12e9902e04e68ca29991a9d76cb"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#a8746d12e9902e04e68ca29991a9d76cb">GetTableEntryPermissions</a> () -&gt; uint64_t</td></tr>
<tr class="separator:a8746d12e9902e04e68ca29991a9d76cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4eeadf3e9e222bf2725743b69fe760b6" id="r_a4eeadf3e9e222bf2725743b69fe760b6"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#a4eeadf3e9e222bf2725743b69fe760b6">GetVirtualPageNumber</a> (uint64_t virtual_addr, size_t level) -&gt; uint64_t</td></tr>
<tr class="separator:a4eeadf3e9e222bf2725743b69fe760b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7413c8abb7eabfcfae4d2aaac3c124cc" id="r_a7413c8abb7eabfcfae4d2aaac3c124cc"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#a7413c8abb7eabfcfae4d2aaac3c124cc">PageAlign</a> (uint64_t addr) -&gt; uint64_t</td></tr>
<tr class="separator:a7413c8abb7eabfcfae4d2aaac3c124cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3d08561d5c588f1cf2f260951522f6c" id="r_af3d08561d5c588f1cf2f260951522f6c"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#af3d08561d5c588f1cf2f260951522f6c">PageAlignUp</a> (uint64_t addr) -&gt; uint64_t</td></tr>
<tr class="separator:af3d08561d5c588f1cf2f260951522f6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a487abf50e746c58d9e930ff99ebbbd3e" id="r_a487abf50e746c58d9e930ff99ebbbd3e"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#a487abf50e746c58d9e930ff99ebbbd3e">IsPageAligned</a> (uint64_t addr) -&gt; bool</td></tr>
<tr class="separator:a487abf50e746c58d9e930ff99ebbbd3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a841eeee221133f726f9ac2e26577c475" id="r_a841eeee221133f726f9ac2e26577c475"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#a841eeee221133f726f9ac2e26577c475">IsPageTableEntryValid</a> (uint64_t pte) -&gt; bool</td></tr>
<tr class="separator:a841eeee221133f726f9ac2e26577c475"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bc8f484f80076b5c3f5cf419fd24aec" id="r_a5bc8f484f80076b5c3f5cf419fd24aec"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#a5bc8f484f80076b5c3f5cf419fd24aec">PageTableEntryToPhysical</a> (uint64_t pte) -&gt; uint64_t</td></tr>
<tr class="separator:a5bc8f484f80076b5c3f5cf419fd24aec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3655e31d3c72e1c80b4348cc3e55a71" id="r_af3655e31d3c72e1c80b4348cc3e55a71"><td class="memItemLeft" align="right" valign="top">auto&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#af3655e31d3c72e1c80b4348cc3e55a71">PhysicalToPageTableEntry</a> (uint64_t physical_addr, uint64_t <a class="el" href="acpi_8h.html#a773b39d480759f67926cb18ae2219281">flags</a>) -&gt; uint64_t</td></tr>
<tr class="separator:af3655e31d3c72e1c80b4348cc3e55a71"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a24fb424f54d414703cda572dc076d71a" id="r_a24fb424f54d414703cda572dc076d71a"><td class="memItemLeft" align="right" valign="top">static constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#a24fb424f54d414703cda572dc076d71a">kPageSize</a> = 4096</td></tr>
<tr class="separator:a24fb424f54d414703cda572dc076d71a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a382dae71680c204d9624f2b285ea66b6" id="r_a382dae71680c204d9624f2b285ea66b6"><td class="memItemLeft" align="right" valign="top">static constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#a382dae71680c204d9624f2b285ea66b6">kPteAttributeBits</a> = 12</td></tr>
<tr class="separator:a382dae71680c204d9624f2b285ea66b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdd8c36f28f76a8b48f7b73c815ca5f0" id="r_abdd8c36f28f76a8b48f7b73c815ca5f0"><td class="memItemLeft" align="right" valign="top">static constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#abdd8c36f28f76a8b48f7b73c815ca5f0">kPageOffsetBits</a> = 12</td></tr>
<tr class="separator:abdd8c36f28f76a8b48f7b73c815ca5f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeae00b54ad7e3e619c73290e28f5557" id="r_adeae00b54ad7e3e619c73290e28f5557"><td class="memItemLeft" align="right" valign="top">static constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#adeae00b54ad7e3e619c73290e28f5557">kVpnBits</a> = 9</td></tr>
<tr class="separator:adeae00b54ad7e3e619c73290e28f5557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a236612843b04c028666e220290f0fc9d" id="r_a236612843b04c028666e220290f0fc9d"><td class="memItemLeft" align="right" valign="top">static constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#a236612843b04c028666e220290f0fc9d">kVpnMask</a> = 0x1FF</td></tr>
<tr class="separator:a236612843b04c028666e220290f0fc9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa477c683e1a30439416431db45bf3b6b" id="r_aa477c683e1a30439416431db45bf3b6b"><td class="memItemLeft" align="right" valign="top">static constexpr size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#aa477c683e1a30439416431db45bf3b6b">kPageTableLevels</a> = 4</td></tr>
<tr class="separator:aa477c683e1a30439416431db45bf3b6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11b0ef214253c2315c3bba21f7f5a163" id="r_a11b0ef214253c2315c3bba21f7f5a163"><td class="memItemLeft" align="right" valign="top">static constexpr uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#a11b0ef214253c2315c3bba21f7f5a163">kValid</a> = 0x1</td></tr>
<tr class="separator:a11b0ef214253c2315c3bba21f7f5a163"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ca5321f5065ee04ec4e9ce82570ab14" id="r_a8ca5321f5065ee04ec4e9ce82570ab14"><td class="memItemLeft" align="right" valign="top">static constexpr uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#a8ca5321f5065ee04ec4e9ce82570ab14">kWrite</a> = 0x2</td></tr>
<tr class="separator:a8ca5321f5065ee04ec4e9ce82570ab14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a678c90ef7647e95c7570c9297564d66c" id="r_a678c90ef7647e95c7570c9297564d66c"><td class="memItemLeft" align="right" valign="top">static constexpr uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#a678c90ef7647e95c7570c9297564d66c">kUser</a> = 0x4</td></tr>
<tr class="separator:a678c90ef7647e95c7570c9297564d66c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68165e4013e416fac212c8d8ee13fbb7" id="r_a68165e4013e416fac212c8d8ee13fbb7"><td class="memItemLeft" align="right" valign="top">static constexpr uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#a68165e4013e416fac212c8d8ee13fbb7">kRead</a> = 0x200</td></tr>
<tr class="separator:a68165e4013e416fac212c8d8ee13fbb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdc8358978b1c0c8af4b8a344cf44bcb" id="r_acdc8358978b1c0c8af4b8a344cf44bcb"><td class="memItemLeft" align="right" valign="top">static constexpr uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#acdc8358978b1c0c8af4b8a344cf44bcb">kExec</a> = 0x400</td></tr>
<tr class="separator:acdc8358978b1c0c8af4b8a344cf44bcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a287b28e9187a2b1491e7927692616499" id="r_a287b28e9187a2b1491e7927692616499"><td class="memItemLeft" align="right" valign="top">static constexpr uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecpu__io_1_1virtual__memory.html#a287b28e9187a2b1491e7927692616499">kGlobal</a> = 0x100</td></tr>
<tr class="separator:a287b28e9187a2b1491e7927692616499"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a711073bec6e8a5bdc81bc4300f2da029" name="a711073bec6e8a5bdc81bc4300f2da029"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a711073bec6e8a5bdc81bc4300f2da029">&#9670;&#160;</a></span>EnablePage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cpu_io::virtual_memory::EnablePage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00129">129</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  129</span>                         {</div>
<div class="line"><span class="lineno">  130</span>  <span class="keyword">auto</span>* env = <a class="code hl_function" href="classtest__env_1_1TestEnvironmentState.html#a562424679984595e70361b0dad2ef96d">test_env::TestEnvironmentState::GetCurrentThreadEnvironment</a>();</div>
<div class="line"><span class="lineno">  131</span>  assert(env &amp;&amp; <span class="stringliteral">&quot;TestEnvironmentState not set for current thread&quot;</span>);</div>
<div class="line"><span class="lineno">  132</span>  <span class="keyword">auto</span>&amp; core = env-&gt;GetCurrentCoreEnv();</div>
<div class="line"><span class="lineno">  133</span>  core.paging_enabled = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  134</span>}</div>
<div class="ttc" id="aclasstest__env_1_1TestEnvironmentState_html_a562424679984595e70361b0dad2ef96d"><div class="ttname"><a href="classtest__env_1_1TestEnvironmentState.html#a562424679984595e70361b0dad2ef96d">test_env::TestEnvironmentState::GetCurrentThreadEnvironment</a></div><div class="ttdeci">static auto GetCurrentThreadEnvironment() -&gt; TestEnvironmentState *</div><div class="ttdoc">获取当前线程的环境实例指针（供 Mock 层调用）</div><div class="ttdef"><b>Definition</b> <a href="test__environment__state_8cpp_source.html#l00026">test_environment_state.cpp:26</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecpu__io_1_1virtual__memory_a711073bec6e8a5bdc81bc4300f2da029_cgraph.png" border="0" usemap="#anamespacecpu__io_1_1virtual__memory_a711073bec6e8a5bdc81bc4300f2da029_cgraph" alt=""/></div>
<map name="anamespacecpu__io_1_1virtual__memory_a711073bec6e8a5bdc81bc4300f2da029_cgraph" id="anamespacecpu__io_1_1virtual__memory_a711073bec6e8a5bdc81bc4300f2da029_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,181,45"/>
<area shape="rect" href="classtest__env_1_1TestEnvironmentState.html#a562424679984595e70361b0dad2ef96d" title="获取当前线程的环境实例指针（供 Mock 层调用）" alt="" coords="229,5,492,45"/>
<area shape="poly" title=" " alt="" coords="182,23,216,23,216,28,182,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecpu__io_1_1virtual__memory_a711073bec6e8a5bdc81bc4300f2da029_icgraph.png" border="0" usemap="#anamespacecpu__io_1_1virtual__memory_a711073bec6e8a5bdc81bc4300f2da029_icgraph" alt=""/></div>
<map name="anamespacecpu__io_1_1virtual__memory_a711073bec6e8a5bdc81bc4300f2da029_icgraph" id="anamespacecpu__io_1_1virtual__memory_a711073bec6e8a5bdc81bc4300f2da029_icgraph">
<area shape="rect" title=" " alt="" coords="279,23,455,63"/>
<area shape="rect" href="classVirtualMemory.html#a748bc7300314ff16a55f1f6b9858a41e" title=" " alt="" coords="5,5,231,31"/>
<area shape="poly" title=" " alt="" coords="265,36,230,32,231,27,265,30"/>
<area shape="rect" href="example__environment__test_8cpp.html#af2fc3993a1c7aff8ed4fc97b18be8cbf" title="测试页表操作" alt="" coords="83,55,153,80"/>
<area shape="poly" title=" " alt="" coords="265,56,153,67,153,61,265,50"/>
</map>
</div>

</div>
</div>
<a id="aa6bfdb9103b2687ab313084d18a75e32" name="aa6bfdb9103b2687ab313084d18a75e32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6bfdb9103b2687ab313084d18a75e32">&#9670;&#160;</a></span>FlushTLBAll()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cpu_io::virtual_memory::FlushTLBAll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00136">136</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  136</span>                          {</div>
<div class="line"><span class="lineno">  137</span>  <span class="comment">// 在测试环境中不需要实际操作</span></div>
<div class="line"><span class="lineno">  138</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecpu__io_1_1virtual__memory_aa6bfdb9103b2687ab313084d18a75e32_icgraph.png" border="0" usemap="#anamespacecpu__io_1_1virtual__memory_aa6bfdb9103b2687ab313084d18a75e32_icgraph" alt=""/></div>
<map name="anamespacecpu__io_1_1virtual__memory_aa6bfdb9103b2687ab313084d18a75e32_icgraph" id="anamespacecpu__io_1_1virtual__memory_aa6bfdb9103b2687ab313084d18a75e32_icgraph">
<area shape="rect" title=" " alt="" coords="768,23,944,63"/>
<area shape="rect" href="classVirtualMemory.html#acbbc8c7f29e2611d4b56003323473e3d" title="映射单个页面" alt="" coords="525,5,711,31"/>
<area shape="poly" title=" " alt="" coords="754,35,710,30,711,25,754,30"/>
<area shape="rect" href="classVirtualMemory.html#af6bc99b477b9a096c0fcb846a6ef874a" title="取消映射单个页面" alt="" coords="516,55,720,80"/>
<area shape="poly" title=" " alt="" coords="754,56,721,60,720,54,754,51"/>
<area shape="rect" href="classVirtualMemory.html#a19ea83e0f3f85e55b12deec2a20972a2" title="映射设备内存 (MMIO)" alt="" coords="276,5,468,31"/>
<area shape="poly" title=" " alt="" coords="511,21,468,21,468,15,511,15"/>
<area shape="rect" href="classVirtualMemory.html#a0854e9b79bc77a621c7a806d711c52a6" title=" " alt="" coords="5,5,228,31"/>
<area shape="poly" title=" " alt="" coords="262,21,228,21,228,15,262,15"/>
</map>
</div>

</div>
</div>
<a id="ac315dfa2ba9c5d0ea4aa9a5b76c1b4f0" name="ac315dfa2ba9c5d0ea4aa9a5b76c1b4f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac315dfa2ba9c5d0ea4aa9a5b76c1b4f0">&#9670;&#160;</a></span>GetKernelPagePermissions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto cpu_io::virtual_memory::GetKernelPagePermissions </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>readable</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>writable</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>executable</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>global</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt; uint64_t </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00094">94</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   97</span>                                                                      {</div>
<div class="line"><span class="lineno">   98</span>  uint64_t <a class="code hl_variable" href="acpi_8h.html#a773b39d480759f67926cb18ae2219281">flags</a> = <a class="code hl_variable" href="namespacecpu__io_1_1virtual__memory.html#a11b0ef214253c2315c3bba21f7f5a163">kValid</a>;  <span class="comment">// Kernel pages don&#39;t need kUser</span></div>
<div class="line"><span class="lineno">   99</span>  <span class="keywordflow">if</span> (readable) {</div>
<div class="line"><span class="lineno">  100</span>    <a class="code hl_variable" href="acpi_8h.html#a773b39d480759f67926cb18ae2219281">flags</a> |= <a class="code hl_variable" href="namespacecpu__io_1_1virtual__memory.html#a68165e4013e416fac212c8d8ee13fbb7">kRead</a>;</div>
<div class="line"><span class="lineno">  101</span>  }</div>
<div class="line"><span class="lineno">  102</span>  <span class="keywordflow">if</span> (writable) {</div>
<div class="line"><span class="lineno">  103</span>    <a class="code hl_variable" href="acpi_8h.html#a773b39d480759f67926cb18ae2219281">flags</a> |= kWrite;</div>
<div class="line"><span class="lineno">  104</span>  }</div>
<div class="line"><span class="lineno">  105</span>  <span class="keywordflow">if</span> (executable) {</div>
<div class="line"><span class="lineno">  106</span>    <a class="code hl_variable" href="acpi_8h.html#a773b39d480759f67926cb18ae2219281">flags</a> |= kExec;</div>
<div class="line"><span class="lineno">  107</span>  }</div>
<div class="line"><span class="lineno">  108</span>  <span class="keywordflow">if</span> (global) {</div>
<div class="line"><span class="lineno">  109</span>    <a class="code hl_variable" href="acpi_8h.html#a773b39d480759f67926cb18ae2219281">flags</a> |= <a class="code hl_variable" href="namespacecpu__io_1_1virtual__memory.html#a287b28e9187a2b1491e7927692616499">kGlobal</a>;</div>
<div class="line"><span class="lineno">  110</span>  }</div>
<div class="line"><span class="lineno">  111</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="acpi_8h.html#a773b39d480759f67926cb18ae2219281">flags</a>;</div>
<div class="line"><span class="lineno">  112</span>}</div>
<div class="ttc" id="aacpi_8h_html_a773b39d480759f67926cb18ae2219281"><div class="ttname"><a href="acpi_8h.html#a773b39d480759f67926cb18ae2219281">flags</a></div><div class="ttdeci">uint32_t flags</div><div class="ttdef"><b>Definition</b> <a href="acpi_8h_source.html#l00038">acpi.h:38</a></div></div>
<div class="ttc" id="anamespacecpu__io_1_1virtual__memory_html_a11b0ef214253c2315c3bba21f7f5a163"><div class="ttname"><a href="namespacecpu__io_1_1virtual__memory.html#a11b0ef214253c2315c3bba21f7f5a163">cpu_io::virtual_memory::kValid</a></div><div class="ttdeci">static constexpr uint64_t kValid</div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00066">cpu_io.h:66</a></div></div>
<div class="ttc" id="anamespacecpu__io_1_1virtual__memory_html_a287b28e9187a2b1491e7927692616499"><div class="ttname"><a href="namespacecpu__io_1_1virtual__memory.html#a287b28e9187a2b1491e7927692616499">cpu_io::virtual_memory::kGlobal</a></div><div class="ttdeci">static constexpr uint64_t kGlobal</div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00071">cpu_io.h:71</a></div></div>
<div class="ttc" id="anamespacecpu__io_1_1virtual__memory_html_a68165e4013e416fac212c8d8ee13fbb7"><div class="ttname"><a href="namespacecpu__io_1_1virtual__memory.html#a68165e4013e416fac212c8d8ee13fbb7">cpu_io::virtual_memory::kRead</a></div><div class="ttdeci">static constexpr uint64_t kRead</div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00069">cpu_io.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acac13e4ce3e785b0e52dfb296d2c15b7" name="acac13e4ce3e785b0e52dfb296d2c15b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acac13e4ce3e785b0e52dfb296d2c15b7">&#9670;&#160;</a></span>GetPageDirectory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto cpu_io::virtual_memory::GetPageDirectory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> -&gt; uint64_t </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00122">122</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  122</span>                                           {</div>
<div class="line"><span class="lineno">  123</span>  <span class="keyword">auto</span>* env = <a class="code hl_function" href="classtest__env_1_1TestEnvironmentState.html#a562424679984595e70361b0dad2ef96d">test_env::TestEnvironmentState::GetCurrentThreadEnvironment</a>();</div>
<div class="line"><span class="lineno">  124</span>  assert(env &amp;&amp; <span class="stringliteral">&quot;TestEnvironmentState not set for current thread&quot;</span>);</div>
<div class="line"><span class="lineno">  125</span>  <span class="keyword">auto</span>&amp; core = env-&gt;GetCurrentCoreEnv();</div>
<div class="line"><span class="lineno">  126</span>  <span class="keywordflow">return</span> core.page_directory;</div>
<div class="line"><span class="lineno">  127</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecpu__io_1_1virtual__memory_acac13e4ce3e785b0e52dfb296d2c15b7_cgraph.png" border="0" usemap="#anamespacecpu__io_1_1virtual__memory_acac13e4ce3e785b0e52dfb296d2c15b7_cgraph" alt=""/></div>
<map name="anamespacecpu__io_1_1virtual__memory_acac13e4ce3e785b0e52dfb296d2c15b7_cgraph" id="anamespacecpu__io_1_1virtual__memory_acac13e4ce3e785b0e52dfb296d2c15b7_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,181,45"/>
<area shape="rect" href="classtest__env_1_1TestEnvironmentState.html#a562424679984595e70361b0dad2ef96d" title="获取当前线程的环境实例指针（供 Mock 层调用）" alt="" coords="229,5,492,45"/>
<area shape="poly" title=" " alt="" coords="182,23,216,23,216,28,182,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecpu__io_1_1virtual__memory_acac13e4ce3e785b0e52dfb296d2c15b7_icgraph.png" border="0" usemap="#anamespacecpu__io_1_1virtual__memory_acac13e4ce3e785b0e52dfb296d2c15b7_icgraph" alt=""/></div>
<map name="anamespacecpu__io_1_1virtual__memory_acac13e4ce3e785b0e52dfb296d2c15b7_icgraph" id="anamespacecpu__io_1_1virtual__memory_acac13e4ce3e785b0e52dfb296d2c15b7_icgraph">
<area shape="rect" title=" " alt="" coords="123,23,299,63"/>
<area shape="rect" href="example__environment__test_8cpp.html#af2fc3993a1c7aff8ed4fc97b18be8cbf" title="测试页表操作" alt="" coords="5,5,75,31"/>
<area shape="poly" title=" " alt="" coords="109,31,74,26,75,20,109,26"/>
<area shape="rect" href="task__scheduling__example__test_8cpp.html#ad57feef7ddcebadba347cf382681beda" title="示例：验证页表切换" alt="" coords="5,55,75,80"/>
<area shape="poly" title=" " alt="" coords="109,60,75,65,74,60,109,55"/>
</map>
</div>

</div>
</div>
<a id="a8746d12e9902e04e68ca29991a9d76cb" name="a8746d12e9902e04e68ca29991a9d76cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8746d12e9902e04e68ca29991a9d76cb">&#9670;&#160;</a></span>GetTableEntryPermissions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto cpu_io::virtual_memory::GetTableEntryPermissions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> -&gt; uint64_t </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00141">141</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  141</span>                                                   {</div>
<div class="line"><span class="lineno">  142</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecpu__io_1_1virtual__memory.html#a11b0ef214253c2315c3bba21f7f5a163">kValid</a> | <a class="code hl_variable" href="namespacecpu__io_1_1virtual__memory.html#a8ca5321f5065ee04ec4e9ce82570ab14">kWrite</a> | <a class="code hl_variable" href="namespacecpu__io_1_1virtual__memory.html#a678c90ef7647e95c7570c9297564d66c">kUser</a> | <a class="code hl_variable" href="namespacecpu__io_1_1virtual__memory.html#a68165e4013e416fac212c8d8ee13fbb7">kRead</a> | <a class="code hl_variable" href="namespacecpu__io_1_1virtual__memory.html#acdc8358978b1c0c8af4b8a344cf44bcb">kExec</a>;</div>
<div class="line"><span class="lineno">  143</span>}</div>
<div class="ttc" id="anamespacecpu__io_1_1virtual__memory_html_a678c90ef7647e95c7570c9297564d66c"><div class="ttname"><a href="namespacecpu__io_1_1virtual__memory.html#a678c90ef7647e95c7570c9297564d66c">cpu_io::virtual_memory::kUser</a></div><div class="ttdeci">static constexpr uint64_t kUser</div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00068">cpu_io.h:68</a></div></div>
<div class="ttc" id="anamespacecpu__io_1_1virtual__memory_html_a8ca5321f5065ee04ec4e9ce82570ab14"><div class="ttname"><a href="namespacecpu__io_1_1virtual__memory.html#a8ca5321f5065ee04ec4e9ce82570ab14">cpu_io::virtual_memory::kWrite</a></div><div class="ttdeci">static constexpr uint64_t kWrite</div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00067">cpu_io.h:67</a></div></div>
<div class="ttc" id="anamespacecpu__io_1_1virtual__memory_html_acdc8358978b1c0c8af4b8a344cf44bcb"><div class="ttname"><a href="namespacecpu__io_1_1virtual__memory.html#acdc8358978b1c0c8af4b8a344cf44bcb">cpu_io::virtual_memory::kExec</a></div><div class="ttdeci">static constexpr uint64_t kExec</div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00070">cpu_io.h:70</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecpu__io_1_1virtual__memory_a8746d12e9902e04e68ca29991a9d76cb_icgraph.png" border="0" usemap="#anamespacecpu__io_1_1virtual__memory_a8746d12e9902e04e68ca29991a9d76cb_icgraph" alt=""/></div>
<map name="anamespacecpu__io_1_1virtual__memory_a8746d12e9902e04e68ca29991a9d76cb_icgraph" id="anamespacecpu__io_1_1virtual__memory_a8746d12e9902e04e68ca29991a9d76cb_icgraph">
<area shape="rect" title=" " alt="" coords="1036,101,1236,141"/>
<area shape="rect" href="classVirtualMemory.html#a7441d7b32e1941d347851bd3da1ad6fb" title="在页表中查找虚拟地址对应的页表项" alt="" coords="769,53,988,93"/>
<area shape="poly" title=" " alt="" coords="1022,102,986,95,987,90,1023,97"/>
<area shape="rect" href="classVirtualMemory.html#acd2f1fff14fc36c984c7edbbabf95b0b" title="递归复制页表" alt="" coords="783,145,974,185"/>
<area shape="poly" title=" " alt="" coords="1023,143,975,151,974,146,1022,137"/>
<area shape="rect" href="classVirtualMemory.html#a2889f5a5b3c2b625cb3042e125ed5ac2" title="获取虚拟地址对应的物理地址映射" alt="" coords="516,5,721,31"/>
<area shape="poly" title=" " alt="" coords="769,52,679,33,681,28,770,47"/>
<area shape="rect" href="classVirtualMemory.html#acbbc8c7f29e2611d4b56003323473e3d" title="映射单个页面" alt="" coords="526,55,711,80"/>
<area shape="poly" title=" " alt="" coords="756,73,711,72,711,67,756,67"/>
<area shape="rect" href="classVirtualMemory.html#af6bc99b477b9a096c0fcb846a6ef874a" title="取消映射单个页面" alt="" coords="517,104,721,129"/>
<area shape="poly" title=" " alt="" coords="756,96,695,107,694,101,755,91"/>
<area shape="rect" href="classVirtualMemory.html#a19ea83e0f3f85e55b12deec2a20972a2" title="映射设备内存 (MMIO)" alt="" coords="276,55,468,80"/>
<area shape="poly" title=" " alt="" coords="512,70,468,70,468,65,512,65"/>
<area shape="rect" href="classVirtualMemory.html#a0854e9b79bc77a621c7a806d711c52a6" title=" " alt="" coords="5,55,228,80"/>
<area shape="poly" title=" " alt="" coords="262,70,228,70,228,65,262,65"/>
<area shape="poly" title=" " alt="" coords="922,133,907,126,879,123,854,125,839,130,833,136,836,143,831,145,828,135,836,126,853,120,879,118,908,121,925,128"/>
<area shape="rect" href="classVirtualMemory.html#ae654bd2c0980f0bf5b60cce3ff7a7ae3" title="复制页表" alt="" coords="521,154,716,194"/>
<area shape="poly" title=" " alt="" coords="770,171,716,173,716,168,769,166"/>
</map>
</div>

</div>
</div>
<a id="af2bed9d8a049c2d40634b15b8e3adca9" name="af2bed9d8a049c2d40634b15b8e3adca9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2bed9d8a049c2d40634b15b8e3adca9">&#9670;&#160;</a></span>GetUserPagePermissions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto cpu_io::virtual_memory::GetUserPagePermissions </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>readable</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>writable</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>executable</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>global</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt; uint64_t </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00074">74</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   76</span>                {</div>
<div class="line"><span class="lineno">   77</span>  uint64_t <a class="code hl_variable" href="acpi_8h.html#a773b39d480759f67926cb18ae2219281">flags</a> = <a class="code hl_variable" href="namespacecpu__io_1_1virtual__memory.html#a11b0ef214253c2315c3bba21f7f5a163">kValid</a> | <a class="code hl_variable" href="namespacecpu__io_1_1virtual__memory.html#a678c90ef7647e95c7570c9297564d66c">kUser</a>;</div>
<div class="line"><span class="lineno">   78</span>  <span class="keywordflow">if</span> (readable) {</div>
<div class="line"><span class="lineno">   79</span>    <a class="code hl_variable" href="acpi_8h.html#a773b39d480759f67926cb18ae2219281">flags</a> |= <a class="code hl_variable" href="namespacecpu__io_1_1virtual__memory.html#a68165e4013e416fac212c8d8ee13fbb7">kRead</a>;</div>
<div class="line"><span class="lineno">   80</span>  }</div>
<div class="line"><span class="lineno">   81</span>  <span class="keywordflow">if</span> (writable) {</div>
<div class="line"><span class="lineno">   82</span>    <a class="code hl_variable" href="acpi_8h.html#a773b39d480759f67926cb18ae2219281">flags</a> |= kWrite;</div>
<div class="line"><span class="lineno">   83</span>  }</div>
<div class="line"><span class="lineno">   84</span>  <span class="keywordflow">if</span> (executable) {</div>
<div class="line"><span class="lineno">   85</span>    <a class="code hl_variable" href="acpi_8h.html#a773b39d480759f67926cb18ae2219281">flags</a> |= kExec;</div>
<div class="line"><span class="lineno">   86</span>  }</div>
<div class="line"><span class="lineno">   87</span>  <span class="keywordflow">if</span> (global) {</div>
<div class="line"><span class="lineno">   88</span>    <a class="code hl_variable" href="acpi_8h.html#a773b39d480759f67926cb18ae2219281">flags</a> |= <a class="code hl_variable" href="namespacecpu__io_1_1virtual__memory.html#a287b28e9187a2b1491e7927692616499">kGlobal</a>;</div>
<div class="line"><span class="lineno">   89</span>  }</div>
<div class="line"><span class="lineno">   90</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="acpi_8h.html#a773b39d480759f67926cb18ae2219281">flags</a>;</div>
<div class="line"><span class="lineno">   91</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecpu__io_1_1virtual__memory_af2bed9d8a049c2d40634b15b8e3adca9_icgraph.png" border="0" usemap="#anamespacecpu__io_1_1virtual__memory_af2bed9d8a049c2d40634b15b8e3adca9_icgraph" alt=""/></div>
<map name="anamespacecpu__io_1_1virtual__memory_af2bed9d8a049c2d40634b15b8e3adca9_icgraph" id="anamespacecpu__io_1_1virtual__memory_af2bed9d8a049c2d40634b15b8e3adca9_icgraph">
<area shape="rect" title=" " alt="" coords="212,5,405,45"/>
<area shape="rect" href="system__test_2virtual__memory__test_8cpp.html#a8027cdd5d224276fe32cfe407e4dfe88" title=" " alt="" coords="5,13,164,38"/>
<area shape="poly" title=" " alt="" coords="198,28,164,28,164,23,198,23"/>
</map>
</div>

</div>
</div>
<a id="a4eeadf3e9e222bf2725743b69fe760b6" name="a4eeadf3e9e222bf2725743b69fe760b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4eeadf3e9e222bf2725743b69fe760b6">&#9670;&#160;</a></span>GetVirtualPageNumber()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto cpu_io::virtual_memory::GetVirtualPageNumber </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>virtual_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt; uint64_t </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00146">146</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  147</span>                {</div>
<div class="line"><span class="lineno">  148</span>  <span class="keywordflow">return</span> (virtual_addr &gt;&gt; (kPageOffsetBits + level * kVpnBits)) &amp; <a class="code hl_variable" href="namespacecpu__io_1_1virtual__memory.html#a236612843b04c028666e220290f0fc9d">kVpnMask</a>;</div>
<div class="line"><span class="lineno">  149</span>}</div>
<div class="ttc" id="anamespacecpu__io_1_1virtual__memory_html_a236612843b04c028666e220290f0fc9d"><div class="ttname"><a href="namespacecpu__io_1_1virtual__memory.html#a236612843b04c028666e220290f0fc9d">cpu_io::virtual_memory::kVpnMask</a></div><div class="ttdeci">static constexpr size_t kVpnMask</div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00062">cpu_io.h:62</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecpu__io_1_1virtual__memory_a4eeadf3e9e222bf2725743b69fe760b6_icgraph.png" border="0" usemap="#anamespacecpu__io_1_1virtual__memory_a4eeadf3e9e222bf2725743b69fe760b6_icgraph" alt=""/></div>
<map name="anamespacecpu__io_1_1virtual__memory_a4eeadf3e9e222bf2725743b69fe760b6_icgraph" id="anamespacecpu__io_1_1virtual__memory_a4eeadf3e9e222bf2725743b69fe760b6_icgraph">
<area shape="rect" title=" " alt="" coords="1036,47,1215,87"/>
<area shape="rect" href="classVirtualMemory.html#a7441d7b32e1941d347851bd3da1ad6fb" title="在页表中查找虚拟地址对应的页表项" alt="" coords="769,47,988,87"/>
<area shape="poly" title=" " alt="" coords="1022,70,988,70,988,65,1022,65"/>
<area shape="rect" href="classVirtualMemory.html#a2889f5a5b3c2b625cb3042e125ed5ac2" title="获取虚拟地址对应的物理地址映射" alt="" coords="516,5,721,31"/>
<area shape="poly" title=" " alt="" coords="759,47,686,33,687,28,760,42"/>
<area shape="rect" href="classVirtualMemory.html#acbbc8c7f29e2611d4b56003323473e3d" title="映射单个页面" alt="" coords="526,55,711,80"/>
<area shape="poly" title=" " alt="" coords="756,70,711,70,711,65,756,65"/>
<area shape="rect" href="classVirtualMemory.html#af6bc99b477b9a096c0fcb846a6ef874a" title="取消映射单个页面" alt="" coords="517,104,721,129"/>
<area shape="poly" title=" " alt="" coords="760,93,687,107,686,101,759,87"/>
<area shape="rect" href="classVirtualMemory.html#a19ea83e0f3f85e55b12deec2a20972a2" title="映射设备内存 (MMIO)" alt="" coords="276,55,468,80"/>
<area shape="poly" title=" " alt="" coords="512,70,468,70,468,65,512,65"/>
<area shape="rect" href="classVirtualMemory.html#a0854e9b79bc77a621c7a806d711c52a6" title=" " alt="" coords="5,55,228,80"/>
<area shape="poly" title=" " alt="" coords="262,70,228,70,228,65,262,65"/>
</map>
</div>

</div>
</div>
<a id="a487abf50e746c58d9e930ff99ebbbd3e" name="a487abf50e746c58d9e930ff99ebbbd3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a487abf50e746c58d9e930ff99ebbbd3e">&#9670;&#160;</a></span>IsPageAligned()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto cpu_io::virtual_memory::IsPageAligned </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td> -&gt; bool </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00160">160</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  160</span>                                                 {</div>
<div class="line"><span class="lineno">  161</span>  <span class="keywordflow">return</span> (addr &amp; (kPageSize - 1)) == 0;</div>
<div class="line"><span class="lineno">  162</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a841eeee221133f726f9ac2e26577c475" name="a841eeee221133f726f9ac2e26577c475"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a841eeee221133f726f9ac2e26577c475">&#9670;&#160;</a></span>IsPageTableEntryValid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto cpu_io::virtual_memory::IsPageTableEntryValid </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>pte</em></td><td>)</td>
          <td> -&gt; bool </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00165">165</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  165</span>                                                        {</div>
<div class="line"><span class="lineno">  166</span>  <span class="keywordflow">return</span> (pte &amp; kValid) != 0;</div>
<div class="line"><span class="lineno">  167</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecpu__io_1_1virtual__memory_a841eeee221133f726f9ac2e26577c475_icgraph.png" border="0" usemap="#anamespacecpu__io_1_1virtual__memory_a841eeee221133f726f9ac2e26577c475_icgraph" alt=""/></div>
<map name="anamespacecpu__io_1_1virtual__memory_a841eeee221133f726f9ac2e26577c475_icgraph" id="anamespacecpu__io_1_1virtual__memory_a841eeee221133f726f9ac2e26577c475_icgraph">
<area shape="rect" title=" " alt="" coords="1041,125,1217,165"/>
<area shape="rect" href="classVirtualMemory.html#a7441d7b32e1941d347851bd3da1ad6fb" title="在页表中查找虚拟地址对应的页表项" alt="" coords="775,42,993,82"/>
<area shape="poly" title=" " alt="" coords="1056,123,944,85,945,79,1057,118"/>
<area shape="rect" href="classVirtualMemory.html#a2889f5a5b3c2b625cb3042e125ed5ac2" title="获取虚拟地址对应的物理地址映射" alt="" coords="520,21,725,47"/>
<area shape="poly" title=" " alt="" coords="1102,116,1055,70,1025,48,992,32,952,20,910,13,825,8,746,14,681,24,680,19,746,9,825,3,911,8,953,15,994,27,1028,44,1058,66,1105,112"/>
<area shape="rect" href="classVirtualMemory.html#acbbc8c7f29e2611d4b56003323473e3d" title="映射单个页面" alt="" coords="530,89,715,115"/>
<area shape="poly" title=" " alt="" coords="1027,139,715,112,716,107,1027,133"/>
<area shape="rect" href="classVirtualMemory.html#af6bc99b477b9a096c0fcb846a6ef874a" title="取消映射单个页面" alt="" coords="521,157,725,183"/>
<area shape="poly" title=" " alt="" coords="1027,152,725,167,725,162,1027,147"/>
<area shape="rect" href="classVirtualMemory.html#acd2f1fff14fc36c984c7edbbabf95b0b" title="递归复制页表" alt="" coords="789,319,979,359"/>
<area shape="poly" title=" " alt="" coords="1105,177,1057,230,995,285,933,321,931,317,992,281,1053,227,1101,173"/>
<area shape="rect" href="classVirtualMemory.html#a5d99f94ac5108601c7ea895ad52f6c33" title="递归释放页表" alt="" coords="789,231,979,271"/>
<area shape="poly" title=" " alt="" coords="1071,173,932,234,930,229,1069,168"/>
<area shape="poly" title=" " alt="" coords="761,51,725,48,726,42,761,46"/>
<area shape="poly" title=" " alt="" coords="761,83,707,92,706,87,761,78"/>
<area shape="poly" title=" " alt="" coords="823,90,655,160,653,155,821,85"/>
<area shape="rect" href="classVirtualMemory.html#a19ea83e0f3f85e55b12deec2a20972a2" title="映射设备内存 (MMIO)" alt="" coords="277,89,469,115"/>
<area shape="poly" title=" " alt="" coords="516,105,470,105,470,99,516,99"/>
<area shape="rect" href="classVirtualMemory.html#a0854e9b79bc77a621c7a806d711c52a6" title=" " alt="" coords="5,89,228,115"/>
<area shape="poly" title=" " alt="" coords="263,105,228,105,228,99,263,99"/>
<area shape="poly" title=" " alt="" coords="926,308,911,301,884,298,860,300,846,305,841,311,843,318,838,320,836,310,843,300,859,295,884,293,913,295,928,303"/>
<area shape="rect" href="classVirtualMemory.html#ae654bd2c0980f0bf5b60cce3ff7a7ae3" title="复制页表" alt="" coords="276,274,471,314"/>
<area shape="poly" title=" " alt="" coords="774,332,470,305,471,300,775,327"/>
<area shape="poly" title=" " alt="" coords="926,220,911,213,884,210,860,212,846,217,841,223,843,230,838,232,836,222,843,212,859,207,884,205,913,207,928,215"/>
<area shape="rect" href="classVirtualMemory.html#adf6d48183927262a6c7929493f0c74f5" title="回收页表，释放所有映射和子页表" alt="" coords="519,246,727,286"/>
<area shape="poly" title=" " alt="" coords="775,260,727,263,727,257,775,255"/>
<area shape="poly" title=" " alt="" coords="505,282,471,286,471,280,505,276"/>
</map>
</div>

</div>
</div>
<a id="a7413c8abb7eabfcfae4d2aaac3c124cc" name="a7413c8abb7eabfcfae4d2aaac3c124cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7413c8abb7eabfcfae4d2aaac3c124cc">&#9670;&#160;</a></span>PageAlign()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto cpu_io::virtual_memory::PageAlign </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td> -&gt; uint64_t </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00152">152</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  152</span>                                                 {</div>
<div class="line"><span class="lineno">  153</span>  <span class="keywordflow">return</span> addr &amp; ~(<a class="code hl_variable" href="namespacecpu__io_1_1virtual__memory.html#a24fb424f54d414703cda572dc076d71a">kPageSize</a> - 1);</div>
<div class="line"><span class="lineno">  154</span>}</div>
<div class="ttc" id="anamespacecpu__io_1_1virtual__memory_html_a24fb424f54d414703cda572dc076d71a"><div class="ttname"><a href="namespacecpu__io_1_1virtual__memory.html#a24fb424f54d414703cda572dc076d71a">cpu_io::virtual_memory::kPageSize</a></div><div class="ttdeci">static constexpr size_t kPageSize</div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00058">cpu_io.h:58</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecpu__io_1_1virtual__memory_a7413c8abb7eabfcfae4d2aaac3c124cc_icgraph.png" border="0" usemap="#anamespacecpu__io_1_1virtual__memory_a7413c8abb7eabfcfae4d2aaac3c124cc_icgraph" alt=""/></div>
<map name="anamespacecpu__io_1_1virtual__memory_a7413c8abb7eabfcfae4d2aaac3c124cc_icgraph" id="anamespacecpu__io_1_1virtual__memory_a7413c8abb7eabfcfae4d2aaac3c124cc_icgraph">
<area shape="rect" title=" " alt="" coords="516,5,692,45"/>
<area shape="rect" href="classVirtualMemory.html#a19ea83e0f3f85e55b12deec2a20972a2" title="映射设备内存 (MMIO)" alt="" coords="276,13,468,38"/>
<area shape="poly" title=" " alt="" coords="502,28,468,28,468,23,502,23"/>
<area shape="rect" href="classVirtualMemory.html#a0854e9b79bc77a621c7a806d711c52a6" title=" " alt="" coords="5,13,228,38"/>
<area shape="poly" title=" " alt="" coords="262,28,228,28,228,23,262,23"/>
</map>
</div>

</div>
</div>
<a id="af3d08561d5c588f1cf2f260951522f6c" name="af3d08561d5c588f1cf2f260951522f6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3d08561d5c588f1cf2f260951522f6c">&#9670;&#160;</a></span>PageAlignUp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto cpu_io::virtual_memory::PageAlignUp </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td> -&gt; uint64_t </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00156">156</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  156</span>                                                   {</div>
<div class="line"><span class="lineno">  157</span>  <span class="keywordflow">return</span> (addr + kPageSize - 1) &amp; ~(<a class="code hl_variable" href="namespacecpu__io_1_1virtual__memory.html#a24fb424f54d414703cda572dc076d71a">kPageSize</a> - 1);</div>
<div class="line"><span class="lineno">  158</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecpu__io_1_1virtual__memory_af3d08561d5c588f1cf2f260951522f6c_icgraph.png" border="0" usemap="#anamespacecpu__io_1_1virtual__memory_af3d08561d5c588f1cf2f260951522f6c_icgraph" alt=""/></div>
<map name="anamespacecpu__io_1_1virtual__memory_af3d08561d5c588f1cf2f260951522f6c_icgraph" id="anamespacecpu__io_1_1virtual__memory_af3d08561d5c588f1cf2f260951522f6c_icgraph">
<area shape="rect" title=" " alt="" coords="516,23,692,63"/>
<area shape="rect" href="classVirtualMemory.html#a19ea83e0f3f85e55b12deec2a20972a2" title="映射设备内存 (MMIO)" alt="" coords="276,5,468,31"/>
<area shape="poly" title=" " alt="" coords="502,35,468,31,469,26,503,30"/>
<area shape="rect" href="memory_8cpp.html#a0d8c809343a4f03aea31ffbf8891a11d" title=" " alt="" coords="323,55,421,80"/>
<area shape="poly" title=" " alt="" coords="503,56,421,65,421,60,502,51"/>
<area shape="rect" href="classVirtualMemory.html#a0854e9b79bc77a621c7a806d711c52a6" title=" " alt="" coords="5,5,228,31"/>
<area shape="poly" title=" " alt="" coords="262,21,228,21,228,15,262,15"/>
<area shape="rect" href="tests_2system__test_2main_8cpp.html#ab85c3edfd2aada0e059dccf8d002924d" title="内核入口" alt="" coords="89,55,144,80"/>
<area shape="poly" title=" " alt="" coords="310,70,144,70,144,65,310,65"/>
</map>
</div>

</div>
</div>
<a id="a5bc8f484f80076b5c3f5cf419fd24aec" name="a5bc8f484f80076b5c3f5cf419fd24aec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bc8f484f80076b5c3f5cf419fd24aec">&#9670;&#160;</a></span>PageTableEntryToPhysical()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto cpu_io::virtual_memory::PageTableEntryToPhysical </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>pte</em></td><td>)</td>
          <td> -&gt; uint64_t </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00169">169</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  169</span>                                                               {</div>
<div class="line"><span class="lineno">  170</span>  <span class="keywordflow">return</span> pte &amp; 0x000FFFFFFFFFF000ULL;</div>
<div class="line"><span class="lineno">  171</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecpu__io_1_1virtual__memory_a5bc8f484f80076b5c3f5cf419fd24aec_icgraph.png" border="0" usemap="#anamespacecpu__io_1_1virtual__memory_a5bc8f484f80076b5c3f5cf419fd24aec_icgraph" alt=""/></div>
<map name="anamespacecpu__io_1_1virtual__memory_a5bc8f484f80076b5c3f5cf419fd24aec_icgraph" id="anamespacecpu__io_1_1virtual__memory_a5bc8f484f80076b5c3f5cf419fd24aec_icgraph">
<area shape="rect" title=" " alt="" coords="1041,109,1239,149"/>
<area shape="rect" href="classVirtualMemory.html#a7441d7b32e1941d347851bd3da1ad6fb" title="在页表中查找虚拟地址对应的页表项" alt="" coords="775,51,993,91"/>
<area shape="poly" title=" " alt="" coords="1036,108,973,94,974,89,1037,103"/>
<area shape="rect" href="classVirtualMemory.html#a2889f5a5b3c2b625cb3042e125ed5ac2" title="获取虚拟地址对应的物理地址映射" alt="" coords="520,5,725,31"/>
<area shape="poly" title=" " alt="" coords="1102,102,1052,69,992,42,925,26,855,16,787,13,726,13,726,8,787,8,855,11,926,20,994,37,1055,64,1105,98"/>
<area shape="rect" href="classVirtualMemory.html#acbbc8c7f29e2611d4b56003323473e3d" title="映射单个页面" alt="" coords="530,112,715,137"/>
<area shape="poly" title=" " alt="" coords="1028,130,715,128,715,123,1028,125"/>
<area shape="rect" href="classVirtualMemory.html#acd2f1fff14fc36c984c7edbbabf95b0b" title="递归复制页表" alt="" coords="789,190,979,230"/>
<area shape="poly" title=" " alt="" coords="1064,155,948,193,947,187,1063,150"/>
<area shape="rect" href="classVirtualMemory.html#a5d99f94ac5108601c7ea895ad52f6c33" title="递归释放页表" alt="" coords="789,278,979,318"/>
<area shape="poly" title=" " alt="" coords="1107,160,1055,201,995,244,930,280,927,276,992,240,1052,197,1104,156"/>
<area shape="poly" title=" " alt="" coords="772,51,685,33,686,28,773,46"/>
<area shape="poly" title=" " alt="" coords="773,97,686,115,685,109,772,91"/>
<area shape="rect" href="classVirtualMemory.html#af6bc99b477b9a096c0fcb846a6ef874a" title="取消映射单个页面" alt="" coords="521,59,725,84"/>
<area shape="poly" title=" " alt="" coords="761,74,725,74,725,69,761,69"/>
<area shape="rect" href="classVirtualMemory.html#a19ea83e0f3f85e55b12deec2a20972a2" title="映射设备内存 (MMIO)" alt="" coords="277,112,469,137"/>
<area shape="poly" title=" " alt="" coords="516,127,470,127,470,122,516,122"/>
<area shape="rect" href="classVirtualMemory.html#a0854e9b79bc77a621c7a806d711c52a6" title=" " alt="" coords="5,112,228,137"/>
<area shape="poly" title=" " alt="" coords="263,127,228,127,228,122,263,122"/>
<area shape="poly" title=" " alt="" coords="928,178,912,171,884,169,859,171,844,175,839,181,842,189,836,190,834,180,841,171,858,165,884,163,914,166,930,173"/>
<area shape="rect" href="classVirtualMemory.html#ae654bd2c0980f0bf5b60cce3ff7a7ae3" title="复制页表" alt="" coords="276,226,471,266"/>
<area shape="poly" title=" " alt="" coords="775,220,471,242,470,237,775,215"/>
<area shape="poly" title=" " alt="" coords="928,266,912,259,884,257,859,259,844,263,839,269,842,277,836,278,834,268,841,259,858,253,884,251,914,254,930,261"/>
<area shape="rect" href="classVirtualMemory.html#adf6d48183927262a6c7929493f0c74f5" title="回收页表，释放所有映射和子页表" alt="" coords="519,270,727,310"/>
<area shape="poly" title=" " alt="" coords="775,297,727,296,727,291,775,292"/>
<area shape="poly" title=" " alt="" coords="505,272,471,266,471,261,506,267"/>
</map>
</div>

</div>
</div>
<a id="af3655e31d3c72e1c80b4348cc3e55a71" name="af3655e31d3c72e1c80b4348cc3e55a71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3655e31d3c72e1c80b4348cc3e55a71">&#9670;&#160;</a></span>PhysicalToPageTableEntry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto cpu_io::virtual_memory::PhysicalToPageTableEntry </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>physical_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> -&gt; uint64_t </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00173">173</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  174</span>                {</div>
<div class="line"><span class="lineno">  175</span>  <span class="keywordflow">return</span> (physical_addr &amp; 0x000FFFFFFFFFF000ULL) | (<a class="code hl_variable" href="acpi_8h.html#a773b39d480759f67926cb18ae2219281">flags</a> &amp; 0xFFF) |</div>
<div class="line"><span class="lineno">  176</span>         (<a class="code hl_variable" href="acpi_8h.html#a773b39d480759f67926cb18ae2219281">flags</a> &amp; (1ULL &lt;&lt; 63));</div>
<div class="line"><span class="lineno">  177</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecpu__io_1_1virtual__memory_af3655e31d3c72e1c80b4348cc3e55a71_icgraph.png" border="0" usemap="#anamespacecpu__io_1_1virtual__memory_af3655e31d3c72e1c80b4348cc3e55a71_icgraph" alt=""/></div>
<map name="anamespacecpu__io_1_1virtual__memory_af3655e31d3c72e1c80b4348cc3e55a71_icgraph" id="anamespacecpu__io_1_1virtual__memory_af3655e31d3c72e1c80b4348cc3e55a71_icgraph">
<area shape="rect" title=" " alt="" coords="1036,102,1233,142"/>
<area shape="rect" href="classVirtualMemory.html#a7441d7b32e1941d347851bd3da1ad6fb" title="在页表中查找虚拟地址对应的页表项" alt="" coords="769,45,988,85"/>
<area shape="poly" title=" " alt="" coords="1031,101,968,87,969,82,1032,96"/>
<area shape="rect" href="classVirtualMemory.html#acbbc8c7f29e2611d4b56003323473e3d" title="映射单个页面" alt="" coords="526,108,711,133"/>
<area shape="poly" title=" " alt="" coords="1022,124,711,124,711,118,1022,119"/>
<area shape="rect" href="classVirtualMemory.html#acd2f1fff14fc36c984c7edbbabf95b0b" title="递归复制页表" alt="" coords="783,183,974,223"/>
<area shape="poly" title=" " alt="" coords="1059,149,943,186,942,181,1057,144"/>
<area shape="rect" href="classVirtualMemory.html#a2889f5a5b3c2b625cb3042e125ed5ac2" title="获取虚拟地址对应的物理地址映射" alt="" coords="516,5,721,31"/>
<area shape="poly" title=" " alt="" coords="756,45,690,33,690,28,757,40"/>
<area shape="poly" title=" " alt="" coords="773,90,679,111,678,105,771,85"/>
<area shape="rect" href="classVirtualMemory.html#af6bc99b477b9a096c0fcb846a6ef874a" title="取消映射单个页面" alt="" coords="517,55,721,80"/>
<area shape="poly" title=" " alt="" coords="756,69,721,69,721,64,756,63"/>
<area shape="rect" href="classVirtualMemory.html#a19ea83e0f3f85e55b12deec2a20972a2" title="映射设备内存 (MMIO)" alt="" coords="276,108,468,133"/>
<area shape="poly" title=" " alt="" coords="512,123,468,123,468,118,512,118"/>
<area shape="rect" href="classVirtualMemory.html#a0854e9b79bc77a621c7a806d711c52a6" title=" " alt="" coords="5,108,228,133"/>
<area shape="poly" title=" " alt="" coords="262,123,228,123,228,118,262,118"/>
<area shape="poly" title=" " alt="" coords="922,172,907,165,879,162,854,164,839,169,833,175,836,182,831,184,828,174,836,164,853,159,879,157,908,160,925,167"/>
<area shape="rect" href="classVirtualMemory.html#ae654bd2c0980f0bf5b60cce3ff7a7ae3" title="复制页表" alt="" coords="521,183,716,223"/>
<area shape="poly" title=" " alt="" coords="770,206,716,206,716,201,770,201"/>
</map>
</div>

</div>
</div>
<a id="a34641ac6c78b4598532a2d089c1357b2" name="a34641ac6c78b4598532a2d089c1357b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34641ac6c78b4598532a2d089c1357b2">&#9670;&#160;</a></span>SetPageDirectory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cpu_io::virtual_memory::SetPageDirectory </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>pd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00115">115</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  115</span>                                          {</div>
<div class="line"><span class="lineno">  116</span>  <span class="keyword">auto</span>* env = <a class="code hl_function" href="classtest__env_1_1TestEnvironmentState.html#a562424679984595e70361b0dad2ef96d">test_env::TestEnvironmentState::GetCurrentThreadEnvironment</a>();</div>
<div class="line"><span class="lineno">  117</span>  assert(env &amp;&amp; <span class="stringliteral">&quot;TestEnvironmentState not set for current thread&quot;</span>);</div>
<div class="line"><span class="lineno">  118</span>  <span class="keyword">auto</span>&amp; core = env-&gt;GetCurrentCoreEnv();</div>
<div class="line"><span class="lineno">  119</span>  core.page_directory = pd;</div>
<div class="line"><span class="lineno">  120</span>}</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecpu__io_1_1virtual__memory_a34641ac6c78b4598532a2d089c1357b2_cgraph.png" border="0" usemap="#anamespacecpu__io_1_1virtual__memory_a34641ac6c78b4598532a2d089c1357b2_cgraph" alt=""/></div>
<map name="anamespacecpu__io_1_1virtual__memory_a34641ac6c78b4598532a2d089c1357b2_cgraph" id="anamespacecpu__io_1_1virtual__memory_a34641ac6c78b4598532a2d089c1357b2_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,181,45"/>
<area shape="rect" href="classtest__env_1_1TestEnvironmentState.html#a562424679984595e70361b0dad2ef96d" title="获取当前线程的环境实例指针（供 Mock 层调用）" alt="" coords="229,5,492,45"/>
<area shape="poly" title=" " alt="" coords="182,23,216,23,216,28,182,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecpu__io_1_1virtual__memory_a34641ac6c78b4598532a2d089c1357b2_icgraph.png" border="0" usemap="#anamespacecpu__io_1_1virtual__memory_a34641ac6c78b4598532a2d089c1357b2_icgraph" alt=""/></div>
<map name="anamespacecpu__io_1_1virtual__memory_a34641ac6c78b4598532a2d089c1357b2_icgraph" id="anamespacecpu__io_1_1virtual__memory_a34641ac6c78b4598532a2d089c1357b2_icgraph">
<area shape="rect" title=" " alt="" coords="279,47,455,87"/>
<area shape="rect" href="classVirtualMemory.html#a748bc7300314ff16a55f1f6b9858a41e" title=" " alt="" coords="5,5,231,31"/>
<area shape="poly" title=" " alt="" coords="265,50,182,33,183,28,266,45"/>
<area shape="rect" href="example__environment__test_8cpp.html#af2fc3993a1c7aff8ed4fc97b18be8cbf" title="测试页表操作" alt="" coords="83,55,153,80"/>
<area shape="poly" title=" " alt="" coords="265,70,153,70,153,65,265,65"/>
<area shape="rect" href="task__scheduling__example__test_8cpp.html#ad57feef7ddcebadba347cf382681beda" title="示例：验证页表切换" alt="" coords="83,104,153,129"/>
<area shape="poly" title=" " alt="" coords="266,90,153,113,152,107,265,85"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="acdc8358978b1c0c8af4b8a344cf44bcb" name="acdc8358978b1c0c8af4b8a344cf44bcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdc8358978b1c0c8af4b8a344cf44bcb">&#9670;&#160;</a></span>kExec</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr uint64_t cpu_io::virtual_memory::kExec = 0x400</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00070">70</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>

</div>
</div>
<a id="a287b28e9187a2b1491e7927692616499" name="a287b28e9187a2b1491e7927692616499"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a287b28e9187a2b1491e7927692616499">&#9670;&#160;</a></span>kGlobal</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr uint64_t cpu_io::virtual_memory::kGlobal = 0x100</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00071">71</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>

</div>
</div>
<a id="abdd8c36f28f76a8b48f7b73c815ca5f0" name="abdd8c36f28f76a8b48f7b73c815ca5f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdd8c36f28f76a8b48f7b73c815ca5f0">&#9670;&#160;</a></span>kPageOffsetBits</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr size_t cpu_io::virtual_memory::kPageOffsetBits = 12</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00060">60</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>

</div>
</div>
<a id="a24fb424f54d414703cda572dc076d71a" name="a24fb424f54d414703cda572dc076d71a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24fb424f54d414703cda572dc076d71a">&#9670;&#160;</a></span>kPageSize</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr size_t cpu_io::virtual_memory::kPageSize = 4096</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00058">58</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>

</div>
</div>
<a id="aa477c683e1a30439416431db45bf3b6b" name="aa477c683e1a30439416431db45bf3b6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa477c683e1a30439416431db45bf3b6b">&#9670;&#160;</a></span>kPageTableLevels</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr size_t cpu_io::virtual_memory::kPageTableLevels = 4</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00063">63</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>

</div>
</div>
<a id="a382dae71680c204d9624f2b285ea66b6" name="a382dae71680c204d9624f2b285ea66b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a382dae71680c204d9624f2b285ea66b6">&#9670;&#160;</a></span>kPteAttributeBits</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr size_t cpu_io::virtual_memory::kPteAttributeBits = 12</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00059">59</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>

</div>
</div>
<a id="a68165e4013e416fac212c8d8ee13fbb7" name="a68165e4013e416fac212c8d8ee13fbb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68165e4013e416fac212c8d8ee13fbb7">&#9670;&#160;</a></span>kRead</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr uint64_t cpu_io::virtual_memory::kRead = 0x200</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00069">69</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>

</div>
</div>
<a id="a678c90ef7647e95c7570c9297564d66c" name="a678c90ef7647e95c7570c9297564d66c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a678c90ef7647e95c7570c9297564d66c">&#9670;&#160;</a></span>kUser</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr uint64_t cpu_io::virtual_memory::kUser = 0x4</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00068">68</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>

</div>
</div>
<a id="a11b0ef214253c2315c3bba21f7f5a163" name="a11b0ef214253c2315c3bba21f7f5a163"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11b0ef214253c2315c3bba21f7f5a163">&#9670;&#160;</a></span>kValid</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr uint64_t cpu_io::virtual_memory::kValid = 0x1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00066">66</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>

</div>
</div>
<a id="adeae00b54ad7e3e619c73290e28f5557" name="adeae00b54ad7e3e619c73290e28f5557"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adeae00b54ad7e3e619c73290e28f5557">&#9670;&#160;</a></span>kVpnBits</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr size_t cpu_io::virtual_memory::kVpnBits = 9</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00061">61</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>

</div>
</div>
<a id="a236612843b04c028666e220290f0fc9d" name="a236612843b04c028666e220290f0fc9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a236612843b04c028666e220290f0fc9d">&#9670;&#160;</a></span>kVpnMask</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr size_t cpu_io::virtual_memory::kVpnMask = 0x1FF</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00062">62</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>

</div>
</div>
<a id="a8ca5321f5065ee04ec4e9ce82570ab14" name="a8ca5321f5065ee04ec4e9ce82570ab14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ca5321f5065ee04ec4e9ce82570ab14">&#9670;&#160;</a></span>kWrite</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr uint64_t cpu_io::virtual_memory::kWrite = 0x2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cpu__io_8h_source.html#l00067">67</a> of file <a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacecpu__io.html">cpu_io</a></li><li class="navelem"><a class="el" href="namespacecpu__io_1_1virtual__memory.html">virtual_memory</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
