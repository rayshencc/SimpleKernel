<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SimpleKernel: /root/src/arch/riscv64/arch_main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SimpleKernel<span id="projectnumber">&#160;1.17.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('riscv64_2arch__main_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">arch_main.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>&gt;</code><br />
<code>#include &lt;opensbi_interface.h&gt;</code><br />
<code>#include &lt;cstring&gt;</code><br />
<code>#include &quot;<a class="el" href="arch_8h_source.html">arch.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="basic__info_8hpp_source.html">basic_info.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="kernel__elf_8hpp_source.html">kernel_elf.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="kernel__fdt_8hpp_source.html">kernel_fdt.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="kernel__log_8hpp_source.html">kernel_log.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="per__cpu_8hpp_source.html">per_cpu.hpp</a>&quot;</code><br />
<code>#include &quot;sk_cstdio&quot;</code><br />
<code>#include &quot;<a class="el" href="sk__stdlib_8h_source.html">sk_stdlib.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="virtual__memory_8hpp_source.html">virtual_memory.hpp</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for arch_main.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="riscv64_2arch__main_8cpp__incl.png" border="0" usemap="#a_2root_2src_2arch_2riscv64_2arch__main_8cpp" alt=""/></div>
<map name="a_2root_2src_2arch_2riscv64_2arch__main_8cpp" id="a_2root_2src_2arch_2riscv64_2arch__main_8cpp">
<area shape="rect" title=" " alt="" coords="1333,5,1492,45"/>
<area shape="rect" href="cpu__io_8h.html" title=" " alt="" coords="537,387,613,412"/>
<area shape="poly" title=" " alt="" coords="1333,34,1108,51,830,81,701,101,594,124,553,137,522,150,503,164,497,179,497,254,503,289,517,322,536,352,556,375,552,378,532,355,513,325,497,291,491,254,491,177,499,161,520,146,551,132,593,119,700,96,830,76,1108,46,1333,29"/>
<area shape="rect" title=" " alt="" coords="2412,93,2563,119"/>
<area shape="poly" title=" " alt="" coords="1492,28,1880,51,2135,69,2393,91,2399,91,2398,97,2392,96,2134,74,1880,56,1492,33"/>
<area shape="rect" title=" " alt="" coords="1499,240,1566,265"/>
<area shape="poly" title=" " alt="" coords="1397,47,1373,77,1351,115,1344,134,1341,154,1344,173,1352,190,1369,200,1403,212,1487,237,1485,242,1401,217,1366,205,1348,194,1338,174,1336,154,1339,133,1346,112,1368,74,1392,44"/>
<area shape="rect" href="arch_8h.html" title=" " alt="" coords="393,313,456,339"/>
<area shape="poly" title=" " alt="" coords="1333,30,1118,33,848,43,719,51,607,62,522,77,494,86,477,95,458,117,443,142,433,170,427,198,422,254,424,300,419,300,417,254,421,198,428,168,438,140,453,114,474,91,492,81,521,72,606,57,718,46,848,37,1118,28,1333,24"/>
<area shape="rect" href="basic__info_8hpp.html" title=" " alt="" coords="1119,167,1235,192"/>
<area shape="poly" title=" " alt="" coords="1352,48,1303,68,1256,95,1222,125,1195,157,1191,153,1218,122,1252,91,1301,63,1350,43"/>
<area shape="rect" href="kernel__log_8hpp.html" title=" " alt="" coords="1307,240,1425,265"/>
<area shape="poly" title=" " alt="" coords="1362,48,1331,67,1307,95,1296,120,1293,142,1297,164,1307,191,1321,212,1339,229,1335,233,1316,215,1302,193,1292,166,1288,142,1291,119,1302,92,1327,63,1359,43"/>
<area shape="rect" title=" " alt="" coords="1607,387,1690,412"/>
<area shape="poly" title=" " alt="" coords="1493,30,1689,52,1810,69,1935,91,2054,119,2161,152,2206,171,2246,192,2277,214,2300,239,2306,253,2300,267,2269,286,2211,304,2043,341,1855,372,1704,393,1703,388,1854,367,2042,335,2209,299,2267,281,2296,264,2300,253,2296,241,2274,218,2243,196,2204,176,2159,157,2053,124,1934,97,1809,74,1689,57,1492,36"/>
<area shape="rect" href="kernel__elf_8hpp.html" title=" " alt="" coords="1885,167,1999,192"/>
<area shape="poly" title=" " alt="" coords="1485,43,1661,91,1893,160,1891,165,1660,96,1484,48"/>
<area shape="rect" href="kernel__fdt_8hpp.html" title=" " alt="" coords="2418,167,2533,192"/>
<area shape="poly" title=" " alt="" coords="1492,25,1685,29,1931,39,2171,59,2269,73,2343,91,2375,104,2405,121,2453,156,2450,160,2402,125,2372,109,2341,96,2268,78,2170,64,1931,45,1685,34,1492,30"/>
<area shape="rect" href="per__cpu_8hpp.html" title=" " alt="" coords="747,240,849,265"/>
<area shape="poly" title=" " alt="" coords="1333,34,1234,46,1114,70,1050,88,987,110,926,137,869,169,837,197,814,229,809,226,833,194,866,164,924,132,985,105,1049,83,1113,65,1233,41,1333,29"/>
<area shape="rect" href="sk__stdlib_8h.html" title=" " alt="" coords="1743,167,1835,192"/>
<area shape="poly" title=" " alt="" coords="1478,43,1616,91,1693,125,1757,158,1754,163,1690,130,1614,96,1476,48"/>
<area shape="rect" href="virtual__memory_8hpp.html" title=" " alt="" coords="1451,93,1603,119"/>
<area shape="poly" title=" " alt="" coords="1442,43,1501,83,1498,88,1439,48"/>
<area shape="rect" title=" " alt="" coords="731,460,798,485"/>
<area shape="poly" title=" " alt="" coords="607,410,722,452,720,457,605,415"/>
<area shape="rect" title=" " alt="" coords="537,460,606,485"/>
<area shape="poly" title=" " alt="" coords="577,412,575,447,570,446,572,412"/>
<area shape="rect" title=" " alt="" coords="952,533,1023,559"/>
<area shape="poly" title=" " alt="" coords="587,410,624,447,649,467,676,483,745,509,816,526,883,536,939,540,938,546,882,541,815,531,743,514,674,488,646,471,620,451,583,414"/>
<area shape="rect" title=" " alt="" coords="1274,533,1341,559"/>
<area shape="poly" title=" " alt="" coords="596,410,720,483,767,494,830,505,982,521,1261,540,1260,545,982,527,829,510,766,500,718,488,593,414"/>
<area shape="rect" title=" " alt="" coords="154,533,218,559"/>
<area shape="poly" title=" " alt="" coords="538,407,307,433,196,449,160,456,145,462,140,476,143,491,152,507,165,522,160,525,148,510,138,493,134,475,141,458,159,451,195,444,306,428,537,402"/>
<area shape="rect" title=" " alt="" coords="349,533,413,559"/>
<area shape="poly" title=" " alt="" coords="561,414,409,527,406,523,558,410"/>
<area shape="rect" title=" " alt="" coords="5,533,129,559"/>
<area shape="poly" title=" " alt="" coords="537,407,310,431,197,447,157,455,134,462,117,475,103,490,81,522,77,519,99,487,114,471,131,458,155,450,196,441,310,425,537,401"/>
<area shape="rect" href="test__environment__state_8hpp.html" title=" " alt="" coords="155,460,361,485"/>
<area shape="poly" title=" " alt="" coords="538,412,323,460,322,454,536,407"/>
<area shape="poly" title=" " alt="" coords="361,481,939,537,938,543,361,487"/>
<area shape="poly" title=" " alt="" coords="361,478,1261,539,1260,544,361,484"/>
<area shape="poly" title=" " alt="" coords="248,488,209,526,206,522,244,484"/>
<area shape="poly" title=" " alt="" coords="279,483,350,524,348,529,276,488"/>
<area shape="poly" title=" " alt="" coords="228,488,112,531,110,526,226,483"/>
<area shape="rect" title=" " alt="" coords="243,533,305,559"/>
<area shape="poly" title=" " alt="" coords="263,485,271,520,266,521,258,486"/>
<area shape="poly" title=" " alt="" coords="450,336,539,378,537,383,448,341"/>
<area shape="poly" title=" " alt="" coords="428,339,430,369,438,408,455,450,467,468,482,483,517,501,566,516,627,526,694,534,829,541,938,543,938,548,829,547,693,539,626,532,565,521,515,506,479,487,463,471,450,452,433,410,425,369,422,339"/>
<area shape="poly" title=" " alt="" coords="433,338,475,417,502,458,526,483,559,490,630,498,843,515,1261,540,1260,545,843,520,630,504,558,496,523,488,498,461,470,420,428,340"/>
<area shape="rect" title=" " alt="" coords="316,387,411,412"/>
<area shape="poly" title=" " alt="" coords="417,341,384,378,380,374,413,337"/>
<area shape="poly" title=" " alt="" coords="1153,195,1119,215,1082,244,1052,281,1044,302,1041,325,1041,401,1037,435,1028,468,1003,522,999,520,1023,466,1032,434,1035,401,1035,324,1039,300,1048,278,1078,240,1116,210,1151,190"/>
<area shape="poly" title=" " alt="" coords="1179,192,1182,255,1188,297,1198,338,1219,391,1245,442,1294,521,1289,523,1240,445,1214,393,1193,339,1183,298,1177,256,1174,192"/>
<area shape="poly" title=" " alt="" coords="1208,190,1323,232,1321,237,1206,195"/>
<area shape="rect" href="singleton_8hpp.html" title=" " alt="" coords="1807,313,1917,339"/>
<area shape="poly" title=" " alt="" coords="1236,187,1331,207,1438,238,1463,251,1488,263,1570,284,1637,294,1706,300,1793,310,1792,316,1705,305,1636,299,1569,290,1486,268,1461,255,1436,242,1330,212,1235,192"/>
<area shape="rect" title=" " alt="" coords="1207,313,1309,339"/>
<area shape="poly" title=" " alt="" coords="1186,191,1247,300,1242,303,1181,194"/>
<area shape="poly" title=" " alt="" coords="1366,266,1315,520,1310,519,1361,265"/>
<area shape="rect" title=" " alt="" coords="1075,313,1131,339"/>
<area shape="poly" title=" " alt="" coords="1324,268,1145,316,1144,311,1323,263"/>
<area shape="rect" title=" " alt="" coords="1712,313,1783,339"/>
<area shape="poly" title=" " alt="" coords="1425,261,1699,310,1698,316,1424,266"/>
<area shape="rect" title=" " alt="" coords="1564,313,1688,339"/>
<area shape="poly" title=" " alt="" coords="1408,263,1571,307,1570,312,1407,268"/>
<area shape="poly" title=" " alt="" coords="1425,260,1444,263,1793,310,1793,316,1443,268,1424,265"/>
<area shape="poly" title=" " alt="" coords="1395,263,1502,311,1620,377,1617,382,1499,316,1393,268"/>
<area shape="poly" title=" " alt="" coords="1350,268,1289,308,1286,303,1347,263"/>
<area shape="rect" href="spinlock_8hpp.html" title=" " alt="" coords="1385,313,1489,339"/>
<area shape="poly" title=" " alt="" coords="1380,264,1418,302,1414,306,1376,268"/>
<area shape="poly" title=" " alt="" coords="1384,335,1322,341,627,397,627,392,1322,336,1384,330"/>
<area shape="poly" title=" " alt="" coords="1385,341,812,464,811,459,1384,336"/>
<area shape="poly" title=" " alt="" coords="1414,341,1024,530,1022,525,1412,336"/>
<area shape="poly" title=" " alt="" coords="1472,336,1602,380,1601,385,1470,341"/>
<area shape="rect" title=" " alt="" coords="1503,387,1583,412"/>
<area shape="poly" title=" " alt="" coords="1455,336,1516,377,1513,381,1452,341"/>
<area shape="rect" title=" " alt="" coords="1421,387,1479,412"/>
<area shape="poly" title=" " alt="" coords="1441,339,1448,373,1443,374,1436,339"/>
<area shape="rect" href="expected_8hpp.html" title=" " alt="" coords="2055,387,2165,412"/>
<area shape="poly" title=" " alt="" coords="1489,330,2041,388,2041,393,1489,335"/>
<area shape="poly" title=" " alt="" coords="2113,412,2110,450,2103,470,2089,487,2073,496,2047,504,1972,517,1760,534,1529,543,1354,547,1354,542,1528,538,1760,529,1971,511,2046,499,2071,491,2086,483,2098,468,2105,448,2108,412"/>
<area shape="rect" title=" " alt="" coords="1993,460,2075,485"/>
<area shape="poly" title=" " alt="" coords="2100,414,2058,452,2055,449,2096,410"/>
<area shape="poly" title=" " alt="" coords="1938,193,1928,215,1921,240,1919,260,1923,276,1933,313,1936,327,1932,340,1906,367,1869,392,1824,414,1771,434,1648,468,1510,494,1370,515,1237,529,1037,545,1037,539,1236,524,1369,509,1510,489,1647,463,1769,429,1822,409,1867,387,1903,363,1928,337,1930,327,1927,314,1918,277,1914,261,1915,240,1923,213,1933,191"/>
<area shape="poly" title=" " alt="" coords="1939,193,1927,227,1926,246,1932,264,1946,275,1974,289,2055,324,2136,358,2165,373,2180,385,2187,404,2186,421,2178,437,2166,452,2138,475,2115,488,2069,500,1990,511,1770,528,1355,546,1355,541,1770,522,1989,505,2068,495,2113,483,2135,470,2162,448,2173,434,2181,420,2182,404,2176,388,2162,377,2134,363,2053,328,1972,294,1943,279,1928,267,1921,247,1922,226,1933,191"/>
<area shape="poly" title=" " alt="" coords="1886,193,1580,246,1579,241,1885,188"/>
<area shape="poly" title=" " alt="" coords="1886,190,1439,245,1438,240,1885,185"/>
<area shape="poly" title=" " alt="" coords="1998,190,2037,201,2070,218,2083,228,2090,240,2091,253,2084,267,2060,284,2022,298,1932,318,1930,313,2020,293,2057,280,2080,264,2086,252,2085,241,2079,231,2068,222,2035,206,1997,195"/>
<area shape="poly" title=" " alt="" coords="1987,189,2055,211,2085,224,2105,238,2123,262,2131,284,2132,309,2129,339,2121,374,2116,373,2123,338,2127,309,2126,285,2118,264,2101,242,2083,229,2053,216,1985,195"/>
<area shape="rect" title=" " alt="" coords="1942,240,1993,265"/>
<area shape="poly" title=" " alt="" coords="1949,191,1961,226,1956,228,1944,193"/>
<area shape="rect" title=" " alt="" coords="2017,240,2070,265"/>
<area shape="poly" title=" " alt="" coords="1960,190,2017,230,2014,234,1957,194"/>
<area shape="rect" title=" " alt="" coords="2195,240,2286,265"/>
<area shape="poly" title=" " alt="" coords="1991,189,2183,235,2181,240,1989,195"/>
<area shape="poly" title=" " alt="" coords="2478,192,2478,325,2478,401,2476,431,2468,455,2457,474,2441,487,2421,496,2399,501,2347,503,2222,490,2154,485,2087,488,1907,502,1597,519,1036,545,1036,540,1597,513,1907,496,2087,483,2154,479,2222,484,2347,498,2398,496,2420,491,2438,483,2452,470,2463,453,2470,430,2473,401,2473,325,2473,192"/>
<area shape="poly" title=" " alt="" coords="2485,191,2512,247,2524,285,2529,325,2529,401,2528,428,2525,450,2515,469,2495,488,2477,494,2441,500,2327,511,1987,528,1355,546,1354,541,1987,523,2326,506,2440,495,2475,489,2493,483,2511,466,2520,448,2523,427,2523,401,2523,325,2519,286,2507,249,2480,193"/>
<area shape="poly" title=" " alt="" coords="2418,186,2028,207,1488,243,1439,247,1439,241,1487,237,2028,202,2418,181"/>
<area shape="poly" title=" " alt="" coords="2458,194,2389,231,2345,251,2299,268,2200,292,2100,308,1931,325,1931,319,2100,303,2199,287,2297,263,2343,246,2387,226,2455,190"/>
<area shape="poly" title=" " alt="" coords="2461,194,2350,268,2238,332,2145,382,2143,378,2236,327,2347,263,2458,190"/>
<area shape="poly" title=" " alt="" coords="2438,195,2292,239,2291,233,2437,189"/>
<area shape="rect" title=" " alt="" coords="2727,240,2826,265"/>
<area shape="poly" title=" " alt="" coords="2524,189,2715,234,2714,239,2523,195"/>
<area shape="rect" title=" " alt="" coords="2851,240,2919,265"/>
<area shape="poly" title=" " alt="" coords="2533,186,2668,207,2838,237,2837,243,2667,212,2532,191"/>
<area shape="rect" title=" " alt="" coords="2564,240,2619,265"/>
<area shape="poly" title=" " alt="" coords="2495,190,2562,230,2559,235,2493,194"/>
<area shape="rect" title=" " alt="" coords="2643,240,2703,265"/>
<area shape="poly" title=" " alt="" coords="2508,190,2630,233,2629,238,2506,195"/>
<area shape="poly" title=" " alt="" coords="747,263,648,283,605,297,579,315,572,328,569,343,571,373,566,373,564,342,567,326,575,312,603,293,647,278,746,258"/>
<area shape="poly" title=" " alt="" coords="747,258,714,264,680,274,648,290,623,315,614,335,615,354,625,373,640,392,683,426,728,452,726,456,680,430,637,396,620,376,610,355,609,334,618,312,645,286,678,269,713,258,747,253"/>
<area shape="poly" title=" " alt="" coords="804,264,828,329,847,370,870,411,919,473,966,522,963,526,915,477,865,413,842,373,823,331,799,266"/>
<area shape="poly" title=" " alt="" coords="819,263,1276,524,1274,529,817,268"/>
<area shape="poly" title=" " alt="" coords="848,263,1062,312,1061,318,846,268"/>
<area shape="poly" title=" " alt="" coords="849,252,1237,267,1510,284,1793,311,1793,316,1510,290,1237,273,849,258"/>
<area shape="rect" title=" " alt="" coords="633,313,707,339"/>
<area shape="poly" title=" " alt="" coords="779,268,704,309,702,304,776,263"/>
<area shape="rect" title=" " alt="" coords="732,313,797,339"/>
<area shape="poly" title=" " alt="" coords="795,267,778,302,773,300,790,265"/>
<area shape="rect" title=" " alt="" coords="1742,240,1817,265"/>
<area shape="poly" title=" " alt="" coords="1790,193,1785,227,1780,226,1784,192"/>
<area shape="poly" title=" " alt="" coords="1451,112,1331,116,1191,126,1061,143,1008,155,970,169,940,187,919,207,890,252,862,298,840,320,811,341,765,363,716,379,627,396,626,391,715,374,763,358,809,336,837,316,857,294,886,249,915,204,937,183,967,164,1007,150,1060,138,1191,121,1331,111,1451,106"/>
<area shape="poly" title=" " alt="" coords="1451,114,1316,127,1239,138,1164,153,1096,171,1040,193,1019,206,1003,220,993,235,990,252,990,401,990,520,985,520,985,401,985,251,988,233,999,217,1016,202,1038,189,1094,166,1163,147,1239,133,1316,122,1451,109"/>
<area shape="poly" title=" " alt="" coords="1540,117,1620,195,1667,237,1703,263,1742,276,1787,282,1875,285,1911,288,1935,295,1943,303,1945,313,1932,340,1904,374,1873,404,1838,430,1801,453,1720,490,1637,516,1554,533,1476,543,1355,549,1355,543,1476,538,1553,528,1635,511,1719,485,1798,449,1835,426,1869,400,1900,370,1928,337,1939,312,1938,305,1933,300,1910,293,1875,290,1786,288,1741,281,1701,268,1663,241,1616,199,1537,121"/>
<area shape="poly" title=" " alt="" coords="1530,119,1534,226,1529,226,1525,119"/>
<area shape="poly" title=" " alt="" coords="1472,121,1247,167,1246,161,1470,116"/>
<area shape="poly" title=" " alt="" coords="1525,120,1508,156,1479,194,1446,219,1411,237,1409,232,1443,214,1475,190,1503,153,1520,118"/>
<area shape="poly" title=" " alt="" coords="1534,118,1548,148,1569,187,1599,228,1637,263,1664,276,1703,289,1794,310,1792,315,1702,294,1662,281,1634,268,1595,232,1565,190,1543,150,1529,120"/>
<area shape="poly" title=" " alt="" coords="1577,116,1627,135,1652,148,1675,165,1694,191,1703,217,1711,241,1719,252,1732,263,1763,282,1792,292,1820,295,1847,296,1905,295,1938,300,1975,311,2036,342,2086,376,2083,380,2034,347,1973,316,1937,305,1905,300,1847,301,1819,301,1791,297,1761,287,1728,267,1715,256,1707,243,1698,218,1690,193,1671,169,1649,153,1625,140,1576,121"/>
<area shape="poly" title=" " alt="" coords="1604,109,1791,126,1902,142,2012,164,2118,197,2205,232,2203,237,2116,202,2011,169,1901,147,1790,131,1603,114"/>
<area shape="poly" title=" " alt="" coords="1570,116,1734,160,1732,166,1569,121"/>
<area shape="rect" title=" " alt="" coords="1361,167,1464,192"/>
<area shape="poly" title=" " alt="" coords="1510,121,1444,162,1442,157,1508,116"/>
</map>
</div>
</div>
<p><a href="riscv64_2arch__main_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa26c42c34bbb6c8c7cd4a8664dc7952f" id="r_aa26c42c34bbb6c8c7cd4a8664dc7952f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="riscv64_2arch__main_8cpp.html#aa26c42c34bbb6c8c7cd4a8664dc7952f">ArchInit</a> (int argc, const char **argv)</td></tr>
<tr class="separator:aa26c42c34bbb6c8c7cd4a8664dc7952f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad90b12c5e1b1a5911044c7c1286289da" id="r_ad90b12c5e1b1a5911044c7c1286289da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="riscv64_2arch__main_8cpp.html#ad90b12c5e1b1a5911044c7c1286289da">ArchInitSMP</a> (int, const char **)</td></tr>
<tr class="separator:ad90b12c5e1b1a5911044c7c1286289da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94c31dc3a1de17229bc6863fff8eddd7" id="r_a94c31dc3a1de17229bc6863fff8eddd7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="riscv64_2arch__main_8cpp.html#a94c31dc3a1de17229bc6863fff8eddd7">WakeUpOtherCores</a> ()</td></tr>
<tr class="separator:a94c31dc3a1de17229bc6863fff8eddd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13c92ba83f807779913f45bc9ac404b0" id="r_a13c92ba83f807779913f45bc9ac404b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="riscv64_2arch__main_8cpp.html#a13c92ba83f807779913f45bc9ac404b0">InitTaskContext</a> (<a class="el" href="structcpu__io_1_1CalleeSavedContext.html">cpu_io::CalleeSavedContext</a> *task_context, void(*<a class="el" href="acpi_8h.html#a9f4b9757ed06b7cffea1bd7b35f6c093">entry</a>)(void *), void *arg, uint64_t stack_top)</td></tr>
<tr class="separator:a13c92ba83f807779913f45bc9ac404b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68bd5f23f249b2c277d460dc2e2ee47a" id="r_a68bd5f23f249b2c277d460dc2e2ee47a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="riscv64_2arch__main_8cpp.html#a68bd5f23f249b2c277d460dc2e2ee47a">InitTaskContext</a> (<a class="el" href="structcpu__io_1_1CalleeSavedContext.html">cpu_io::CalleeSavedContext</a> *task_context, <a class="el" href="structcpu__io_1_1TrapContext.html">cpu_io::TrapContext</a> *trap_context_ptr, uint64_t stack_top)</td></tr>
<tr class="separator:a68bd5f23f249b2c277d460dc2e2ee47a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa26c42c34bbb6c8c7cd4a8664dc7952f" name="aa26c42c34bbb6c8c7cd4a8664dc7952f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa26c42c34bbb6c8c7cd4a8664dc7952f">&#9670;&#160;</a></span>ArchInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ArchInit </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>体系结构相关初始化 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>在不同体系结构有不同含义，同 _start </td></tr>
    <tr><td class="paramname">argv</td><td>在不同体系结构有不同含义，同 _start </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="riscv64_2arch__main_8cpp_source.html#l00049">49</a> of file <a class="el" href="riscv64_2arch__main_8cpp_source.html">arch_main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   49</span>                                           {</div>
<div class="line"><span class="lineno">   50</span>  <a class="code hl_function" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton&lt;KernelFdt&gt;::GetInstance</a>() =</div>
<div class="line"><span class="lineno">   51</span>      <a class="code hl_class" href="classKernelFdt.html">KernelFdt</a>(<span class="keyword">reinterpret_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(argv));</div>
<div class="line"><span class="lineno">   52</span> </div>
<div class="line"><span class="lineno">   53</span>  <a class="code hl_function" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton&lt;BasicInfo&gt;::GetInstance</a>() = <a class="code hl_struct" href="structBasicInfo.html">BasicInfo</a>(argc, argv);</div>
<div class="line"><span class="lineno">   54</span>  sk_std::cout &lt;&lt; Singleton&lt;BasicInfo&gt;::GetInstance();</div>
<div class="line"><span class="lineno">   55</span> </div>
<div class="line"><span class="lineno">   56</span>  <span class="comment">// 解析内核 elf 信息</span></div>
<div class="line"><span class="lineno">   57</span>  <a class="code hl_function" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton&lt;KernelElf&gt;::GetInstance</a>() =</div>
<div class="line"><span class="lineno">   58</span>      <a class="code hl_class" href="classKernelElf.html">KernelElf</a>(<a class="code hl_class" href="classSingleton.html">Singleton&lt;BasicInfo&gt;::GetInstance</a>().elf_addr);</div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>  <a class="code hl_struct" href="structklog_1_1Info.html">klog::Info</a>(<span class="stringliteral">&quot;Hello riscv64 ArchInit\n&quot;</span>);</div>
<div class="line"><span class="lineno">   61</span>}</div>
<div class="ttc" id="aclassKernelElf_html"><div class="ttname"><a href="classKernelElf.html">KernelElf</a></div><div class="ttdef"><b>Definition</b> <a href="kernel__elf_8hpp_source.html#l00023">kernel_elf.hpp:23</a></div></div>
<div class="ttc" id="aclassKernelFdt_html"><div class="ttname"><a href="classKernelFdt.html">KernelFdt</a></div><div class="ttdef"><b>Definition</b> <a href="kernel__fdt_8hpp_source.html#l00034">kernel_fdt.hpp:34</a></div></div>
<div class="ttc" id="aclassSingleton_html"><div class="ttname"><a href="classSingleton.html">Singleton</a></div><div class="ttdef"><b>Definition</b> <a href="singleton_8hpp_source.html#l00010">singleton.hpp:10</a></div></div>
<div class="ttc" id="aclassSingleton_html_a68856b49e098eadba37b60366db33ebd"><div class="ttname"><a href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton::GetInstance</a></div><div class="ttdeci">static auto GetInstance() -&gt; T &amp;</div><div class="ttdef"><b>Definition</b> <a href="singleton_8hpp_source.html#l00023">singleton.hpp:23</a></div></div>
<div class="ttc" id="astructBasicInfo_html"><div class="ttname"><a href="structBasicInfo.html">BasicInfo</a></div><div class="ttdef"><b>Definition</b> <a href="basic__info_8hpp_source.html#l00026">basic_info.hpp:26</a></div></div>
<div class="ttc" id="astructklog_1_1Info_html"><div class="ttname"><a href="structklog_1_1Info.html">klog::Info</a></div><div class="ttdef"><b>Definition</b> <a href="kernel__log_8hpp_source.html#l00168">kernel_log.hpp:168</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="riscv64_2arch__main_8cpp_aa26c42c34bbb6c8c7cd4a8664dc7952f_cgraph.png" border="0" usemap="#ariscv64_2arch__main_8cpp_aa26c42c34bbb6c8c7cd4a8664dc7952f_cgraph" alt=""/></div>
<map name="ariscv64_2arch__main_8cpp_aa26c42c34bbb6c8c7cd4a8664dc7952f_cgraph" id="ariscv64_2arch__main_8cpp_aa26c42c34bbb6c8c7cd4a8664dc7952f_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,77,31"/>
<area shape="rect" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd" title=" " alt="" coords="125,5,295,31"/>
<area shape="poly" title=" " alt="" coords="77,15,111,15,111,21,77,21"/>
</map>
</div>

</div>
</div>
<a id="ad90b12c5e1b1a5911044c7c1286289da" name="ad90b12c5e1b1a5911044c7c1286289da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad90b12c5e1b1a5911044c7c1286289da">&#9670;&#160;</a></span>ArchInitSMP()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ArchInitSMP </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="riscv64_2arch__main_8cpp_source.html#l00063">63</a> of file <a class="el" href="riscv64_2arch__main_8cpp_source.html">arch_main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   63</span>{}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a68bd5f23f249b2c277d460dc2e2ee47a" name="a68bd5f23f249b2c277d460dc2e2ee47a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68bd5f23f249b2c277d460dc2e2ee47a">&#9670;&#160;</a></span>InitTaskContext() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InitTaskContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcpu__io_1_1CalleeSavedContext.html">cpu_io::CalleeSavedContext</a> *&#160;</td>
          <td class="paramname"><em>task_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcpu__io_1_1TrapContext.html">cpu_io::TrapContext</a> *&#160;</td>
          <td class="paramname"><em>trap_context_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>stack_top</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>初始化用户线程的任务上下文（重载2） </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task_context</td><td>指向任务上下文的指针 </td></tr>
    <tr><td class="paramname">trap_context_ptr</td><td>指向 Trap 上下文的指针 </td></tr>
    <tr><td class="paramname">stack_top</td><td>内核栈顶地址 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="riscv64_2arch__main_8cpp_source.html#l00087">87</a> of file <a class="el" href="riscv64_2arch__main_8cpp_source.html">arch_main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   89</span>                                         {</div>
<div class="line"><span class="lineno">   90</span>  <span class="comment">// 清零上下文</span></div>
<div class="line"><span class="lineno">   91</span>  std::memset(task_context, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structcpu__io_1_1CalleeSavedContext.html">cpu_io::CalleeSavedContext</a>));</div>
<div class="line"><span class="lineno">   92</span> </div>
<div class="line"><span class="lineno">   93</span>  task_context-&gt;<a class="code hl_function" href="structcpu__io_1_1CalleeSavedContext.html#a4dc21308ff38303ff2484b49c84daa2d">ReturnAddress</a>() =</div>
<div class="line"><span class="lineno">   94</span>      <span class="keyword">reinterpret_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="arch_8h.html#a7241001f2323bd5690c3ee10606fb8c4">kernel_thread_entry</a>);</div>
<div class="line"><span class="lineno">   95</span>  task_context-&gt;<a class="code hl_function" href="structcpu__io_1_1CalleeSavedContext.html#a057438d663910d4cb7abcbb5615397ab">EntryFunction</a>() = <span class="keyword">reinterpret_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="arch_8h.html#acdf04695210228502c6042c9f530faf1">trap_return</a>);</div>
<div class="line"><span class="lineno">   96</span>  task_context-&gt;<a class="code hl_function" href="structcpu__io_1_1CalleeSavedContext.html#a1ae45175010d9b66ef6db82b668baa1d">EntryArgument</a>() = <span class="keyword">reinterpret_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(trap_context_ptr);</div>
<div class="line"><span class="lineno">   97</span>  task_context-&gt;<a class="code hl_function" href="structcpu__io_1_1CalleeSavedContext.html#a90361985987010520dd23face113731f">StackPointer</a>() = stack_top;</div>
<div class="line"><span class="lineno">   98</span>}</div>
<div class="ttc" id="aarch_8h_html_a7241001f2323bd5690c3ee10606fb8c4"><div class="ttname"><a href="arch_8h.html#a7241001f2323bd5690c3ee10606fb8c4">kernel_thread_entry</a></div><div class="ttdeci">void kernel_thread_entry()</div><div class="ttdef"><b>Definition</b> <a href="arch_8cpp_source.html#l00044">arch.cpp:44</a></div></div>
<div class="ttc" id="aarch_8h_html_acdf04695210228502c6042c9f530faf1"><div class="ttname"><a href="arch_8h.html#acdf04695210228502c6042c9f530faf1">trap_return</a></div><div class="ttdeci">void trap_return(void *)</div><div class="ttdef"><b>Definition</b> <a href="arch_8cpp_source.html#l00045">arch.cpp:45</a></div></div>
<div class="ttc" id="astructcpu__io_1_1CalleeSavedContext_html"><div class="ttname"><a href="structcpu__io_1_1CalleeSavedContext.html">cpu_io::CalleeSavedContext</a></div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00194">cpu_io.h:194</a></div></div>
<div class="ttc" id="astructcpu__io_1_1CalleeSavedContext_html_a057438d663910d4cb7abcbb5615397ab"><div class="ttname"><a href="structcpu__io_1_1CalleeSavedContext.html#a057438d663910d4cb7abcbb5615397ab">cpu_io::CalleeSavedContext::EntryFunction</a></div><div class="ttdeci">__always_inline uint64_t &amp; EntryFunction()</div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00203">cpu_io.h:203</a></div></div>
<div class="ttc" id="astructcpu__io_1_1CalleeSavedContext_html_a1ae45175010d9b66ef6db82b668baa1d"><div class="ttname"><a href="structcpu__io_1_1CalleeSavedContext.html#a1ae45175010d9b66ef6db82b668baa1d">cpu_io::CalleeSavedContext::EntryArgument</a></div><div class="ttdeci">__always_inline uint64_t &amp; EntryArgument()</div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00204">cpu_io.h:204</a></div></div>
<div class="ttc" id="astructcpu__io_1_1CalleeSavedContext_html_a4dc21308ff38303ff2484b49c84daa2d"><div class="ttname"><a href="structcpu__io_1_1CalleeSavedContext.html#a4dc21308ff38303ff2484b49c84daa2d">cpu_io::CalleeSavedContext::ReturnAddress</a></div><div class="ttdeci">__always_inline uint64_t &amp; ReturnAddress()</div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00202">cpu_io.h:202</a></div></div>
<div class="ttc" id="astructcpu__io_1_1CalleeSavedContext_html_a90361985987010520dd23face113731f"><div class="ttname"><a href="structcpu__io_1_1CalleeSavedContext.html#a90361985987010520dd23face113731f">cpu_io::CalleeSavedContext::StackPointer</a></div><div class="ttdeci">__always_inline uint64_t &amp; StackPointer()</div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00205">cpu_io.h:205</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="riscv64_2arch__main_8cpp_a68bd5f23f249b2c277d460dc2e2ee47a_cgraph.png" border="0" usemap="#ariscv64_2arch__main_8cpp_a68bd5f23f249b2c277d460dc2e2ee47a_cgraph" alt=""/></div>
<map name="ariscv64_2arch__main_8cpp_a68bd5f23f249b2c277d460dc2e2ee47a_cgraph" id="ariscv64_2arch__main_8cpp_a68bd5f23f249b2c277d460dc2e2ee47a_cgraph">
<area shape="rect" title=" " alt="" coords="5,163,128,189"/>
<area shape="rect" href="structcpu__io_1_1CalleeSavedContext.html#a1ae45175010d9b66ef6db82b668baa1d" title=" " alt="" coords="176,5,380,45"/>
<area shape="poly" title=" " alt="" coords="74,162,113,110,142,81,175,55,185,49,188,53,177,60,145,85,117,114,78,165"/>
<area shape="rect" href="structcpu__io_1_1CalleeSavedContext.html#a057438d663910d4cb7abcbb5615397ab" title=" " alt="" coords="176,69,380,109"/>
<area shape="poly" title=" " alt="" coords="89,161,175,119,195,111,197,116,177,124,92,166"/>
<area shape="rect" href="arch_8cpp.html#a7241001f2323bd5690c3ee10606fb8c4" title=" " alt="" coords="202,134,354,159"/>
<area shape="poly" title=" " alt="" coords="128,165,188,156,189,162,129,170"/>
<area shape="rect" href="structcpu__io_1_1CalleeSavedContext.html#a4dc21308ff38303ff2484b49c84daa2d" title=" " alt="" coords="176,184,380,224"/>
<area shape="poly" title=" " alt="" coords="129,181,163,186,162,191,128,187"/>
<area shape="rect" href="structcpu__io_1_1CalleeSavedContext.html#a90361985987010520dd23face113731f" title=" " alt="" coords="176,248,380,288"/>
<area shape="poly" title=" " alt="" coords="89,186,129,210,177,234,195,241,193,246,175,238,127,214,87,191"/>
<area shape="rect" href="arch_8cpp.html#acdf04695210228502c6042c9f530faf1" title=" " alt="" coords="231,313,325,338"/>
<area shape="poly" title=" " alt="" coords="78,187,116,241,144,272,177,298,218,314,216,319,175,302,141,276,112,245,73,190"/>
</map>
</div>

</div>
</div>
<a id="a13c92ba83f807779913f45bc9ac404b0" name="a13c92ba83f807779913f45bc9ac404b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13c92ba83f807779913f45bc9ac404b0">&#9670;&#160;</a></span>InitTaskContext() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InitTaskContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcpu__io_1_1CalleeSavedContext.html">cpu_io::CalleeSavedContext</a> *&#160;</td>
          <td class="paramname"><em>task_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *)&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>stack_top</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>初始化内核线程的任务上下文（重载1） </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task_context</td><td>指向任务上下文的指针 </td></tr>
    <tr><td class="paramname">entry</td><td>线程入口函数 </td></tr>
    <tr><td class="paramname">arg</td><td>传递给线程的参数 </td></tr>
    <tr><td class="paramname">stack_top</td><td>内核栈顶地址 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="riscv64_2arch__main_8cpp_source.html#l00075">75</a> of file <a class="el" href="riscv64_2arch__main_8cpp_source.html">arch_main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   76</span>                                                                          {</div>
<div class="line"><span class="lineno">   77</span>  <span class="comment">// 清零上下文</span></div>
<div class="line"><span class="lineno">   78</span>  std::memset(task_context, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structcpu__io_1_1CalleeSavedContext.html">cpu_io::CalleeSavedContext</a>));</div>
<div class="line"><span class="lineno">   79</span> </div>
<div class="line"><span class="lineno">   80</span>  task_context-&gt;<a class="code hl_function" href="structcpu__io_1_1CalleeSavedContext.html#a4dc21308ff38303ff2484b49c84daa2d">ReturnAddress</a>() =</div>
<div class="line"><span class="lineno">   81</span>      <span class="keyword">reinterpret_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="arch_8h.html#a7241001f2323bd5690c3ee10606fb8c4">kernel_thread_entry</a>);</div>
<div class="line"><span class="lineno">   82</span>  task_context-&gt;<a class="code hl_function" href="structcpu__io_1_1CalleeSavedContext.html#a057438d663910d4cb7abcbb5615397ab">EntryFunction</a>() = <span class="keyword">reinterpret_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="acpi_8h.html#a9f4b9757ed06b7cffea1bd7b35f6c093">entry</a>);</div>
<div class="line"><span class="lineno">   83</span>  task_context-&gt;<a class="code hl_function" href="structcpu__io_1_1CalleeSavedContext.html#a1ae45175010d9b66ef6db82b668baa1d">EntryArgument</a>() = <span class="keyword">reinterpret_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(arg);</div>
<div class="line"><span class="lineno">   84</span>  task_context-&gt;<a class="code hl_function" href="structcpu__io_1_1CalleeSavedContext.html#a90361985987010520dd23face113731f">StackPointer</a>() = stack_top;</div>
<div class="line"><span class="lineno">   85</span>}</div>
<div class="ttc" id="aacpi_8h_html_a9f4b9757ed06b7cffea1bd7b35f6c093"><div class="ttname"><a href="acpi_8h.html#a9f4b9757ed06b7cffea1bd7b35f6c093">entry</a></div><div class="ttdeci">uint32_t * entry</div><div class="ttdef"><b>Definition</b> <a href="acpi_8h_source.html#l00001">acpi.h:1</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="riscv64_2arch__main_8cpp_a13c92ba83f807779913f45bc9ac404b0_cgraph.png" border="0" usemap="#ariscv64_2arch__main_8cpp_a13c92ba83f807779913f45bc9ac404b0_cgraph" alt=""/></div>
<map name="ariscv64_2arch__main_8cpp_a13c92ba83f807779913f45bc9ac404b0_cgraph" id="ariscv64_2arch__main_8cpp_a13c92ba83f807779913f45bc9ac404b0_cgraph">
<area shape="rect" title=" " alt="" coords="5,134,128,159"/>
<area shape="rect" href="structcpu__io_1_1CalleeSavedContext.html#a1ae45175010d9b66ef6db82b668baa1d" title=" " alt="" coords="176,5,380,45"/>
<area shape="poly" title=" " alt="" coords="78,132,119,94,175,55,188,48,191,53,177,60,122,98,82,136"/>
<area shape="rect" href="structcpu__io_1_1CalleeSavedContext.html#a057438d663910d4cb7abcbb5615397ab" title=" " alt="" coords="176,69,380,109"/>
<area shape="poly" title=" " alt="" coords="114,131,190,110,191,116,115,137"/>
<area shape="rect" href="arch_8cpp.html#a7241001f2323bd5690c3ee10606fb8c4" title=" " alt="" coords="202,134,354,159"/>
<area shape="poly" title=" " alt="" coords="128,144,188,144,188,149,128,149"/>
<area shape="rect" href="structcpu__io_1_1CalleeSavedContext.html#a4dc21308ff38303ff2484b49c84daa2d" title=" " alt="" coords="176,184,380,224"/>
<area shape="poly" title=" " alt="" coords="115,157,191,178,190,183,114,162"/>
<area shape="rect" href="structcpu__io_1_1CalleeSavedContext.html#a90361985987010520dd23face113731f" title=" " alt="" coords="176,248,380,288"/>
<area shape="poly" title=" " alt="" coords="82,157,122,195,177,234,191,240,188,245,175,238,119,199,78,161"/>
</map>
</div>

</div>
</div>
<a id="a94c31dc3a1de17229bc6863fff8eddd7" name="a94c31dc3a1de17229bc6863fff8eddd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94c31dc3a1de17229bc6863fff8eddd7">&#9670;&#160;</a></span>WakeUpOtherCores()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WakeUpOtherCores </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>唤醒其余 core </p>

<p class="definition">Definition at line <a class="el" href="riscv64_2arch__main_8cpp_source.html#l00065">65</a> of file <a class="el" href="riscv64_2arch__main_8cpp_source.html">arch_main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   65</span>                        {</div>
<div class="line"><span class="lineno">   66</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; Singleton&lt;BasicInfo&gt;::GetInstance().core_count; i++) {</div>
<div class="line"><span class="lineno">   67</span>    <span class="keyword">auto</span> ret = sbi_hart_start(i, <span class="keyword">reinterpret_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="basic__info_8hpp.html#a698036b5e342c2164fb7fd7249d0e801">_boot</a>), 0);</div>
<div class="line"><span class="lineno">   68</span>    <span class="keywordflow">if</span> ((ret.error != SBI_SUCCESS) &amp;&amp;</div>
<div class="line"><span class="lineno">   69</span>        (ret.error != SBI_ERR_ALREADY_AVAILABLE)) {</div>
<div class="line"><span class="lineno">   70</span>      <a class="code hl_struct" href="structklog_1_1Warn.html">klog::Warn</a>(<span class="stringliteral">&quot;hart %d start failed: %d\n&quot;</span>, i, ret.error);</div>
<div class="line"><span class="lineno">   71</span>    }</div>
<div class="line"><span class="lineno">   72</span>  }</div>
<div class="line"><span class="lineno">   73</span>}</div>
<div class="ttc" id="abasic__info_8hpp_html_a698036b5e342c2164fb7fd7249d0e801"><div class="ttname"><a href="basic__info_8hpp.html#a698036b5e342c2164fb7fd7249d0e801">_boot</a></div><div class="ttdeci">void _boot()</div><div class="ttdoc">内核入口，在 boot.S 中定义</div></div>
<div class="ttc" id="astructklog_1_1Warn_html"><div class="ttname"><a href="structklog_1_1Warn.html">klog::Warn</a></div><div class="ttdef"><b>Definition</b> <a href="kernel__log_8hpp_source.html#l00178">kernel_log.hpp:178</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="riscv64_2arch__main_8cpp_a94c31dc3a1de17229bc6863fff8eddd7_cgraph.png" border="0" usemap="#ariscv64_2arch__main_8cpp_a94c31dc3a1de17229bc6863fff8eddd7_cgraph" alt=""/></div>
<map name="ariscv64_2arch__main_8cpp_a94c31dc3a1de17229bc6863fff8eddd7_cgraph" id="ariscv64_2arch__main_8cpp_a94c31dc3a1de17229bc6863fff8eddd7_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,153,31"/>
<area shape="rect" href="basic__info_8hpp.html#a698036b5e342c2164fb7fd7249d0e801" title="内核入口，在 boot.S 中定义" alt="" coords="201,5,260,31"/>
<area shape="poly" title=" " alt="" coords="154,15,188,15,188,21,154,21"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_70d5e250c66d001b18da37689179cade.html">arch</a></li><li class="navelem"><a class="el" href="dir_cb2d47c5135f3548db9b88a74bfd0d69.html">riscv64</a></li><li class="navelem"><a class="el" href="riscv64_2arch__main_8cpp.html">arch_main.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
