<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SimpleKernel: /root/src/arch/riscv64/interrupt_main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SimpleKernel<span id="projectnumber">&#160;1.17.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('riscv64_2interrupt__main_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">interrupt_main.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="arch_8h_source.html">arch.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="basic__info_8hpp_source.html">basic_info.hpp</a>&quot;</code><br />
<code>#include &quot;interrupt.h&quot;</code><br />
<code>#include &quot;<a class="el" href="kernel__fdt_8hpp_source.html">kernel_fdt.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="kernel__log_8hpp_source.html">kernel_log.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ns16550a_8h_source.html">ns16550a.h</a>&quot;</code><br />
<code>#include &quot;opensbi_interface.h&quot;</code><br />
<code>#include &quot;sk_cstdio&quot;</code><br />
<code>#include &quot;sk_iostream&quot;</code><br />
<code>#include &quot;<a class="el" href="syscall_8hpp_source.html">syscall.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="task__manager_8hpp_source.html">task_manager.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="virtual__memory_8hpp_source.html">virtual_memory.hpp</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for interrupt_main.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="riscv64_2interrupt__main_8cpp__incl.png" border="0" usemap="#a_2root_2src_2arch_2riscv64_2interrupt__main_8cpp" alt=""/></div>
<map name="a_2root_2src_2arch_2riscv64_2interrupt__main_8cpp" id="a_2root_2src_2arch_2riscv64_2interrupt__main_8cpp">
<area shape="rect" title=" " alt="" coords="2594,5,2753,45"/>
<area shape="rect" href="cpu__io_8h.html" title=" " alt="" coords="627,387,703,412"/>
<area shape="poly" title=" " alt="" coords="2594,31,2121,44,1790,58,1438,79,1098,106,941,123,800,142,677,163,576,187,502,213,477,227,459,242,445,259,442,268,445,272,458,275,502,284,532,294,565,311,609,343,646,375,642,379,606,347,563,316,530,299,501,289,456,280,443,276,436,269,441,256,455,238,474,223,500,209,575,182,676,158,799,137,941,118,1097,101,1438,73,1790,53,2121,39,2594,25"/>
<area shape="rect" href="arch_8h.html" title=" " alt="" coords="318,313,381,339"/>
<area shape="poly" title=" " alt="" coords="2593,29,2087,28,1355,34,993,42,681,54,455,72,385,83,351,96,333,116,322,141,317,168,317,197,327,254,342,300,337,301,322,255,312,198,312,168,317,139,329,113,348,91,384,78,454,67,681,49,993,37,1355,29,2087,23,2593,24"/>
<area shape="rect" href="basic__info_8hpp.html" title=" " alt="" coords="2615,167,2731,192"/>
<area shape="poly" title=" " alt="" coords="2676,46,2676,153,2671,153,2671,46"/>
<area shape="rect" href="kernel__log_8hpp.html" title=" " alt="" coords="2365,240,2483,265"/>
<area shape="poly" title=" " alt="" coords="2660,47,2600,115,2560,156,2518,194,2458,235,2455,231,2514,190,2557,152,2597,111,2656,44"/>
<area shape="rect" title=" " alt="" coords="2451,387,2533,412"/>
<area shape="poly" title=" " alt="" coords="2753,28,2932,47,3034,64,3130,87,3210,117,3242,136,3266,157,3280,181,3285,207,3277,236,3257,267,3235,287,3206,304,3129,334,3034,356,2927,373,2818,385,2713,393,2547,400,2547,395,2712,388,2817,380,2926,368,3032,351,3127,329,3204,300,3232,282,3253,264,3272,234,3279,207,3275,183,3261,160,3239,140,3208,122,3128,92,3033,69,2931,52,2753,34"/>
<area shape="rect" title=" " alt="" coords="2659,313,2762,339"/>
<area shape="poly" title=" " alt="" coords="2689,44,2720,97,2735,131,2747,166,2750,203,2745,240,2725,302,2720,300,2740,239,2745,203,2741,167,2730,133,2715,100,2684,47"/>
<area shape="rect" title=" " alt="" coords="3455,93,3545,119"/>
<area shape="poly" title=" " alt="" coords="2753,28,3052,49,3244,67,3441,91,3441,96,3243,72,3051,54,2753,33"/>
<area shape="rect" href="kernel__fdt_8hpp.html" title=" " alt="" coords="2807,167,2921,192"/>
<area shape="poly" title=" " alt="" coords="2714,43,2752,65,2790,91,2823,123,2849,154,2845,158,2819,127,2786,95,2749,69,2711,48"/>
<area shape="rect" href="ns16550a_8h.html" title=" " alt="" coords="3333,93,3430,119"/>
<area shape="poly" title=" " alt="" coords="2753,31,3003,54,3314,91,3319,91,3318,97,3313,96,3003,60,2753,36"/>
<area shape="rect" title=" " alt="" coords="3570,93,3721,119"/>
<area shape="poly" title=" " alt="" coords="2753,29,3097,51,3557,91,3556,96,3097,57,2753,34"/>
<area shape="rect" href="syscall_8hpp.html" title=" " alt="" coords="457,313,551,339"/>
<area shape="poly" title=" " alt="" coords="2594,30,2083,36,1348,49,681,69,464,82,401,89,375,96,359,115,348,135,342,155,340,176,351,218,376,264,389,280,406,293,444,310,442,315,403,297,385,284,371,267,346,220,335,176,336,154,343,133,354,112,372,91,400,83,463,76,680,64,1348,44,2083,31,2594,25"/>
<area shape="rect" href="task__manager_8hpp.html" title=" " alt="" coords="1161,167,1303,192"/>
<area shape="poly" title=" " alt="" coords="2594,38,1317,172,1317,166,2594,32"/>
<area shape="rect" href="virtual__memory_8hpp.html" title=" " alt="" coords="2160,93,2312,119"/>
<area shape="poly" title=" " alt="" coords="2594,44,2313,94,2312,88,2593,38"/>
<area shape="rect" title=" " alt="" coords="904,460,971,485"/>
<area shape="poly" title=" " alt="" coords="704,408,892,457,890,462,703,413"/>
<area shape="rect" title=" " alt="" coords="659,460,728,485"/>
<area shape="poly" title=" " alt="" coords="672,411,686,446,681,448,667,413"/>
<area shape="rect" title=" " alt="" coords="902,533,973,559"/>
<area shape="poly" title=" " alt="" coords="683,410,733,444,799,483,895,526,892,531,796,488,730,449,680,414"/>
<area shape="rect" title=" " alt="" coords="1441,533,1508,559"/>
<area shape="poly" title=" " alt="" coords="691,410,779,447,835,466,893,483,1044,511,1196,528,1329,538,1428,541,1428,547,1329,543,1195,533,1044,516,891,488,833,472,777,452,689,415"/>
<area shape="rect" title=" " alt="" coords="5,533,69,559"/>
<area shape="poly" title=" " alt="" coords="627,404,511,406,357,415,208,432,147,446,104,462,87,474,73,490,51,522,47,519,69,486,84,470,101,458,146,440,207,427,357,409,511,401,627,398"/>
<area shape="rect" title=" " alt="" coords="460,533,524,559"/>
<area shape="poly" title=" " alt="" coords="653,415,518,527,514,523,649,410"/>
<area shape="rect" title=" " alt="" coords="94,533,218,559"/>
<area shape="poly" title=" " alt="" coords="627,405,502,410,339,421,192,438,141,449,115,462,109,475,112,491,122,507,134,522,130,525,117,510,107,493,104,475,111,458,139,444,191,433,338,416,501,405,627,399"/>
<area shape="rect" href="test__environment__state_8hpp.html" title=" " alt="" coords="125,460,331,485"/>
<area shape="poly" title=" " alt="" coords="628,409,312,460,312,455,627,404"/>
<area shape="poly" title=" " alt="" coords="331,482,889,537,888,542,330,487"/>
<area shape="poly" title=" " alt="" coords="331,477,1427,539,1427,545,331,483"/>
<area shape="poly" title=" " alt="" coords="198,488,82,531,80,526,196,483"/>
<area shape="poly" title=" " alt="" coords="271,483,447,530,446,535,270,488"/>
<area shape="poly" title=" " alt="" coords="218,488,179,526,176,522,214,484"/>
<area shape="rect" title=" " alt="" coords="242,533,305,559"/>
<area shape="poly" title=" " alt="" coords="238,484,261,520,256,523,233,487"/>
<area shape="poly" title=" " alt="" coords="381,332,614,384,613,389,380,337"/>
<area shape="poly" title=" " alt="" coords="352,339,353,369,360,408,375,450,387,468,401,483,427,494,475,504,611,520,888,540,888,545,611,525,474,509,426,499,399,488,383,471,370,452,355,410,348,369,346,339"/>
<area shape="poly" title=" " alt="" coords="364,337,402,368,459,409,528,450,603,483,677,500,775,513,1014,531,1253,539,1427,542,1427,547,1253,544,1014,536,775,518,676,505,602,488,526,455,456,413,399,372,361,341"/>
<area shape="rect" title=" " alt="" coords="235,387,330,412"/>
<area shape="poly" title=" " alt="" coords="340,341,305,378,301,375,336,337"/>
<area shape="poly" title=" " alt="" coords="2665,194,2629,241,2616,267,2607,291,2598,335,2583,376,2569,395,2547,414,2510,431,2452,447,2284,474,2063,496,1813,513,1320,536,986,546,986,541,1320,531,1813,508,2062,491,2283,469,2451,442,2508,426,2544,410,2565,392,2578,373,2592,334,2602,290,2611,265,2624,239,2661,191"/>
<area shape="poly" title=" " alt="" coords="2668,193,2641,249,2629,286,2624,325,2624,401,2621,412,2613,423,2584,441,2539,458,2481,473,2331,497,2153,515,1965,529,1785,538,1522,546,1522,541,1785,533,1965,524,2153,510,2330,492,2480,467,2538,453,2582,437,2610,419,2616,410,2619,400,2619,324,2624,285,2636,247,2664,191"/>
<area shape="poly" title=" " alt="" coords="2634,195,2478,239,2477,234,2633,189"/>
<area shape="rect" href="singleton_8hpp.html" title=" " alt="" coords="2078,313,2189,339"/>
<area shape="poly" title=" " alt="" coords="2615,191,2494,211,2354,243,2255,276,2172,310,2170,305,2253,271,2353,237,2493,205,2614,186"/>
<area shape="poly" title=" " alt="" coords="2679,192,2707,299,2702,301,2674,193"/>
<area shape="poly" title=" " alt="" coords="2434,264,2451,299,2453,320,2446,340,2407,388,2366,422,2324,443,2280,455,2180,468,2123,476,2059,488,1907,516,1755,534,1621,543,1522,547,1522,541,1620,538,1754,529,1906,511,2058,483,2122,470,2179,463,2279,450,2322,438,2364,417,2403,385,2442,337,2448,320,2445,301,2430,267"/>
<area shape="rect" title=" " alt="" coords="915,387,971,412"/>
<area shape="poly" title=" " alt="" coords="2365,260,2033,279,1810,296,1583,316,1237,358,985,394,984,389,1237,353,1582,311,1809,290,2032,274,2365,254"/>
<area shape="rect" title=" " alt="" coords="2213,313,2283,339"/>
<area shape="poly" title=" " alt="" coords="2397,268,2291,310,2289,306,2395,263"/>
<area shape="rect" title=" " alt="" coords="2307,313,2431,339"/>
<area shape="poly" title=" " alt="" coords="2417,267,2389,304,2384,301,2413,264"/>
<area shape="poly" title=" " alt="" coords="2378,268,2194,313,2193,307,2377,263"/>
<area shape="poly" title=" " alt="" coords="2445,263,2469,284,2490,312,2498,343,2498,373,2493,373,2493,344,2486,314,2466,287,2441,268"/>
<area shape="poly" title=" " alt="" coords="2471,263,2652,307,2650,313,2469,268"/>
<area shape="rect" href="spinlock_8hpp.html" title=" " alt="" coords="1747,313,1851,339"/>
<area shape="poly" title=" " alt="" coords="2365,263,1864,320,1864,315,2365,258"/>
<area shape="poly" title=" " alt="" coords="1747,340,1735,341,1561,354,1263,371,717,398,717,393,1262,365,1561,348,1734,336,1746,334"/>
<area shape="poly" title=" " alt="" coords="1754,341,1605,377,1418,415,1175,449,985,470,984,464,1174,444,1417,409,1604,372,1753,336"/>
<area shape="poly" title=" " alt="" coords="1764,341,1548,408,1401,449,1250,488,1107,518,987,539,986,534,1106,513,1249,483,1399,444,1546,402,1762,336"/>
<area shape="poly" title=" " alt="" coords="1851,330,2437,390,2437,395,1851,335"/>
<area shape="rect" title=" " alt="" coords="1736,387,1816,412"/>
<area shape="poly" title=" " alt="" coords="1797,340,1786,374,1781,373,1792,338"/>
<area shape="rect" href="expected_8hpp.html" title=" " alt="" coords="1841,387,1951,412"/>
<area shape="poly" title=" " alt="" coords="1816,337,1870,376,1867,380,1813,341"/>
<area shape="poly" title=" " alt="" coords="1906,411,1922,447,1924,468,1915,487,1887,507,1846,522,1795,533,1737,540,1619,548,1522,548,1522,543,1619,542,1737,535,1794,527,1845,517,1885,502,1911,484,1918,467,1917,448,1901,413"/>
<area shape="rect" title=" " alt="" coords="1819,460,1901,485"/>
<area shape="poly" title=" " alt="" coords="1892,414,1874,449,1870,446,1888,411"/>
<area shape="poly" title=" " alt="" coords="2865,193,2860,222,2849,262,2830,304,2802,341,2774,363,2748,378,2722,388,2697,394,2643,401,2577,415,2425,458,2358,474,2271,488,2151,501,1992,512,1611,529,986,546,986,541,1611,524,1992,506,2151,495,2270,483,2357,468,2424,453,2575,409,2642,396,2696,388,2721,383,2745,373,2771,359,2798,337,2826,301,2844,260,2855,221,2860,192"/>
<area shape="poly" title=" " alt="" coords="2922,179,3007,184,3106,194,3196,211,3231,223,3256,238,3273,257,3281,277,3283,325,3283,401,3278,411,3265,420,3217,435,3143,450,3046,463,2799,486,2507,506,1916,533,1522,546,1522,541,1916,528,2507,501,2798,481,3045,458,3142,444,3215,430,3262,415,3274,407,3277,400,3277,325,3276,278,3269,260,3253,242,3229,228,3195,216,3105,199,3007,189,2921,185"/>
<area shape="poly" title=" " alt="" coords="2807,193,2497,242,2496,237,2806,187"/>
<area shape="poly" title=" " alt="" coords="2819,195,2675,229,2495,268,2351,293,2203,316,2202,311,2350,288,2494,263,2674,224,2818,189"/>
<area shape="poly" title=" " alt="" coords="2860,194,2776,341,2729,356,2647,368,2418,385,2165,395,1965,400,1965,394,2164,390,2418,380,2647,363,2728,351,2773,337,2855,191"/>
<area shape="rect" title=" " alt="" coords="2888,240,2987,265"/>
<area shape="poly" title=" " alt="" coords="2878,190,2917,228,2914,232,2874,194"/>
<area shape="rect" title=" " alt="" coords="3011,240,3079,265"/>
<area shape="poly" title=" " alt="" coords="2894,190,3004,232,3002,237,2892,195"/>
<area shape="rect" title=" " alt="" coords="3103,240,3158,265"/>
<area shape="poly" title=" " alt="" coords="2910,190,3091,237,3090,242,2909,195"/>
<area shape="rect" title=" " alt="" coords="3182,240,3242,265"/>
<area shape="poly" title=" " alt="" coords="2922,188,3033,208,3169,237,3168,242,3032,213,2921,193"/>
<area shape="rect" title=" " alt="" coords="2087,240,2177,265"/>
<area shape="poly" title=" " alt="" coords="2807,189,2191,248,2191,243,2806,184"/>
<area shape="poly" title=" " alt="" coords="3384,119,3384,251,3384,401,3381,436,3373,464,3359,485,3340,500,3318,510,3291,515,3230,514,3083,494,3004,486,2925,488,2715,508,2500,524,2086,542,1740,548,1522,548,1522,543,1740,542,2086,536,2500,518,2715,503,2925,483,3004,481,3083,489,3230,509,3291,509,3316,504,3338,495,3355,481,3368,461,3376,435,3379,401,3379,251,3379,119"/>
<area shape="poly" title=" " alt="" coords="531,336,628,379,625,383,529,341"/>
<area shape="poly" title=" " alt="" coords="506,339,508,369,514,408,528,449,539,468,554,483,578,498,613,509,705,527,804,536,889,541,888,546,804,542,704,532,612,515,576,502,550,487,535,471,523,452,509,410,502,369,501,339"/>
<area shape="poly" title=" " alt="" coords="512,337,531,368,561,409,601,451,623,468,648,483,694,495,775,506,1002,523,1428,541,1427,546,1001,528,775,511,693,500,646,488,620,473,597,455,557,413,527,371,508,340"/>
<area shape="poly" title=" " alt="" coords="1161,183,983,186,764,195,660,202,571,212,504,226,483,233,470,242,465,252,470,264,484,279,499,287,533,292,570,294,590,300,610,311,638,341,657,373,652,375,633,344,606,315,588,304,569,299,532,297,498,292,481,283,466,267,460,252,466,238,480,229,503,221,570,207,660,197,764,189,983,181,1161,178"/>
<area shape="poly" title=" " alt="" coords="1160,182,1055,184,921,192,774,210,700,225,629,243,603,254,578,268,538,279,504,282,474,290,461,300,447,315,419,351,412,365,411,379,419,395,440,417,527,483,555,497,593,508,693,525,799,535,888,540,888,546,799,541,692,530,592,513,553,502,524,488,436,421,415,398,406,380,407,363,415,348,443,312,457,296,472,285,503,277,537,273,576,263,601,249,627,237,699,219,773,205,921,187,1055,178,1160,177"/>
<area shape="poly" title=" " alt="" coords="1304,182,1529,202,1631,218,1665,227,1684,238,1697,255,1698,266,1689,273,1674,276,1631,286,1608,297,1585,315,1545,366,1516,423,1496,477,1483,520,1478,519,1490,475,1511,421,1541,363,1581,311,1605,292,1630,281,1672,271,1687,268,1693,264,1692,257,1681,242,1663,232,1629,223,1529,208,1303,188"/>
<area shape="poly" title=" " alt="" coords="1160,184,1074,187,980,196,897,214,866,227,846,242,842,252,846,264,856,280,868,289,882,297,897,312,918,343,934,373,929,376,913,346,893,315,879,302,865,293,852,283,842,266,837,252,842,238,864,222,895,209,979,191,1074,182,1160,178"/>
<area shape="poly" title=" " alt="" coords="1282,190,1357,210,1440,238,1465,251,1490,263,1733,310,1732,315,1488,268,1463,255,1438,242,1355,215,1281,195"/>
<area shape="poly" title=" " alt="" coords="1304,181,1420,187,1557,198,1685,214,1738,225,1777,238,1806,252,1828,267,1865,312,1881,342,1892,372,1887,374,1877,344,1860,315,1824,271,1804,256,1775,242,1736,230,1685,219,1556,203,1420,192,1304,186"/>
<area shape="rect" title=" " alt="" coords="1043,240,1176,265"/>
<area shape="poly" title=" " alt="" coords="1214,194,1142,235,1140,231,1211,190"/>
<area shape="rect" href="interrupt__base_8h.html" title=" " alt="" coords="1595,313,1723,339"/>
<area shape="poly" title=" " alt="" coords="1304,181,1427,188,1569,199,1691,215,1733,226,1756,238,1763,249,1764,260,1752,279,1730,296,1703,310,1701,305,1727,292,1748,276,1759,259,1758,250,1753,242,1731,231,1690,221,1569,204,1427,193,1303,186"/>
<area shape="rect" href="per__cpu_8hpp.html" title=" " alt="" coords="640,240,741,265"/>
<area shape="poly" title=" " alt="" coords="1161,191,760,243,755,243,754,238,760,237,1160,186"/>
<area shape="rect" href="resource__id_8hpp.html" title=" " alt="" coords="1280,387,1405,412"/>
<area shape="poly" title=" " alt="" coords="1304,177,1399,179,1506,188,1557,196,1601,206,1637,220,1662,238,1672,252,1672,262,1661,269,1643,273,1582,285,1539,297,1489,316,1425,348,1372,381,1369,377,1422,344,1487,311,1538,292,1581,280,1642,267,1659,264,1667,260,1667,254,1658,242,1635,225,1600,211,1556,201,1506,193,1399,185,1304,182"/>
<area shape="rect" href="scheduler__base_8hpp.html" title=" " alt="" coords="867,240,1018,265"/>
<area shape="poly" title=" " alt="" coords="1186,195,1003,239,1002,234,1185,189"/>
<area shape="rect" href="task__control__block_8hpp.html" title=" " alt="" coords="1033,313,1205,339"/>
<area shape="poly" title=" " alt="" coords="1161,184,1077,188,986,197,907,215,877,227,858,242,853,253,858,264,882,280,921,294,1020,312,1019,318,920,299,880,285,854,267,848,253,854,238,875,222,905,210,985,192,1077,183,1160,179"/>
<area shape="rect" title=" " alt="" coords="1200,240,1264,265"/>
<area shape="poly" title=" " alt="" coords="1235,192,1235,226,1229,226,1229,192"/>
<area shape="rect" title=" " alt="" coords="1288,240,1427,265"/>
<area shape="poly" title=" " alt="" coords="1253,190,1326,231,1324,235,1251,194"/>
<area shape="rect" title=" " alt="" coords="1501,240,1648,265"/>
<area shape="poly" title=" " alt="" coords="1288,189,1506,235,1505,240,1287,195"/>
<area shape="rect" title=" " alt="" coords="480,240,565,265"/>
<area shape="poly" title=" " alt="" coords="1161,188,906,207,745,223,584,243,579,243,578,238,584,237,745,218,905,202,1160,182"/>
<area shape="poly" title=" " alt="" coords="1595,335,717,397,717,392,1594,329"/>
<area shape="poly" title=" " alt="" coords="1651,341,1527,487,1495,525,1491,521,1523,484,1647,337"/>
<area shape="poly" title=" " alt="" coords="1698,336,1845,380,1844,385,1696,341"/>
<area shape="poly" title=" " alt="" coords="691,266,672,373,667,373,686,265"/>
<area shape="poly" title=" " alt="" coords="707,264,762,311,786,339,802,362,818,385,843,410,873,433,904,451,901,456,870,437,840,414,814,388,797,365,781,342,758,315,704,268"/>
<area shape="poly" title=" " alt="" coords="701,264,747,327,813,410,869,472,918,522,914,525,865,475,809,414,743,331,697,267"/>
<area shape="poly" title=" " alt="" coords="714,263,791,311,823,339,846,364,869,387,904,410,974,441,1047,467,1122,489,1195,505,1329,528,1428,539,1428,544,1328,533,1194,511,1121,494,1046,472,972,446,901,414,866,391,842,368,820,343,788,315,711,268"/>
<area shape="poly" title=" " alt="" coords="742,262,802,281,863,311,900,342,928,374,924,378,896,346,860,316,800,286,741,268"/>
<area shape="poly" title=" " alt="" coords="742,255,856,263,2064,319,2064,324,856,268,741,260"/>
<area shape="poly" title=" " alt="" coords="1355,411,1457,521,1453,525,1352,414"/>
<area shape="poly" title=" " alt="" coords="1019,263,1142,286,1193,298,1219,311,1231,330,1237,349,1236,367,1231,385,1207,417,1170,447,1125,474,1076,498,987,532,985,527,1074,493,1122,469,1167,443,1203,414,1226,382,1231,366,1231,349,1226,332,1216,315,1191,303,1141,291,1018,268"/>
<area shape="poly" title=" " alt="" coords="1018,263,1123,282,1242,309,1349,344,1391,363,1419,385,1442,417,1459,453,1474,519,1469,520,1453,455,1438,420,1415,389,1388,368,1347,349,1241,314,1122,287,1017,268"/>
<area shape="poly" title=" " alt="" coords="972,263,1078,306,1076,310,970,268"/>
<area shape="poly" title=" " alt="" coords="1046,341,717,393,717,387,1045,336"/>
<area shape="poly" title=" " alt="" coords="1111,341,958,524,954,521,1107,337"/>
<area shape="poly" title=" " alt="" coords="1139,336,1445,524,1443,528,1136,341"/>
<area shape="poly" title=" " alt="" coords="1091,341,985,384,983,379,1089,336"/>
<area shape="poly" title=" " alt="" coords="1155,336,1294,380,1293,385,1154,341"/>
<area shape="poly" title=" " alt="" coords="2167,121,2061,141,1943,169,1864,196,1803,221,1742,246,1661,268,1564,285,1482,294,1342,297,1201,298,1118,304,1022,316,854,350,717,386,716,381,853,345,1021,311,1118,298,1201,293,1342,292,1482,289,1564,280,1659,263,1740,241,1801,217,1862,191,1942,164,2060,136,2166,116"/>
<area shape="poly" title=" " alt="" coords="2162,121,2105,137,2049,163,2026,180,2008,200,1996,224,1992,252,1992,327,1990,380,1979,422,1969,441,1956,457,1914,488,1870,497,1778,506,1507,523,986,546,986,540,1506,517,1778,500,1869,491,1912,483,1952,454,1965,438,1974,420,1984,379,1987,327,1987,251,1991,222,2004,197,2023,176,2047,158,2103,132,2161,116"/>
<area shape="poly" title=" " alt="" coords="2313,109,2373,117,2426,132,2447,143,2459,157,2462,174,2453,194,2434,214,2414,226,2394,232,2373,234,2327,234,2302,236,2274,243,2169,276,2105,299,2068,315,2047,338,2037,361,2027,385,2010,413,1979,456,1962,472,1937,488,1902,500,1856,511,1741,528,1620,539,1522,545,1522,540,1619,534,1740,523,1855,506,1901,495,1935,483,1959,468,1975,453,2006,411,2022,383,2032,359,2043,335,2065,311,2103,294,2167,271,2273,237,2301,231,2327,229,2372,229,2393,227,2412,221,2430,210,2448,190,2457,173,2454,159,2443,148,2424,137,2371,123,2312,114"/>
<area shape="poly" title=" " alt="" coords="2307,116,2602,164,2601,169,2306,121"/>
<area shape="poly" title=" " alt="" coords="2312,112,2421,130,2467,145,2485,154,2497,165,2503,184,2495,204,2479,221,2459,235,2456,231,2475,217,2491,201,2498,184,2492,168,2482,159,2465,150,2420,136,2312,117"/>
<area shape="poly" title=" " alt="" coords="2191,121,2147,140,2126,153,2107,169,2087,192,2074,213,2070,237,2077,264,2090,285,2108,303,2104,307,2086,289,2072,266,2065,237,2069,212,2082,188,2103,165,2123,148,2145,135,2189,116"/>
<area shape="poly" title=" " alt="" coords="2160,119,2051,138,2003,152,1972,169,1952,191,1936,217,1914,273,1903,329,1899,373,1894,373,1898,328,1909,272,1932,214,1948,188,1969,165,2001,147,2049,133,2159,113"/>
<area shape="poly" title=" " alt="" coords="2188,121,2149,139,2133,152,2120,168,2114,182,2114,197,2122,227,2117,228,2109,198,2109,181,2115,165,2129,148,2147,135,2185,116"/>
<area shape="rect" title=" " alt="" coords="2245,167,2347,192"/>
<area shape="poly" title=" " alt="" coords="2248,117,2280,154,2275,158,2244,121"/>
<area shape="rect" title=" " alt="" coords="2372,167,2439,192"/>
<area shape="poly" title=" " alt="" coords="2264,116,2366,159,2364,164,2262,121"/>
<area shape="rect" href="sk__stdlib_8h.html" title=" " alt="" coords="2129,167,2221,192"/>
<area shape="poly" title=" " alt="" coords="2228,121,2196,158,2192,154,2224,117"/>
</map>
</div>
</div>
<p><a href="riscv64_2interrupt__main_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aada1bdd2466a8124b0f271eb7ab5398c" id="r_aada1bdd2466a8124b0f271eb7ab5398c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcpu__io_1_1TrapContext.html">cpu_io::TrapContext</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="riscv64_2interrupt__main_8cpp.html#aada1bdd2466a8124b0f271eb7ab5398c">HandleTrap</a> (<a class="el" href="structcpu__io_1_1TrapContext.html">cpu_io::TrapContext</a> *context)</td></tr>
<tr class="separator:aada1bdd2466a8124b0f271eb7ab5398c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a660e4785391d83bb3aa43f15ae53a530" id="r_a660e4785391d83bb3aa43f15ae53a530"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="riscv64_2interrupt__main_8cpp.html#a660e4785391d83bb3aa43f15ae53a530">InterruptInit</a> (int, const char **)</td></tr>
<tr class="separator:a660e4785391d83bb3aa43f15ae53a530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac31c690eba7c84c9327f9f813d4b3fea" id="r_ac31c690eba7c84c9327f9f813d4b3fea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="riscv64_2interrupt__main_8cpp.html#ac31c690eba7c84c9327f9f813d4b3fea">InterruptInitSMP</a> (int, const char **)</td></tr>
<tr class="separator:ac31c690eba7c84c9327f9f813d4b3fea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aada1bdd2466a8124b0f271eb7ab5398c" name="aada1bdd2466a8124b0f271eb7ab5398c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aada1bdd2466a8124b0f271eb7ab5398c">&#9670;&#160;</a></span>HandleTrap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcpu__io_1_1TrapContext.html">cpu_io::TrapContext</a> * HandleTrap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcpu__io_1_1TrapContext.html">cpu_io::TrapContext</a> *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="riscv64_2interrupt__main_8cpp_source.html#l00115">115</a> of file <a class="el" href="riscv64_2interrupt__main_8cpp_source.html">interrupt_main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  115</span>                                                                     {</div>
<div class="line"><span class="lineno">  116</span>  <a class="code hl_function" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton&lt;Interrupt&gt;::GetInstance</a>().Do(context-&gt;scause, context);</div>
<div class="line"><span class="lineno">  117</span>  <span class="keywordflow">return</span> context;</div>
<div class="line"><span class="lineno">  118</span>}</div>
<div class="ttc" id="aclassSingleton_html_a68856b49e098eadba37b60366db33ebd"><div class="ttname"><a href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton::GetInstance</a></div><div class="ttdeci">static auto GetInstance() -&gt; T &amp;</div><div class="ttdef"><b>Definition</b> <a href="singleton_8hpp_source.html#l00023">singleton.hpp:23</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="riscv64_2interrupt__main_8cpp_aada1bdd2466a8124b0f271eb7ab5398c_cgraph.png" border="0" usemap="#ariscv64_2interrupt__main_8cpp_aada1bdd2466a8124b0f271eb7ab5398c_cgraph" alt=""/></div>
<map name="ariscv64_2interrupt__main_8cpp_aada1bdd2466a8124b0f271eb7ab5398c_cgraph" id="ariscv64_2interrupt__main_8cpp_aada1bdd2466a8124b0f271eb7ab5398c_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,100,31"/>
<area shape="rect" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd" title=" " alt="" coords="148,5,317,31"/>
<area shape="poly" title=" " alt="" coords="100,15,134,15,134,21,100,21"/>
</map>
</div>

</div>
</div>
<a id="a660e4785391d83bb3aa43f15ae53a530" name="a660e4785391d83bb3aa43f15ae53a530"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a660e4785391d83bb3aa43f15ae53a530">&#9670;&#160;</a></span>InterruptInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InterruptInit </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>体系结构相关中断初始化 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>在不同体系结构有不同含义，同 _start </td></tr>
    <tr><td class="paramname">argv</td><td>在不同体系结构有不同含义，同 _start </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="riscv64_2interrupt__main_8cpp_source.html#l00120">120</a> of file <a class="el" href="riscv64_2interrupt__main_8cpp_source.html">interrupt_main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  120</span>                                      {</div>
<div class="line"><span class="lineno">  121</span>  <span class="comment">// 注册中断处理函数</span></div>
<div class="line"><span class="lineno">  122</span>  RegisterInterrupts();</div>
<div class="line"><span class="lineno">  123</span> </div>
<div class="line"><span class="lineno">  124</span>  <span class="comment">// 初始化 plic</span></div>
<div class="line"><span class="lineno">  125</span>  <span class="keyword">auto</span> [plic_addr, plic_size, ndev, context_count] =</div>
<div class="line"><span class="lineno">  126</span>      <a class="code hl_function" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton&lt;KernelFdt&gt;::GetInstance</a>().GetPlic().value();</div>
<div class="line"><span class="lineno">  127</span>  <a class="code hl_function" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton&lt;VirtualMemory&gt;::GetInstance</a>().MapMMIO(plic_addr, plic_size);</div>
<div class="line"><span class="lineno">  128</span>  <a class="code hl_function" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton&lt;Plic&gt;::GetInstance</a>() =</div>
<div class="line"><span class="lineno">  129</span>      std::move(<a class="code hl_class" href="classPlic.html">Plic</a>(plic_addr, ndev, context_count));</div>
<div class="line"><span class="lineno">  130</span> </div>
<div class="line"><span class="lineno">  131</span>  <span class="comment">// 设置 trap vector</span></div>
<div class="line"><span class="lineno">  132</span>  <span class="keyword">auto</span> success =</div>
<div class="line"><span class="lineno">  133</span>      cpu_io::Stvec::SetDirect(<span class="keyword">reinterpret_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="arch_8h.html#ac73d8c3647dca189d5c572ba9c48f471">trap_entry</a>));</div>
<div class="line"><span class="lineno">  134</span>  <span class="keywordflow">if</span> (!success) {</div>
<div class="line"><span class="lineno">  135</span>    <a class="code hl_struct" href="structklog_1_1Err.html">klog::Err</a>(<span class="stringliteral">&quot;Failed to set trap vector\n&quot;</span>);</div>
<div class="line"><span class="lineno">  136</span>  }</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>  <span class="comment">// 开启 Supervisor 中断</span></div>
<div class="line"><span class="lineno">  139</span>  cpu_io::Sstatus::Sie::Set();</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>  <span class="comment">// 开启内部中断</span></div>
<div class="line"><span class="lineno">  142</span>  cpu_io::Sie::Ssie::Set();</div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>  <span class="comment">// 开启外部中断</span></div>
<div class="line"><span class="lineno">  145</span>  cpu_io::Sie::Seie::Set();</div>
<div class="line"><span class="lineno">  146</span> </div>
<div class="line"><span class="lineno">  147</span>  <span class="comment">// 为当前 core 开启串口中断</span></div>
<div class="line"><span class="lineno">  148</span>  <a class="code hl_function" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton&lt;Plic&gt;::GetInstance</a>().Set(</div>
<div class="line"><span class="lineno">  149</span>      <a class="code hl_function" href="namespacecpu__io.html#a52b8a7263a31e6670ef4dec7922d9e72">cpu_io::GetCurrentCoreId</a>(),</div>
<div class="line"><span class="lineno">  150</span>      std::get&lt;2&gt;(<a class="code hl_class" href="classSingleton.html">Singleton&lt;KernelFdt&gt;::GetInstance</a>().GetSerial().value()), 1,</div>
<div class="line"><span class="lineno">  151</span>      <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>  <span class="comment">// 初始化定时器</span></div>
<div class="line"><span class="lineno">  154</span>  <a class="code hl_function" href="aarch64_2timer_8cpp.html#a8febf243f0581d61474fd6b56cfdb544">TimerInit</a>();</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>  <a class="code hl_struct" href="structklog_1_1Info.html">klog::Info</a>(<span class="stringliteral">&quot;Hello InterruptInit\n&quot;</span>);</div>
<div class="line"><span class="lineno">  157</span>}</div>
<div class="ttc" id="aaarch64_2timer_8cpp_html_a8febf243f0581d61474fd6b56cfdb544"><div class="ttname"><a href="aarch64_2timer_8cpp.html#a8febf243f0581d61474fd6b56cfdb544">TimerInit</a></div><div class="ttdeci">void TimerInit()</div><div class="ttdef"><b>Definition</b> <a href="aarch64_2timer_8cpp_source.html#l00032">timer.cpp:32</a></div></div>
<div class="ttc" id="aarch_8h_html_ac73d8c3647dca189d5c572ba9c48f471"><div class="ttname"><a href="arch_8h.html#ac73d8c3647dca189d5c572ba9c48f471">trap_entry</a></div><div class="ttdeci">void trap_entry()</div><div class="ttdef"><b>Definition</b> <a href="arch_8cpp_source.html#l00046">arch.cpp:46</a></div></div>
<div class="ttc" id="aclassPlic_html"><div class="ttname"><a href="classPlic.html">Plic</a></div><div class="ttdoc">Plic 驱动</div><div class="ttdef"><b>Definition</b> <a href="plic_8h_source.html#l00017">plic.h:17</a></div></div>
<div class="ttc" id="aclassSingleton_html"><div class="ttname"><a href="classSingleton.html">Singleton</a></div><div class="ttdef"><b>Definition</b> <a href="singleton_8hpp_source.html#l00010">singleton.hpp:10</a></div></div>
<div class="ttc" id="anamespacecpu__io_html_a52b8a7263a31e6670ef4dec7922d9e72"><div class="ttname"><a href="namespacecpu__io.html#a52b8a7263a31e6670ef4dec7922d9e72">cpu_io::GetCurrentCoreId</a></div><div class="ttdeci">auto GetCurrentCoreId() -&gt; size_t</div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00026">cpu_io.h:26</a></div></div>
<div class="ttc" id="astructklog_1_1Err_html"><div class="ttname"><a href="structklog_1_1Err.html">klog::Err</a></div><div class="ttdef"><b>Definition</b> <a href="kernel__log_8hpp_source.html#l00188">kernel_log.hpp:188</a></div></div>
<div class="ttc" id="astructklog_1_1Info_html"><div class="ttname"><a href="structklog_1_1Info.html">klog::Info</a></div><div class="ttdef"><b>Definition</b> <a href="kernel__log_8hpp_source.html#l00168">kernel_log.hpp:168</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="riscv64_2interrupt__main_8cpp_a660e4785391d83bb3aa43f15ae53a530_cgraph.png" border="0" usemap="#ariscv64_2interrupt__main_8cpp_a660e4785391d83bb3aa43f15ae53a530_cgraph" alt=""/></div>
<map name="ariscv64_2interrupt__main_8cpp_a660e4785391d83bb3aa43f15ae53a530_cgraph" id="ariscv64_2interrupt__main_8cpp_a660e4785391d83bb3aa43f15ae53a530_cgraph">
<area shape="rect" title=" " alt="" coords="5,62,104,87"/>
<area shape="rect" href="namespacecpu__io.html#a52b8a7263a31e6670ef4dec7922d9e72" title=" " alt="" coords="289,13,475,38"/>
<area shape="poly" title=" " alt="" coords="72,60,108,39,151,21,214,12,276,11,276,17,214,17,153,27,110,43,75,64"/>
<area shape="rect" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd" title=" " alt="" coords="297,62,467,87"/>
<area shape="poly" title=" " alt="" coords="104,72,283,72,283,77,104,77"/>
<area shape="rect" href="aarch64_2timer_8cpp.html#a8febf243f0581d61474fd6b56cfdb544" title=" " alt="" coords="156,37,237,62"/>
<area shape="poly" title=" " alt="" coords="104,63,142,56,143,62,105,69"/>
<area shape="rect" href="arch_8cpp.html#ac73d8c3647dca189d5c572ba9c48f471" title=" " alt="" coords="152,138,241,163"/>
<area shape="poly" title=" " alt="" coords="81,85,161,129,159,134,78,90"/>
<area shape="rect" href="classtest__env_1_1TestEnvironmentState.html#a562424679984595e70361b0dad2ef96d" title="获取当前线程的环境实例指针（供 Mock 层调用）" alt="" coords="523,5,785,45"/>
<area shape="poly" title=" " alt="" coords="475,23,509,23,509,28,475,28"/>
<area shape="poly" title=" " alt="" coords="237,41,275,37,276,42,238,47"/>
<area shape="poly" title=" " alt="" coords="238,52,284,59,283,64,237,57"/>
</map>
</div>

</div>
</div>
<a id="ac31c690eba7c84c9327f9f813d4b3fea" name="ac31c690eba7c84c9327f9f813d4b3fea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac31c690eba7c84c9327f9f813d4b3fea">&#9670;&#160;</a></span>InterruptInitSMP()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InterruptInitSMP </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="riscv64_2interrupt__main_8cpp_source.html#l00159">159</a> of file <a class="el" href="riscv64_2interrupt__main_8cpp_source.html">interrupt_main.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  159</span>                                         {</div>
<div class="line"><span class="lineno">  160</span>  <span class="comment">// 设置 trap vector</span></div>
<div class="line"><span class="lineno">  161</span>  <span class="keyword">auto</span> success =</div>
<div class="line"><span class="lineno">  162</span>      cpu_io::Stvec::SetDirect(<span class="keyword">reinterpret_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(<a class="code hl_function" href="arch_8h.html#ac73d8c3647dca189d5c572ba9c48f471">trap_entry</a>));</div>
<div class="line"><span class="lineno">  163</span>  <span class="keywordflow">if</span> (!success) {</div>
<div class="line"><span class="lineno">  164</span>    <a class="code hl_struct" href="structklog_1_1Err.html">klog::Err</a>(<span class="stringliteral">&quot;Failed to set trap vector\n&quot;</span>);</div>
<div class="line"><span class="lineno">  165</span>  }</div>
<div class="line"><span class="lineno">  166</span> </div>
<div class="line"><span class="lineno">  167</span>  <span class="comment">// 开启 Supervisor 中断</span></div>
<div class="line"><span class="lineno">  168</span>  cpu_io::Sstatus::Sie::Set();</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>  <span class="comment">// 开启内部中断</span></div>
<div class="line"><span class="lineno">  171</span>  cpu_io::Sie::Ssie::Set();</div>
<div class="line"><span class="lineno">  172</span> </div>
<div class="line"><span class="lineno">  173</span>  <span class="comment">// 开启外部中断</span></div>
<div class="line"><span class="lineno">  174</span>  cpu_io::Sie::Seie::Set();</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>  <span class="comment">// 初始化定时器</span></div>
<div class="line"><span class="lineno">  177</span>  <a class="code hl_function" href="aarch64_2timer_8cpp.html#a85b082ebd75de9086c93c05ad124fc8c">TimerInitSMP</a>();</div>
<div class="line"><span class="lineno">  178</span> </div>
<div class="line"><span class="lineno">  179</span>  <a class="code hl_struct" href="structklog_1_1Info.html">klog::Info</a>(<span class="stringliteral">&quot;Hello InterruptInitSMP\n&quot;</span>);</div>
<div class="line"><span class="lineno">  180</span>}</div>
<div class="ttc" id="aaarch64_2timer_8cpp_html_a85b082ebd75de9086c93c05ad124fc8c"><div class="ttname"><a href="aarch64_2timer_8cpp.html#a85b082ebd75de9086c93c05ad124fc8c">TimerInitSMP</a></div><div class="ttdeci">void TimerInitSMP()</div><div class="ttdef"><b>Definition</b> <a href="aarch64_2timer_8cpp_source.html#l00019">timer.cpp:19</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="riscv64_2interrupt__main_8cpp_ac31c690eba7c84c9327f9f813d4b3fea_cgraph.png" border="0" usemap="#ariscv64_2interrupt__main_8cpp_ac31c690eba7c84c9327f9f813d4b3fea_cgraph" alt=""/></div>
<map name="ariscv64_2interrupt__main_8cpp_ac31c690eba7c84c9327f9f813d4b3fea_cgraph" id="ariscv64_2interrupt__main_8cpp_ac31c690eba7c84c9327f9f813d4b3fea_cgraph">
<area shape="rect" title=" " alt="" coords="5,62,132,87"/>
<area shape="rect" href="aarch64_2timer_8cpp.html#a85b082ebd75de9086c93c05ad124fc8c" title=" " alt="" coords="180,37,289,62"/>
<area shape="poly" title=" " alt="" coords="132,62,166,57,167,62,133,68"/>
<area shape="rect" href="arch_8cpp.html#ac73d8c3647dca189d5c572ba9c48f471" title=" " alt="" coords="190,86,279,111"/>
<area shape="poly" title=" " alt="" coords="133,81,177,88,176,93,132,86"/>
<area shape="rect" href="namespacecpu__io.html#a52b8a7263a31e6670ef4dec7922d9e72" title=" " alt="" coords="337,13,523,38"/>
<area shape="poly" title=" " alt="" coords="289,40,324,36,324,41,290,45"/>
<area shape="rect" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd" title=" " alt="" coords="345,62,515,87"/>
<area shape="poly" title=" " alt="" coords="290,54,332,59,331,65,289,59"/>
<area shape="rect" href="classtest__env_1_1TestEnvironmentState.html#a562424679984595e70361b0dad2ef96d" title="获取当前线程的环境实例指针（供 Mock 层调用）" alt="" coords="571,5,833,45"/>
<area shape="poly" title=" " alt="" coords="523,23,557,23,557,28,523,28"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_70d5e250c66d001b18da37689179cade.html">arch</a></li><li class="navelem"><a class="el" href="dir_cb2d47c5135f3548db9b88a74bfd0d69.html">riscv64</a></li><li class="navelem"><a class="el" href="riscv64_2interrupt__main_8cpp.html">interrupt_main.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
