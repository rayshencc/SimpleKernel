<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SimpleKernel: /root/src/arch/riscv64/timer.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SimpleKernel<span id="projectnumber">&#160;1.17.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('riscv64_2timer_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">timer.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="cpu__io_8h_source.html">cpu_io.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="arch_8h_source.html">arch.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="basic__info_8hpp_source.html">basic_info.hpp</a>&quot;</code><br />
<code>#include &quot;interrupt.h&quot;</code><br />
<code>#include &quot;opensbi_interface.h&quot;</code><br />
<code>#include &quot;<a class="el" href="singleton_8hpp_source.html">singleton.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="task__manager_8hpp_source.html">task_manager.hpp</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for timer.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="riscv64_2timer_8cpp__incl.png" border="0" usemap="#a_2root_2src_2arch_2riscv64_2timer_8cpp" alt=""/></div>
<map name="a_2root_2src_2arch_2riscv64_2timer_8cpp" id="a_2root_2src_2arch_2riscv64_2timer_8cpp">
<area shape="rect" title=" " alt="" coords="1812,5,1970,45"/>
<area shape="rect" href="cpu__io_8h.html" title=" " alt="" coords="1161,313,1237,339"/>
<area shape="poly" title=" " alt="" coords="1840,48,1716,96,1439,216,1236,310,1234,305,1437,211,1714,91,1838,43"/>
<area shape="rect" href="arch_8h.html" title=" " alt="" coords="1429,240,1492,265"/>
<area shape="poly" title=" " alt="" coords="1856,48,1496,236,1493,231,1854,43"/>
<area shape="rect" href="basic__info_8hpp.html" title=" " alt="" coords="1833,93,1949,119"/>
<area shape="poly" title=" " alt="" coords="1894,46,1894,79,1888,79,1888,46"/>
<area shape="rect" href="singleton_8hpp.html" title=" " alt="" coords="2138,313,2249,339"/>
<area shape="poly" title=" " alt="" coords="1951,43,2017,70,2089,111,2124,137,2156,167,2183,201,2204,239,2209,271,2205,301,2199,300,2204,271,2199,241,2179,204,2152,171,2121,141,2086,116,2014,75,1949,48"/>
<area shape="rect" title=" " alt="" coords="2320,93,2411,119"/>
<area shape="poly" title=" " alt="" coords="1971,37,2302,91,2307,92,2306,97,2301,96,1970,42"/>
<area shape="rect" title=" " alt="" coords="2436,93,2586,119"/>
<area shape="poly" title=" " alt="" coords="1971,34,2422,91,2422,96,1970,39"/>
<area shape="rect" href="task__manager_8hpp.html" title=" " alt="" coords="730,93,873,119"/>
<area shape="poly" title=" " alt="" coords="1812,35,887,101,887,96,1811,30"/>
<area shape="rect" title=" " alt="" coords="1392,387,1459,412"/>
<area shape="poly" title=" " alt="" coords="1236,336,1380,381,1378,386,1235,341"/>
<area shape="rect" title=" " alt="" coords="816,387,886,412"/>
<area shape="poly" title=" " alt="" coords="1161,337,905,389,900,390,899,385,904,384,1160,332"/>
<area shape="rect" title=" " alt="" coords="1512,460,1582,485"/>
<area shape="poly" title=" " alt="" coords="1224,336,1381,410,1500,453,1498,458,1379,414,1222,341"/>
<area shape="rect" title=" " alt="" coords="518,460,584,485"/>
<area shape="poly" title=" " alt="" coords="1161,338,1142,341,1047,354,972,359,898,368,805,389,776,401,748,414,669,441,598,461,597,456,668,436,746,410,774,396,804,384,897,363,971,354,1046,348,1141,336,1160,333"/>
<area shape="rect" title=" " alt="" coords="908,460,972,485"/>
<area shape="poly" title=" " alt="" coords="1161,338,1032,366,976,380,950,389,943,401,939,416,938,447,933,447,933,415,938,399,947,385,974,375,1031,361,1160,333"/>
<area shape="rect" title=" " alt="" coords="1103,460,1167,485"/>
<area shape="poly" title=" " alt="" coords="1200,339,1194,373,1180,413,1156,451,1151,448,1175,411,1188,372,1195,338"/>
<area shape="rect" title=" " alt="" coords="1192,460,1316,485"/>
<area shape="poly" title=" " alt="" coords="1206,338,1224,386,1247,446,1242,448,1219,388,1201,340"/>
<area shape="rect" href="test__environment__state_8hpp.html" title=" " alt="" coords="960,387,1166,412"/>
<area shape="poly" title=" " alt="" coords="1178,341,1098,383,1096,378,1176,336"/>
<area shape="poly" title=" " alt="" coords="1141,409,1498,461,1497,467,1140,415"/>
<area shape="poly" title=" " alt="" coords="981,415,598,467,598,462,980,409"/>
<area shape="poly" title=" " alt="" coords="1045,414,973,455,971,451,1042,410"/>
<area shape="poly" title=" " alt="" coords="1077,410,1115,448,1112,452,1073,414"/>
<area shape="poly" title=" " alt="" coords="1095,410,1210,452,1209,457,1093,415"/>
<area shape="rect" title=" " alt="" coords="1016,460,1078,485"/>
<area shape="poly" title=" " alt="" coords="1063,413,1055,447,1050,446,1058,412"/>
<area shape="poly" title=" " alt="" coords="1429,265,1251,313,1250,308,1428,260"/>
<area shape="poly" title=" " alt="" coords="1468,265,1517,386,1541,446,1536,448,1513,388,1463,267"/>
<area shape="poly" title=" " alt="" coords="1429,260,1306,279,1228,295,1151,316,1121,329,1092,341,1040,353,996,360,919,364,842,368,799,376,748,389,722,401,697,414,594,457,592,453,695,410,720,396,746,384,797,371,842,363,918,358,995,355,1039,348,1090,336,1119,324,1149,311,1227,290,1305,274,1428,255"/>
<area shape="rect" title=" " alt="" coords="1364,313,1458,339"/>
<area shape="poly" title=" " alt="" coords="1454,267,1429,304,1425,301,1450,264"/>
<area shape="poly" title=" " alt="" coords="1950,111,2061,128,2187,156,2245,174,2292,196,2324,221,2333,236,2336,251,2336,328,2329,343,2310,357,2243,382,2146,404,2030,423,1785,453,1597,470,1596,465,1784,448,2029,418,2145,399,2242,377,2308,352,2325,339,2331,327,2331,252,2328,238,2320,225,2289,201,2243,179,2186,161,2060,133,1949,117"/>
<area shape="poly" title=" " alt="" coords="1833,120,1256,218,944,275,830,299,764,316,690,350,618,389,589,419,567,450,563,447,585,415,615,385,687,345,762,311,829,294,943,270,1255,213,1832,114"/>
<area shape="rect" href="kernel__log_8hpp.html" title=" " alt="" coords="1832,167,1950,192"/>
<area shape="poly" title=" " alt="" coords="1894,119,1894,153,1888,153,1888,119"/>
<area shape="poly" title=" " alt="" coords="1950,115,2006,131,2068,155,2129,190,2156,213,2180,239,2193,268,2197,299,2192,300,2188,270,2175,241,2152,216,2126,195,2066,160,2004,136,1949,120"/>
<area shape="rect" title=" " alt="" coords="1746,240,1849,265"/>
<area shape="poly" title=" " alt="" coords="1873,121,1846,141,1823,168,1810,197,1803,227,1798,226,1805,196,1818,165,1843,137,1870,117"/>
<area shape="poly" title=" " alt="" coords="1832,189,1647,209,1418,243,1253,274,1162,295,1092,316,1070,329,1047,341,995,355,949,362,870,363,792,365,748,373,697,389,679,400,660,414,586,456,584,451,658,410,676,396,695,384,747,368,791,360,870,358,949,357,993,350,1045,336,1067,324,1090,311,1160,290,1252,269,1417,237,1646,204,1832,184"/>
<area shape="rect" title=" " alt="" coords="638,313,694,339"/>
<area shape="poly" title=" " alt="" coords="1832,185,1533,200,1336,217,1137,243,1083,255,1029,268,850,300,708,321,707,316,849,294,1028,263,1082,249,1136,237,1335,212,1532,195,1832,180"/>
<area shape="rect" title=" " alt="" coords="1925,240,1996,265"/>
<area shape="poly" title=" " alt="" coords="1904,190,1942,228,1938,232,1901,194"/>
<area shape="rect" title=" " alt="" coords="2020,240,2144,265"/>
<area shape="poly" title=" " alt="" coords="1923,190,2038,232,2037,237,1921,195"/>
<area shape="poly" title=" " alt="" coords="1893,192,1897,228,1904,247,1915,263,1943,275,1996,288,2125,311,2124,316,1995,293,1941,280,1912,267,1899,250,1892,229,1888,193"/>
<area shape="rect" title=" " alt="" coords="1995,313,2078,339"/>
<area shape="poly" title=" " alt="" coords="1950,183,2008,190,2070,201,2124,217,2144,227,2158,238,2165,250,2165,262,2150,283,2123,299,2092,312,2090,307,2121,294,2147,279,2160,261,2160,252,2154,242,2142,231,2122,222,2069,206,2008,195,1949,188"/>
<area shape="poly" title=" " alt="" coords="1878,194,1825,234,1822,229,1874,190"/>
<area shape="rect" href="spinlock_8hpp.html" title=" " alt="" coords="1618,240,1722,265"/>
<area shape="poly" title=" " alt="" coords="1856,195,1719,238,1717,233,1855,189"/>
<area shape="poly" title=" " alt="" coords="1618,264,1251,320,1250,314,1617,259"/>
<area shape="poly" title=" " alt="" coords="1651,268,1458,382,1455,377,1649,263"/>
<area shape="poly" title=" " alt="" coords="1723,261,1805,281,1840,295,1862,312,1868,326,1863,340,1837,371,1806,397,1771,418,1734,435,1660,458,1597,469,1596,464,1659,453,1732,430,1769,414,1803,393,1833,368,1858,337,1862,326,1858,315,1838,300,1803,286,1721,266"/>
<area shape="poly" title=" " alt="" coords="1722,261,1982,311,1981,317,1721,267"/>
<area shape="rect" title=" " alt="" coords="1686,313,1766,339"/>
<area shape="poly" title=" " alt="" coords="1681,264,1710,301,1706,304,1677,267"/>
<area shape="rect" title=" " alt="" coords="1790,313,1848,339"/>
<area shape="poly" title=" " alt="" coords="1695,263,1783,305,1781,310,1693,268"/>
<area shape="rect" href="expected_8hpp.html" title=" " alt="" coords="30,313,141,339"/>
<area shape="poly" title=" " alt="" coords="1618,261,1504,268,1146,284,867,291,588,299,230,316,155,321,154,316,229,311,588,294,867,286,1146,278,1504,263,1617,255"/>
<area shape="poly" title=" " alt="" coords="79,340,61,375,58,394,65,410,86,421,128,431,251,448,390,460,504,466,504,472,390,465,250,453,127,437,85,426,61,414,53,395,56,373,75,337"/>
<area shape="rect" title=" " alt="" coords="75,387,158,412"/>
<area shape="poly" title=" " alt="" coords="93,338,108,373,104,375,88,340"/>
<area shape="poly" title=" " alt="" coords="873,106,967,111,1071,121,1167,138,1204,150,1231,164,1255,186,1269,210,1272,236,1264,266,1249,289,1230,307,1227,303,1245,286,1259,264,1267,236,1264,211,1251,190,1228,169,1202,155,1165,143,1071,126,966,116,873,112"/>
<area shape="poly" title=" " alt="" coords="873,109,1031,122,1227,146,1323,163,1411,184,1483,209,1512,223,1534,238,1569,276,1579,295,1585,316,1585,360,1576,413,1563,449,1558,447,1571,411,1580,360,1579,316,1574,297,1565,279,1531,242,1509,227,1481,214,1409,189,1322,169,1226,152,1031,127,873,114"/>
<area shape="poly" title=" " alt="" coords="730,113,459,133,334,149,291,158,267,169,239,196,217,225,200,255,191,285,188,316,193,347,206,379,228,410,246,424,273,436,348,453,431,463,504,467,504,473,431,468,347,458,272,441,243,429,224,414,201,381,188,349,183,316,185,284,195,253,212,222,235,193,264,164,289,153,333,144,459,127,730,108"/>
<area shape="poly" title=" " alt="" coords="873,106,953,110,1040,120,1116,137,1145,150,1165,165,1171,179,1165,194,1106,213,977,248,707,317,706,312,976,243,1104,208,1161,190,1166,179,1161,168,1143,154,1115,142,1039,125,953,116,873,111"/>
<area shape="poly" title=" " alt="" coords="873,107,1281,125,1485,142,1558,152,1600,164,1619,177,1635,193,1659,226,1655,229,1631,196,1616,181,1598,169,1557,158,1484,147,1281,131,873,112"/>
<area shape="poly" title=" " alt="" coords="730,112,586,117,410,127,240,144,172,156,120,169,83,182,55,194,33,211,12,241,9,259,17,276,33,291,52,304,49,309,29,295,13,279,4,260,7,239,29,208,53,189,82,177,118,164,170,151,240,139,409,122,586,112,730,106"/>
<area shape="rect" title=" " alt="" coords="487,167,620,192"/>
<area shape="poly" title=" " alt="" coords="763,121,608,165,606,160,761,116"/>
<area shape="rect" href="interrupt__base_8h.html" title=" " alt="" coords="22,240,150,265"/>
<area shape="poly" title=" " alt="" coords="730,110,592,112,423,120,341,127,265,138,201,152,155,169,138,181,122,197,100,229,95,226,118,193,134,177,152,164,200,146,264,133,340,122,423,115,591,106,730,104"/>
<area shape="rect" href="per__cpu_8hpp.html" title=" " alt="" coords="1148,240,1250,265"/>
<area shape="poly" title=" " alt="" coords="873,104,964,107,1064,116,1152,134,1186,148,1209,165,1217,180,1219,196,1212,228,1207,227,1214,196,1212,181,1205,168,1183,152,1151,139,1063,122,963,113,873,110"/>
<area shape="rect" href="resource__id_8hpp.html" title=" " alt="" coords="242,313,367,339"/>
<area shape="poly" title=" " alt="" coords="730,113,608,120,467,131,347,148,306,158,285,169,276,183,270,199,271,235,280,270,293,300,289,302,275,272,265,235,265,198,271,181,281,165,304,153,346,142,467,126,607,115,730,108"/>
<area shape="rect" href="scheduler__base_8hpp.html" title=" " alt="" coords="312,167,462,192"/>
<area shape="poly" title=" " alt="" coords="735,121,468,167,467,162,735,116"/>
<area shape="rect" href="task__control__block_8hpp.html" title=" " alt="" coords="452,240,624,265"/>
<area shape="poly" title=" " alt="" coords="730,113,611,120,476,132,360,148,321,158,301,169,291,185,292,199,302,210,321,220,375,235,438,244,438,249,374,240,319,225,299,215,287,201,286,184,297,165,319,153,359,143,475,127,611,115,730,108"/>
<area shape="rect" title=" " alt="" coords="644,167,708,192"/>
<area shape="poly" title=" " alt="" coords="783,121,710,162,707,157,780,116"/>
<area shape="rect" title=" " alt="" coords="732,167,871,192"/>
<area shape="poly" title=" " alt="" coords="804,119,804,153,799,153,799,119"/>
<area shape="rect" title=" " alt="" coords="895,167,1042,192"/>
<area shape="poly" title=" " alt="" coords="829,116,930,159,928,164,827,121"/>
<area shape="rect" title=" " alt="" coords="1066,167,1151,192"/>
<area shape="poly" title=" " alt="" coords="852,116,1053,163,1052,168,850,121"/>
<area shape="poly" title=" " alt="" coords="150,255,1046,311,1147,318,1147,323,1045,316,150,260"/>
<area shape="poly" title=" " alt="" coords="66,268,41,287,20,314,17,328,18,343,30,374,53,410,87,427,137,441,197,451,263,458,397,467,504,469,504,474,396,472,263,464,196,456,136,446,85,432,49,414,25,377,13,344,12,327,15,312,37,283,63,263"/>
<area shape="poly" title=" " alt="" coords="88,266,88,300,83,300,83,266"/>
<area shape="poly" title=" " alt="" coords="1202,266,1202,300,1196,300,1196,266"/>
<area shape="poly" title=" " alt="" coords="1214,264,1255,298,1308,336,1388,379,1385,383,1306,341,1252,302,1211,268"/>
<area shape="poly" title=" " alt="" coords="1221,263,1308,311,1353,336,1387,349,1414,357,1441,366,1473,385,1507,415,1533,447,1529,451,1503,419,1469,389,1439,371,1413,362,1385,354,1351,341,1306,316,1219,268"/>
<area shape="poly" title=" " alt="" coords="1149,265,858,316,756,344,713,362,660,389,614,420,575,452,572,448,611,416,658,384,711,357,754,339,857,311,1148,260"/>
<area shape="poly" title=" " alt="" coords="1148,263,708,322,707,316,1147,258"/>
<area shape="poly" title=" " alt="" coords="1250,254,1601,275,2090,311,2125,314,2124,319,2089,316,1601,280,1250,259"/>
<area shape="rect" title=" " alt="" coords="870,313,944,339"/>
<area shape="poly" title=" " alt="" coords="1153,268,958,315,957,310,1151,263"/>
<area shape="rect" title=" " alt="" coords="969,313,1034,339"/>
<area shape="poly" title=" " alt="" coords="1168,268,1048,311,1046,306,1166,263"/>
<area shape="poly" title=" " alt="" coords="316,337,349,372,396,410,452,437,505,456,504,461,449,442,394,414,346,376,312,341"/>
<area shape="rect" title=" " alt="" coords="238,387,325,412"/>
<area shape="poly" title=" " alt="" coords="303,340,292,374,287,373,298,338"/>
<area shape="poly" title=" " alt="" coords="463,188,475,189,995,201,1333,215,1450,225,1487,231,1506,238,1526,260,1541,286,1550,314,1556,344,1558,401,1554,446,1549,446,1553,400,1551,344,1545,315,1536,288,1522,263,1503,242,1485,236,1450,230,1333,220,994,207,475,195,463,193"/>
<area shape="poly" title=" " alt="" coords="396,191,540,447,536,449,391,193"/>
<area shape="poly" title=" " alt="" coords="412,190,502,232,499,236,410,194"/>
<area shape="poly" title=" " alt="" coords="624,261,1148,317,1147,322,623,266"/>
<area shape="poly" title=" " alt="" coords="576,263,701,298,858,336,948,352,1018,361,1088,369,1178,384,1356,422,1499,456,1498,462,1354,427,1177,389,1087,375,1017,366,947,357,857,341,699,303,575,268"/>
<area shape="poly" title=" " alt="" coords="541,266,552,446,547,446,536,266"/>
<area shape="poly" title=" " alt="" coords="560,263,634,304,631,309,557,268"/>
<area shape="poly" title=" " alt="" coords="501,268,356,312,354,307,499,263"/>
</map>
</div>
</div>
<p><a href="riscv64_2timer_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a85b082ebd75de9086c93c05ad124fc8c" id="r_a85b082ebd75de9086c93c05ad124fc8c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="riscv64_2timer_8cpp.html#a85b082ebd75de9086c93c05ad124fc8c">TimerInitSMP</a> ()</td></tr>
<tr class="separator:a85b082ebd75de9086c93c05ad124fc8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8febf243f0581d61474fd6b56cfdb544" id="r_a8febf243f0581d61474fd6b56cfdb544"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="riscv64_2timer_8cpp.html#a8febf243f0581d61474fd6b56cfdb544">TimerInit</a> ()</td></tr>
<tr class="separator:a8febf243f0581d61474fd6b56cfdb544"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8febf243f0581d61474fd6b56cfdb544" name="a8febf243f0581d61474fd6b56cfdb544"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8febf243f0581d61474fd6b56cfdb544">&#9670;&#160;</a></span>TimerInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TimerInit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="riscv64_2timer_8cpp_source.html#l00026">26</a> of file <a class="el" href="riscv64_2timer_8cpp_source.html">timer.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   26</span>                 {</div>
<div class="line"><span class="lineno">   27</span>  <span class="comment">// 计算 interval</span></div>
<div class="line"><span class="lineno">   28</span>  interval = <a class="code hl_function" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton&lt;BasicInfo&gt;::GetInstance</a>().interval / SIMPLEKERNEL_TICK;</div>
<div class="line"><span class="lineno">   29</span> </div>
<div class="line"><span class="lineno">   30</span>  <span class="comment">// 注册时钟中断</span></div>
<div class="line"><span class="lineno">   31</span>  <a class="code hl_function" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton&lt;Interrupt&gt;::GetInstance</a>().RegisterInterruptFunc(</div>
<div class="line"><span class="lineno">   32</span>      cpu_io::detail::register_info::csr::ScauseInfo::kSupervisorTimerInterrupt,</div>
<div class="line"><span class="lineno">   33</span>      [](uint64_t, <a class="code hl_struct" href="structcpu__io_1_1TrapContext.html">cpu_io::TrapContext</a>*) -&gt; uint64_t {</div>
<div class="line"><span class="lineno">   34</span>        sbi_set_timer(cpu_io::Time::Read() + interval);</div>
<div class="line"><span class="lineno">   35</span>        <a class="code hl_function" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton&lt;TaskManager&gt;::GetInstance</a>().TickUpdate();</div>
<div class="line"><span class="lineno">   36</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">   37</span>      });</div>
<div class="line"><span class="lineno">   38</span> </div>
<div class="line"><span class="lineno">   39</span>  <span class="comment">// 开启时钟中断</span></div>
<div class="line"><span class="lineno">   40</span>  cpu_io::Sie::Stie::Set();</div>
<div class="line"><span class="lineno">   41</span> </div>
<div class="line"><span class="lineno">   42</span>  <span class="comment">// 设置初次时钟中断时间</span></div>
<div class="line"><span class="lineno">   43</span>  sbi_set_timer(interval);</div>
<div class="line"><span class="lineno">   44</span>}</div>
<div class="ttc" id="aclassSingleton_html_a68856b49e098eadba37b60366db33ebd"><div class="ttname"><a href="classSingleton.html#a68856b49e098eadba37b60366db33ebd">Singleton::GetInstance</a></div><div class="ttdeci">static auto GetInstance() -&gt; T &amp;</div><div class="ttdef"><b>Definition</b> <a href="singleton_8hpp_source.html#l00023">singleton.hpp:23</a></div></div>
<div class="ttc" id="astructcpu__io_1_1TrapContext_html"><div class="ttname"><a href="structcpu__io_1_1TrapContext.html">cpu_io::TrapContext</a></div><div class="ttdef"><b>Definition</b> <a href="cpu__io_8h_source.html#l00181">cpu_io.h:181</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="riscv64_2timer_8cpp_a8febf243f0581d61474fd6b56cfdb544_cgraph.png" border="0" usemap="#ariscv64_2timer_8cpp_a8febf243f0581d61474fd6b56cfdb544_cgraph" alt=""/></div>
<map name="ariscv64_2timer_8cpp_a8febf243f0581d61474fd6b56cfdb544_cgraph" id="ariscv64_2timer_8cpp_a8febf243f0581d61474fd6b56cfdb544_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,87,31"/>
<area shape="rect" href="classSingleton.html#a68856b49e098eadba37b60366db33ebd" title=" " alt="" coords="135,5,304,31"/>
<area shape="poly" title=" " alt="" coords="87,15,121,15,121,21,87,21"/>
</map>
</div>

</div>
</div>
<a id="a85b082ebd75de9086c93c05ad124fc8c" name="a85b082ebd75de9086c93c05ad124fc8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85b082ebd75de9086c93c05ad124fc8c">&#9670;&#160;</a></span>TimerInitSMP()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TimerInitSMP </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="riscv64_2timer_8cpp_source.html#l00018">18</a> of file <a class="el" href="riscv64_2timer_8cpp_source.html">timer.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   18</span>                    {</div>
<div class="line"><span class="lineno">   19</span>  <span class="comment">// 开启时钟中断</span></div>
<div class="line"><span class="lineno">   20</span>  cpu_io::Sie::Stie::Set();</div>
<div class="line"><span class="lineno">   21</span> </div>
<div class="line"><span class="lineno">   22</span>  <span class="comment">// 设置初次时钟中断时间</span></div>
<div class="line"><span class="lineno">   23</span>  sbi_set_timer(interval);</div>
<div class="line"><span class="lineno">   24</span>}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_70d5e250c66d001b18da37689179cade.html">arch</a></li><li class="navelem"><a class="el" href="dir_cb2d47c5135f3548db9b88a74bfd0d69.html">riscv64</a></li><li class="navelem"><a class="el" href="riscv64_2timer_8cpp.html">timer.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
